"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),classNames=require("classnames"),data=require("@wordpress/data"),lodashEs=require("lodash-es"),apiFetch=require("@wordpress/api-fetch"),date=require("@wordpress/date"),moment=require("moment"),intersect=require("intersect"),i18n=require("@wordpress/i18n");require("lodash");var hooks=require("@wordpress/hooks"),Swal=require("sweetalert2"),components=require("@wordpress/components"),copy=require("copy-to-clipboard"),ReactSelect=require("react-select"),mediaUtils=require("@wordpress/media-utils"),reactDraftWysiwyg=require("react-draft-wysiwyg"),draftJs=require("draft-js"),draftToHtml=require("draftjs-to-html"),htmlToDraft=require("html-to-draftjs"),SweetAlert$1=require("react-bootstrap-sweetalert");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var React__default=_interopDefaultLegacy(React),classNames__default=_interopDefaultLegacy(classNames),apiFetch__default=_interopDefaultLegacy(apiFetch),moment__default=_interopDefaultLegacy(moment),intersect__default=_interopDefaultLegacy(intersect),Swal__default=_interopDefaultLegacy(Swal),copy__default=_interopDefaultLegacy(copy),ReactSelect__default=_interopDefaultLegacy(ReactSelect),draftToHtml__default=_interopDefaultLegacy(draftToHtml),htmlToDraft__default=_interopDefaultLegacy(htmlToDraft),SweetAlert__default=_interopDefaultLegacy(SweetAlert$1);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _arrayLikeToArray$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray$1(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$1(e,t):void 0}}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread()}function ownKeys$b(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$b(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$b(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var wpFetch=function(e){e=_objectSpread$b(_objectSpread$b({},e),{},{method:"POST"});return apiFetch__default.default(e)},isString=function(e){return null!==e&&"string"==typeof e},isNumber=function(e){return null!==e&&"number"==typeof e},isInteger=function(e){return String(Math.floor(Number(e)))===e},isFunction=function(e){return null!==e&&"function"==typeof e},isArray=function(e){return null!==e&&"object"===_typeof$1(e)&&Array.isArray(e)},isObject=function(e){return null!==e&&"object"===_typeof$1(e)&&!isArray(e)},isVisible=function(e,t){if(null==t||!t.rules||null==t.name)return!0;e=when(t.rules,e);return Boolean(e)},withState=function(e){return Boolean(["group","section"].includes(e))},isEmptyObj=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},getIn=function(e,t,n,r){void 0===r&&(r=0);for(var a=lodashEs.toPath(t);e&&r<a.length;)e=e[a[r++]];return void 0===e?n:e},sortingFields=function(e){return[].concat(e).sort(function(e,t){return null==e.priority||null==t.priority?0:e.priority>t.priority?1:-1})},getSelectedValues=function(e){return Array.from(e).filter(function(e){return e.selected}).map(function(e){return e.value})},executeChange=function(e,t){var n,r,a,o,l=t,i=e;return isString(e)||(e.persist&&e.persist(),r=(n=e.target||e.currentTarget).type,a=n.name,o=n.value,e=n.checked,n.options,n.multiple,l=t||a,i=/number|range/.test(r)?(a=parseFloat(o),isNaN(a)?"":a):/checkbox/.test(r)?e:o),{field:l,val:i}},objectWithoutPropertiesLoose=function(e,t){if(null==e)return{};for(var n,r={},a=Object.keys(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r},setIn=function(e,t,n){for(var r=lodashEs.clone(e),a=r,o=0,l=lodashEs.toPath(t);o<l.length-1;o++){var i=l[o],c=getIn(e,l.slice(0,o+1));a=c&&(isObject(c)||Array.isArray(c))?a[i]=lodashEs.clone(c):(c=l[o+1],a[i]=isInteger(c)&&0<=Number(c)?[]:{})}return(0===o?e:a)[l[o]]===n?e:(void 0===n?delete a[l[o]]:a[l[o]]=n,0===o&&void 0===n&&delete r[l[o]],r)},validFieldProps=function(e){var t=e.type,n=["validation_rules","default","rules","meta","switch"].concat(_toConsumableArray(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]));"select"!==t&&"radio-card"!==t&&"toggle"!==t&&e.multiple&&n.push("options"),"group"!==t&&"repeater"!==t&&"section"!==t&&"button"!==t&&n.push("fields");n=objectWithoutPropertiesLoose(e,n);return null==e||!e.label||null!=e&&e.placeholder||(n.placeholder=e.label),n},hitAAJX=function(o){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!==l&&o){var e=!0;if(e=null!=o&&o.rules?when(null==o?void 0:o.rules,l.values):e){var r={};return Object.keys(o.data).map(function(e){var t,n;-1<(null===(n=(t=o.data[e]).indexOf)||void 0===n?void 0:n.call(t,"@"))?(n=o.data[e].substr(1),r[e]=null===(t=l.values)||void 0===t?void 0:t[n]):r[e]=o.data[e]}),wpFetch({path:o.api,data:r}).then(function(e){var t;"success"==(null==e?void 0:e.status)&&null!=e&&e.redirect&&(window.location=null==e?void 0:e.redirect);var n,r,a=null!=e&&null!==(t=e.data)&&void 0!==t&&t.context?e.data.context:!(null==e||!e.context)&&e.context;return a&&isObject(a)&&Object.keys(a).map(function(e){l.setFieldValue(e,a[e])}),null!=e&&null!==(n=e.data)&&void 0!==n&&n.download&&downloadFile({data:JSON.stringify(e.data.download),fileName:(null==e||null===(r=e.data)||void 0===r?void 0:r.filename)||"export.json",fileType:"text/json"}),null!=o&&o.trigger&&isString(null==o?void 0:o.trigger)&&(n=o.trigger.indexOf("@"),r=o.trigger.indexOf(":"),0===n&&0<r&&(n=o.trigger.substr(1,r-1),"true"==(r=o.trigger.substr(r+1))?r=!0:"false"==r&&(r=!1),l.setFieldValue(n,r))),e})}}return Promise.reject(!1)},getTime=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=date.__experimentalGetSettings();return moment__default.default.utc(e||void 0).utcOffset(+(null==r||null===(t=r.timezone)||void 0===t?void 0:t.offset),n)},merge=function(e,t,n){var r=_toConsumableArray(e),t=t.filter(function(t){return r.findIndex(function(e){return e[n]===t[n]})<=-1});return[].concat(_toConsumableArray(r),_toConsumableArray(t))},downloadFile=function(e){var t=e.data,n=e.fileName,e=e.fileType,t=new Blob([t],{type:e}),e=document.createElement("a");e.download=n,e.href=window.URL.createObjectURL(t);t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});e.dispatchEvent(t),e.remove()},_typeof=function(e){return("function"!=typeof Symbol||"symbol"!==_typeof$1(Symbol.iterator))&&e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof$1(e)},get=function(e,t){var n=!(2<(arguments.length<=2?0:arguments.length-2)&&void 0!==(arguments.length<=4?void 0:arguments[4]))||arguments.length<=4?void 0:arguments[4];return String.prototype.split.call(t,/[,[\].]+?/).filter(Boolean).reduce(function(e,t){return e&&Object.hasOwnProperty.call(e,t)?e[t]:n},e)},rules={is:function(e,t,n){return get(n,e)==t},"!is":function(e,t,n){return!rules.is(e,t,n)},includes:function(e,t,n){if(!isEmptyObj(n)){n=get(n,e);if("function"!=_typeof(n)){if(isArray(t)&&isArray(n))return null===(e=intersect__default.default(n,t))||void 0===e?void 0:e.length;if(isArray(t)&&"string"==_typeof(n))return t.includes(n);if(isArray(n)&&"string"==_typeof(t))return n.includes(t)}}return!1},"!includes":function(e,t,n){return!rules.includes(e,t,n)},isOfType:function(e,t,n){return _typeof(get(n,e))===t},"!isOfType":function(e,t,n){return!rules.isOfType(e,t,n)},allOf:function(e,t,n){if(!Array.isArray(t))throw Error(i18n.__('"allOf" condition requires an array as #3 argument',"notificationx"));var r=get(n,e);return t.every(function(e){return r.includes(e)})},anyOf:function(e,t,n){if(!Array.isArray(t))throw Error(i18n.__('"anyOf" condition requires an array as #3 argument',"notificationx"));e=get(n,e);return t.includes(e)},gt:function(e,t,n){return get(n,e)>t},gte:function(e,t,n){return get(n,e)>=t},lt:function(e,t,n){return get(n,e)<t},lte:function(e,t,n){return get(n,e)<=t}},logicalRules={and:function(e){return!e.includes(!1)},or:function(e){return e.includes(!0)},not:function(e){if(1!==e.length)throw Error(i18n.__('"not" can have only one comparison rule, multiple rules given',"notificationx"));return!e[0]}},isValidCondition=function(e){return!!(Array.isArray(e)&&Array.isArray(e[1])&&e[0]&&logicalRules[e[0].toLowerCase()])},processRule=function(e,t){var n=e[0],r=e[1],e=e[2];if("string"!=typeof n||void 0===rules[n])throw Error(i18n.sprintf(i18n.__("Invalid comparison rule %s.","notificationx"),n));return rules[n](r,e,t)},processCondition=function(e,t){return logicalRules[e.toLowerCase()](t)},validate=function(e,n){if(!isValidCondition(e))return processRule(e,n);var t=e.slice(0,1)[0],e=e.slice(1).map(function(e,t){return(isValidCondition(e)?when:processRule)(e,n)});return processCondition(t,e)},when=function(e,t){return"function"==typeof e?Promise.resolve(e(t)):validate(e,t)};function ownKeys$a(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$a(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var DEFAULT_STATE={savedValues:{type:"conversions",source:"edd"},values:{},touched:{},errors:{}},actions={setSavedValues:function(e){return{type:"SET_SAVED_VALUES",payload:e}},setFieldValue:function(e){return{type:"FIELD_VALUE",name:e.name,payload:e.value}},removeFieldValue:function(e){return{type:"REMOVE_FIELD_VALUE",payload:e}},resetFieldValue:function(e){return{type:"RESET_FIELD_VALUE",payload:e}},setFieldTouched:function(e){return{type:"FIELD_TOUCHED",payload:e}},setError:function(e){return{type:"FIELD_ERROR",payload:e}},removeError:function(e){return{type:"REMOVE_FIELD_ERROR",payload:e}}},store={reducer:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:DEFAULT_STATE,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case"SET_SAVED_VALUES":var n=_objectSpread$a({},e);return n=_objectSpread$a(_objectSpread$a({},n),{},{values:t.payload,savedValues:t.payload});case"FIELD_VALUE":var r=_objectSpread$a({},e),a=t.payload;return t.name,_objectSpread$a(_objectSpread$a({},r),{},{values:_objectSpread$a(_objectSpread$a({},null===r||void 0===r?void 0:r.values),a)});case"REMOVE_FIELD_VALUE":var o=_objectSpread$a({},e),a=t.payload;return null!==(r=o.values)&&void 0!==r&&r[a]&&delete o.values[a],o;case"RESET_FIELD_VALUE":var l=_objectSpread$a({},e);return null!==(o=l.values)&&void 0!==o&&o[t.payload]&&(delete l.values[t.payload],null!==(o=l.savedValues)&&void 0!==o&&o[t.payload]&&(l.values[t.payload]=l.savedValues[t.payload])),l;case"FIELD_ERROR":return _objectSpread$a(_objectSpread$a({},e),{},{errors:_objectSpread$a(_objectSpread$a({},e.errors),t.payload)});case"REMOVE_FIELD_ERROR":l=_objectSpread$a({},e);return delete l.errors[t.payload],l;case"FIELD_TOUCHED":return _objectSpread$a(_objectSpread$a({},e),{},{touched:_objectSpread$a(_objectSpread$a({},e.touched),t.payload)})}return e},actions:actions,selectors:{getValues:function(e){return e.values},getFieldValue:function(e,t){return null===(e=e.values)||void 0===e?void 0:e[t]},getSavedFieldValue:function(e,t,n){var r;return null!==n?(null===(r=e.savedValues)||void 0===r?void 0:r[n])===(null===(r=e.values)||void 0===r?void 0:r[n])&&(null===(n=e.savedValues)||void 0===n?void 0:n[t]):null===(e=e.savedValues)||void 0===e?void 0:e[t]},isTouched:function(e,t){return null===(e=e.touched)||void 0===e?void 0:e[t]},getError:function(e,t){return null===(e=e.errors)||void 0===e?void 0:e[t]},isVisible:function(e,t){if(!t.rules||null==t.name)return!0;e=when(t.rules,e.values);return Boolean(e)}}};function _extends$1(){return(_extends$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray$1(e,t)||_nonIterableRest()}var Menu=function(e){var t;if(void 0===e.tabs)throw new Error(i18n.__("There are no tabs defined!","notificationx"));var l=e.active,i=e.setActive,n=e.tabs,c=e.config,u=e.context,r=_slicedToArray(React.useState([]),2),a=r[0],o=r[1];React.useEffect(function(){var e=n.filter(function(e){return isVisible(null==u?void 0:u.values,e)});o(e)},[n,null==u||null===(t=u.values)||void 0===t?void 0:t.source]);var s=classNames__default.default("wprf-tab-menu-wrapper",null==e?void 0:e.className,{"wprf-tab-menu-sidebar":null==c?void 0:c.sidebar},null==u||null===(s=u.values)||void 0===s?void 0:s.source),d=a.findIndex(function(e){return e.id===l});return React.createElement("div",{className:s},React.createElement("ul",{className:"wprf-tab-nav"},a.map(function(t,e){var n,r,a,o;return React.createElement("li",{className:classNames__default.default("wprf-tab-nav-item",(_defineProperty(n={},"".concat(t.classes),t.classes),_defineProperty(n,"wprf-active-nav",l===t.id),_defineProperty(n,"wprf-tab-complete",!(null==c||!c.completionTrack)&&e<=d),n)),"data-key":t.id,key:t.id,onClick:function(){var e;return(null===(e=null==c?void 0:c.clickable)||void 0===e||e)&&i(t.id)}},(null==t?void 0:t.icon)&&(isString(t.icon)&&!isObject(t.icon)?React.createElement("img",{src:t.icon,alt:null==t?void 0:t.label}):isObject(t.icon)?null==u||null===(r=u.icons)||void 0===r||null===(a=r[null==t||null===(a=t.icon)||void 0===a?void 0:a.type])||void 0===a?void 0:a[null==t||null===(o=t.icon)||void 0===o?void 0:o.name]:""),React.createElement("span",null,t.label))})))};function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};for(var n,r={},a=Object.keys(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}var BuilderContext=React.createContext(void 0);BuilderContext.displayName="production"===process.env.NODE_ENV?"Anonymous":"BuilderContext";var BuilderProvider=BuilderContext.Provider,BuilderConsumer=BuilderContext.Consumer;function useBuilderContext(){return React.useContext(BuilderContext)}var useOptions=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"fields";if(null==t||!t[n])throw new Error("#options param need to set in order to use useOptions hook.");var r=t.value,a=t.multiple,o=useBuilderContext(),e=_slicedToArray(React.useState(t[n]),2),l=e[0],i=e[1],c=_slicedToArray(React.useState([]),2),u=c[0],s=c[1],e=_slicedToArray(React.useState({options:null,parentIndex:null}),2),d=e[0],c=e[1],e=_slicedToArray(React.useState(null),2),p=e[0],f=e[1],e=_slicedToArray(React.useState(null),2),v=e[0],m=e[1];return React.useEffect(function(){var e=t.ajax&&(null===(e=o.getTabFields(null==t?void 0:t.parentIndex))||void 0===e?void 0:e[n])||l;s(o.eligibleOptions(e)),f(o.eligibleOption(e,r,null!=a&&a))},[r,l]),React.useEffect(function(){i(t[n]),s(o.eligibleOptions(t[n]))},[t]),React.useEffect(function(){s(o.eligibleOptions(l))},[l]),React.useEffect(function(){null!=d.options&&i(d.options)},[d]),React.useEffect(function(){var e;null!=p&&(e=a?isArray(p)&&p.map(function(e){return e.value})||r:p.value||r,m(e))},[p]),React.useEffect(function(){var e,t;0===u.filter(function(e){return e.value===v}).length&&(t=sortingFields(u),m((null==t||null===(e=t[0])||void 0===e?void 0:e.value)||r))},[v,u]),{options:sortingFields(u),option:v,selectedOption:p,setOptions:s,setData:c}},useTrigger=function(e){var a=e.context;null!=e&&e.trigger&&isArray(null==e?void 0:e.trigger)&&null!=e&&e.trigger.map(function(e){var t=(null==e?void 0:e.type)||"setFieldValue";if(null!=e&&e.action&&isObject(null==e?void 0:e.action))for(var n in null==e?void 0:e.action){var r=n;-1<r.indexOf(".")&&(r=r.split("."));n=null==e?void 0:e.action[n];""!=r&&a[t](r,n)}})},useDefaults=function(e,t,n,r){if(null!=r&&null!=(null==r?void 0:r.defaults)&&!isEmptyObj(r.defaults)){var a=r.defaults;if(null!=a&&!isEmptyObj(a)){var o={};if(null!=a&&a[n]&&isString(null==a?void 0:a[n])){var l=a[n].indexOf("@"),i=a[n].indexOf(":");0===l&&0<i&&(r=a[n].substr(1,i-1),l=a[n].substr(i+1),i=t.getValueForDefault(r,e),""!=r&&""!=l&&(l="false"!==l&&l,o[r]=i||l,t.setValue(r,i||l)))}else if(null!=a&&a[n]&&(isArray(null==a?void 0:a[n])||isObject(null==a?void 0:a[n])))for(var c=0,u=Object.values(null==a?void 0:a[n]);c<u.length;c++){var s=u[c],d=s.indexOf("@"),p=s.indexOf(":");0===d&&0<p&&(d=s.substr(1,p-1),p=s.substr(p+1),-1<s.indexOf(".")&&(d=d.split(".")),s=t.getValueForDefault(d,e),""!=d&&""!=p&&(p="false"!==p&&p,o[d]=s||p,t.setValue(d,s||p)))}return{defaultsData:o}}}};function ownKeys$9(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$9(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$9(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$9(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var SweetAlert=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Swal__default.default.fire(_objectSpread$9({target:null!==(e=null==t?void 0:t.target)&&void 0!==e?e:"#notificationx",type:null!==(e=null==t?void 0:t.type)&&void 0!==e?e:"success",html:null==t?void 0:t.html,title:null!==(e=null==t?void 0:t.title)&&void 0!==e?e:i18n.__("Title Goes Here: title","notificationx"),text:null!==(e=null==t?void 0:t.text)&&void 0!==e?e:i18n.__("Test Goes Here: text","notificationx"),icon:null!==(e=null==t?void 0:t.icon)&&void 0!==e?e:(null==t?void 0:t.type)||"success",timer:null!==(e=null==t?void 0:t.timer)&&void 0!==e?e:null},t))},ObjectFilter=function(t,n){var e=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(!t)return!1;var r={},a=Object.keys(t).filter(function(e){return n(e)});return e?a:(a.map(function(e){r[e]=t[e]}),r)},isExists=function(e,t){var n=_typeof$1(e);switch(!0){case"object"===n&&isArray(e):return e.includes(t);case"object"===n&&!isArray(e):return void 0!==(null==e?void 0:e[t]);default:return e===t}},triggerDefaults=function(e,t){var n,r,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!isEmptyObj(e)&&"object"===_typeof$1(e))for(var o in e)o===a&&(n=e[o].indexOf("@"),r=e[o].indexOf(":"),0===n&&0<r&&(n=e[o].substr(1,r-1),o=e[o].substr(r+1),r=getStoreData().getSavedFieldValue(n,t),""!=n&&""!=o&&setStoreData().setFieldValue({name:n,value:_defineProperty({},n,r||o)})))},getStoreData=function(){return data.select("formbuilder")},setStoreData=function(){return data.dispatch("formbuilder")},processAjaxData=function(n){var r={};return Object.keys(n).map(function(e){var t;0===n[e].indexOf("@")?""!=(t=n[e].substr(1))&&(t=getStoreData().getFieldValue(t),r[e]=t||"undefined"):r[e]=n[e]}),r};function _extends(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return(Object.assign||function(e){for(var t=1;t<a.length;t++){var n,r=a[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,a)}function ownKeys$8(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$8(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$8(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$8(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var builderReducer=function(e,t){switch(t.type){case"SET_CONTEXT":return _extends({},e,setIn(e,t.payload.field,t.payload.value));case"SET_ACTIVE_TAB":return _objectSpread$8(_objectSpread$8({},e),{},{config:_objectSpread$8(_objectSpread$8({},e.config),{},{active:t.payload})});case"SET_REDIRECT":return _objectSpread$8(_objectSpread$8({},e),{},{redirect:_objectSpread$8(_objectSpread$8({},e.redirect),t.payload)});case"SET_VALUES":return _extends({},e,setIn(e,"values",t.payload));case"SET_SAVED_VALUES":return _extends({},e,setIn(e,"savedValues",t.payload));case"SET_FIELD_VALUE":return _extends({},e,{values:setIn(e.values,t.payload.field,t.payload.value)});case"SET_TOUCHED":return _extends({},e,{touched:t.payload});case"SET_ERRORS":return _extends({},e,{errors:t.payload});case"SET_STATUS":return _extends({},e,{status:t.payload});case"SET_ISSUBMITTING":return _objectSpread$8(_objectSpread$8({},e),{},{isSubmitting:t.payload});case"SET_ISVALIDATING":return _extends({},e,{isValidating:t.payload});case"SET_FIELD_TOUCHED":return _objectSpread$8(_objectSpread$8({},e),{},{touched:_objectSpread$8(_objectSpread$8({},e.touched),{},_defineProperty({},t.payload.field,t.payload.value))});case"SET_FIELD_ERROR":case"RESET_FORM":return _extends({},e,t.payload);case"SUBMIT_ATTEMPT":return _extends({},e,{isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return _extends({},e,{isSubmitting:!1});case"SET_FORM_FIELD":return null===t.payload.field?_extends({},e,setIn(e,"tabs",t.payload.value)):_extends({},e,{tabs:setIn(e.tabs,t.payload.field,t.payload.value)});case"SET_ICONS":return _extends({},e,{icons:setIn(e.icons,t.payload.name,t.payload.icons)});case"SET_ALERTS":return _extends({},e,{alerts:setIn(e.alerts,t.payload.name,t.payload.value)});case"SET_COMMONS":return _extends({},e,{common:setIn(e.common,t.payload.name,t.payload.value)});default:return e}};function ownKeys$7(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$7(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$7(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$7(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var useBuilder=function(e){var t=React.useRef(null);React.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]);var n=_slicedToArray(React.useReducer(builderReducer,_objectSpread$7(_objectSpread$7({},e),{},{savedValues:e.savedValues||{},values:e.values||{},errors:e.initialErrors||{},touched:e.initialTouched||{},icons:e.initialIcons||{},common:{},alerts:{},tabs:sortingFields(e.tabs)})),2),s=n[0],r=n[1],a=useEventCallback(function(e,t,n){r({type:"SET_CONTEXT",payload:{field:e,value:t}})}),o=useEventCallback(function(e,t){e="function"==typeof e?e(s.values):e;return r({type:"SET_VALUES",payload:e}),void 0!==t&&t?e:Promise.resolve()}),l=useEventCallback(function(e,t){e="function"==typeof e?e(s.values):e;return r({type:"SET_SAVED_VALUES",payload:e}),void 0!==t&&t?e:Promise.resolve()}),i=useEventCallback(function(e,t,n){r({type:"SET_FIELD_VALUE",payload:{field:e,value:t}})}),c=useEventCallback(function(e,t){r({type:"SET_FORM_FIELD",payload:{field:e,value:t}})}),u=React.useCallback(function(e){return getIn(s.values,e)},[s]),d=useEventCallback(function(e,t,n){r({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t=t||!0}})}),p=React.useCallback(function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e.persist&&e.persist();var n=e.target,r=n.name,e=n.id;n.outerHTML,d(t||r||e,!0)},[d]),f=useEventCallback(function(t){return"string"==typeof t?function(e){return p(e,t)}:void p(t)}),v=React.useCallback(function(e,t){e=executeChange(e,t),t=e.field,e=e.val;t&&i(t,e)},[i,s.values]),m=useEventCallback(function(t,e){return null!=e&&e.isPro&&!1===Boolean(s.is_pro_active)?(null===(e=s.alerts)||void 0===e||null!==(e=e.pro_alert)&&void 0!==e&&e.fire(),!1):"string"==typeof t?function(e){return v(t,e)}:void v(t)}),b=React.useCallback(function(e){var t,n,r,a=_objectSpread$7({},e),o=validFieldProps(a),l=o.name,i=o.type,c=o.parent,u=o.parenttype;null!=a&&a.is_pro&&(o.is_pro=!(null!=a&&a.is_pro&&!0===Boolean(s.is_pro_active))),r=c&&"group"===u?null!==(t=null==(t=null!==(t=getIn(s.values,c))&&void 0!==t?t:{})?void 0:t[l])&&void 0!==t?t:null==a?void 0:a.default:c&&"repeater"===u?null!==(n=null==(c=null!==(c=getIn(s.values,c))&&void 0!==c?c:[])||null===(n=c[o.index])||void 0===n?void 0:n[l])&&void 0!==n?n:null==a?void 0:a.default:null!==(r=getIn(s.values,l))&&void 0!==r?r:null==a?void 0:a.default,o.onChange=m,o.onBlur=f;a=o.value;return"checkbox"===i?(o.checked=!!r,o.value=!!r,isString(r)&&"0"===r?(o.checked=!1,o.value=!1):(o.checked=Boolean(r),o.value=Boolean(r))):"radio"===i?(o.checked=r===a,o.value=a):o.value="date"===i&&null==r?getTime():r,o.visible=isVisible(s.values,e),o},[f,m,s.values]),y=React.useCallback(function(e,t){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return n=null!==r?null===(r=getIn(s.values,r))||void 0===r?void 0:r[e]:getIn(s.values,e)||(null===(n=t.meta)||void 0===n?void 0:n.default),_objectSpread$7(_objectSpread$7({},t.meta),{},{value:n,error:getIn(s.errors,e),touched:!!getIn(s.touched,e),visible:isVisible(s.values,t),initialValue:"",initialTouched:"",initialError:""})},[s.errors,s.touched,s.values]),g=React.useCallback(function(e){if(0<e.length)return e.filter(function(e){return null!=e&&e.rules?when(e.rules,s.values):e});return e},[s.errors,s.touched,s.values]),_=React.useCallback(function(e,t){if(e.length){var n=[];return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]&&isArray(t)?n=e.filter(function(e){return t.includes(e.value)}):0<(n=e.filter(function(e){return e.value==t})).length?n[0]:""}return e},[s.errors,s.touched,s.values]),w=React.useCallback(function(){return{setValue:function(e,t){return i(e,t)},getValue:function(e){return getIn(s.values,e)},getValueForDefault:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return(null===t||getIn(s.savedValues,t)===getIn(s.values,t))&&getIn(s.savedValues,e)}}},[s.errors,s.touched,s.values,s.savedValues]),E=React.useCallback(function(e){return getIn(s.tabs,e)},[s]),h=useEventCallback(function(e){r({type:"SET_ISSUBMITTING",payload:e})}),R=useEventCallback(function(e){r({type:"SET_ACTIVE_TAB",payload:e})}),x=useEventCallback(function(e){r({type:"SET_REDIRECT",payload:e})}),O=useEventCallback(function(e,t){r({type:"SET_ICONS",payload:{name:e,icons:t}})}),S=useEventCallback(function(e,t){r({type:"SET_COMMONS",payload:{name:e,value:t}})}),n=useEventCallback(function(e,t){r({type:"SET_ALERTS",payload:{name:e,value:t}})});return _objectSpread$7(_objectSpread$7(_objectSpread$7({},e),s),{},{setContext:a,values:s.values,savedValues:s.savedValues,errors:s.errors,touched:s.touched,isSubmitting:!1,setActiveTab:R,setRedirect:x,setSubmitting:h,setValues:o,setSavedValues:l,setFieldValue:i,getFieldValue:u,handleBlur:f,handleChange:m,getFieldProps:b,getFieldMeta:y,getFieldHelpers:w,eligibleOptions:g,eligibleOption:_,getTabFields:E,setFormField:c,registerIcons:O,registerCommon:S,registerAlert:n})},useIsomorphicLayoutEffect="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?React.useLayoutEffect:React.useEffect,useEventCallback=function(e){var o=React.useRef(e);return useIsomorphicLayoutEffect(function(){o.current=e}),React.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return o.current.apply(void 0,t)},[])},Row=function(e){var t=classNames__default.default("wprf-row clearfix wprf-flex",null==e?void 0:e.className);return React.createElement("div",{className:t},null==e?void 0:e.children)},Column=function(e){var t=classNames__default.default("wprf-column",null==e?void 0:e.className,(_defineProperty(t={},"wprf-column-".concat(12/(null==e?void 0:e.column)),(null==e?void 0:e.column)&&12!==e.column),_defineProperty(t,"wprf-column-12",12===e.column),t));return React.createElement("div",{className:t},null==e?void 0:e.children)},Label=function(e){var t,n,r,a=classNames__default.default("wprf-input-label",null==e?void 0:e.className);return React.createElement("label",{htmlFor:null==e?void 0:e.htmlFor,className:a},(null==e||null===(t=e.badge)||void 0===t?void 0:t.value)&&React.createElement("div",{className:"wprf-badge"},React.createElement("sup",{className:classNames__default.default("wprf-badge-item",{"wprf-badge-active":null==e||null===(n=e.badge)||void 0===n?void 0:n.active})},null==e||null===(r=e.badge)||void 0===r?void 0:r.label)),!(null!=e&&e.src)&&(null==e?void 0:e.children),(null==e?void 0:e.src)&&React.createElement(Image,{className:"wprf-label-image",src:e.src,alt:null==e?void 0:e.label}))},Image=function(e){if(null==e||!e.src)return React.createElement("p",null,"No Source( src ) Defined");var t=classNames__default.default(["wprf-input-image",null==e?void 0:e.className]);return React.createElement("img",{className:t,src:null==e?void 0:e.src,alt:null==e?void 0:e.alt})},BadgeComp=function(e){var t=e.componentClasses,e=e.label;return React.createElement("div",{className:"wprf-badge"},React.createElement("sup",{className:t},e))},Badge=function(e){var t=useBuilderContext(),n=e.label,r=e.active,a=e.position,o=void 0===a?"right":a,l=e.renderLabel,a=e.renderComponent;void 0===n&&(n="Pro");e=classNames__default.default("wprf-badge-item",{"wprf-badge-active":r}),r={};return t.is_pro_active||(r={onClick:function(e){e.preventDefault(),t.alerts.pro_alert.fire()}}),React.createElement("div",_extends$1({className:classNames__default.default("wprf-badge-wrapper",{"pro-deactivated":!t.is_pro_active})},r),"left"===o&&0<n.length&&React.createElement(React.Fragment,null,l(React.createElement(BadgeComp,{componentClasses:e,label:n}),"left")),"right"===o&&0<n.length&&React.createElement(React.Fragment,null,l(React.createElement(BadgeComp,{componentClasses:e,label:n}),"right")),a())},_excluded$4=["id","label","badge","badgePosition","context"],ControlLabel=function(e){var t,n=e.id,r=e.label,a=e.badge,o=e.badgePosition,l=e.context,e=_objectWithoutProperties(e,_excluded$4);return r&&0<r.length?React.createElement("div",{className:"wprf-control-label"},"left"==o&&a,React.createElement("label",{htmlFor:n},r),(null==e?void 0:e.link)&&React.createElement("a",{rel:"nofollow",target:"_blank",href:e.link},null==l||null===(t=l.icons)||void 0===t?void 0:t.link),"right"==o&&a):null},ControlField=function(e){var t=e.position,n=e.description,r=e.renderComponent,e=e.help;return React.createElement("div",{className:"wprf-control-field"},"left"===t&&n&&React.createElement("p",{className:"wprf-description",dangerouslySetInnerHTML:{__html:n}}),r(),"right"===t&&n&&React.createElement("p",{className:"wprf-description",dangerouslySetInnerHTML:{__html:n}}),e&&React.createElement("p",{className:"wprf-help",dangerouslySetInnerHTML:{__html:e}}))},_excluded$3=["label","id","name","type","style","is_pro","badge"];function ownKeys$6(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$6(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$6(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$6(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var withLabel=function(v){return function(t){var e,n,r,a=t.label,o=t.id,l=t.name,i=t.type,c=t.style,u=t.is_pro,s=t.badge,d=_objectWithoutProperties(t,_excluded$3);null==o&&(o=l);var p=_objectSpread$6({description:{position:"right"}},c),c=classNames__default.default((_defineProperty(c={},"wprf-style-".concat(null==p?void 0:p.type),(null==p?void 0:p.type)||!1),_defineProperty(c,"wprf-label-none",void 0===a||""===a||0===a.length),_defineProperty(c,"wprf-".concat((null==p||null===(e=p.label)||void 0===e?void 0:e.position)||"inline","-label"),(null===(n=null==p||null===(n=p.label)||void 0===n?void 0:n.position)||void 0===n||n)&&null!=a),c));if("hidden"===i)return React.createElement(v,_extends$1({},t,{id:o}));var f=validFieldProps(t,["description","label","help","style"]),l=classNames__default.default("wprf-control-wrapper","wprf-type-".concat(i),c,null==t?void 0:t.classes,_defineProperty({},"wprf-name-".concat(l),l));return React.createElement("div",{className:l},1==u&&React.createElement(React.Fragment,null,React.createElement(Badge,_extends$1({},s,{renderLabel:function(e,t){return React.createElement(ControlLabel,_extends$1({},f,{context:null==d?void 0:d.context,id:o,label:a,badge:e,badgePosition:t}))},renderComponent:function(){var e;return React.createElement(ControlField,{help:null,description:null==t?void 0:t.description,position:null==p||null===(e=p.description)||void 0===e?void 0:e.position,renderComponent:function(){return React.createElement(v,_extends$1({},f,{id:o}))}})}})),(null==t?void 0:t.help)&&React.createElement("div",{className:"wprf-badge-wrapper"},React.createElement("div",{className:"wprf-control-label"}),React.createElement("div",{className:"wprf-control-field"},React.createElement("p",{className:"wprf-help",dangerouslySetInnerHTML:{__html:t.help}})))),(0==u||null==u)&&React.createElement(React.Fragment,null,a&&0<a.length&&React.createElement(ControlLabel,_extends$1({},f,{context:null==d?void 0:d.context,label:a,id:o})),React.createElement(ControlField,{help:null==t?void 0:t.help,description:null==t?void 0:t.description,position:null==p||null===(r=p.description)||void 0===r?void 0:r.position,renderComponent:function(){return React.createElement(v,_extends$1({},f,{id:o}))}})))}},withProps=function(c){var u=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(n){var e=useBuilderContext(),t=n.trigger,r=e.getFieldProps(n),a=e.getFieldMeta(r.name,n),o=e.getFieldHelpers();null!=e&&e.quickBuilder&&null!=e&&e.show&&(e.show.includes(n.name)||(r.classes=null!=r&&r.classes?r.classes+" hidden":" hidden"));var l=null!=n&&n.parentIndex?_toConsumableArray(n.parentIndex):[];r.parentIndex=l,r.context=e,isFunction(n.onChange)&&(r.onChange=n.onChange),isFunction(n.onBlur)&&(r.onBlur=n.onBlur);var i=React.useRef({});return React.useEffect(function(){return i.current[n.name]=!0,function(){i.current[n.name]=!1}},[]),React.useEffect(function(){var e,t;a.visible&&i.current[n.name]&&(u||"group"===r.type?(e=null==n?void 0:n.parent,t=null==n?void 0:n.parenttype,e&&"group"===t&&r.value&&o.setValue([e,r.name],r.value)):o.setValue(r.name,r.value))},[a.visible]),React.useEffect(function(){i.current[n.name]&&isObject(t)&&!isEmptyObj(t)&&useDefaults(r.name,o,r.value,t)},[r.value,a.visible]),a.visible?React.createElement(c,r):React.createElement(React.Fragment,null)}},Field=function(e){if(!e.type||0===e.type.length)throw console.error(e),new Error(i18n.__("Field must have a #type. see documentation.","notificationx"));switch(e.type){case"text":case"checkbox":case"radio":case"email":case"range":case"number":case"hidden":return React.createElement(Input$1,e);case"textarea":return React.createElement(Textarea$1,e);case"codeviewer":return React.createElement(CodeViewer$1,e);case"message":return React.createElement(Message,e);case"select":return React.createElement(Select$1,e);case"slider":return React.createElement(Slider,e);case"group":return React.createElement(Group$1,e);case"radio-card":return React.createElement(Radio,e);case"section":return React.createElement(Section$1,e);case"date":return React.createElement(Date,e);case"toggle":return React.createElement(Toggle,e);case"colorpicker":return React.createElement(ColorPicker$1,e);case"jsonuploader":return React.createElement(JsonUploader$1,e);case"repeater":return React.createElement(Repeater,e);case"media":return React.createElement(Media$1,e);case"editor":return React.createElement(Editor$1,e);case"action":return React.createElement(Action,e);case"button":return React.createElement(Button$1,e);case"modal":return React.createElement(Modal,e);default:var t=hooks.applyFilters("custom_field","",e.type,e);return React.createElement(React.Fragment,null,t)}},GenericField=withProps(Field,!0),Field$1=withProps(Field),DateControl=function(e){var t=e.name,n=e.value,r=e.onChange,a=date.__experimentalGetSettings(),o=null!==(e=null==e?void 0:e.format)&&void 0!==e?e:a.formats.datetime,l=getTime(n),i=/a(?!\\)/i.test(a.formats.datetime.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""));return React.useEffect(function(){n||r({target:{type:"date",name:t,value:l}})},[]),React.createElement(components.Dropdown,{className:"wprf-control-datetime",renderToggle:function(e){e.isOpen;e=e.onToggle;return React.createElement(components.Button,{isTertiary:!0,onClick:e},date.date(o,l,void 0))},renderContent:function(){return React.createElement(components.DateTimePicker,{currentDate:getTime(l),onChange:function(e){r({target:{type:"date",name:t,value:getTime(e,!0)}})},is12Hour:i})}})},Date=withLabel(DateControl);function ownKeys$5(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$5(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$5(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$5(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Input=function(t){var n=validFieldProps(t,["is_pro","visible","trigger","disable","parentIndex","context","badge"]),e=React.useCallback(function(e){return n.onChange(e,{isPro:!!t.is_pro})},[null==n?void 0:n.value]);return"checkbox"===n.type&&null!=n&&n.name&&(n.checked=(null==n?void 0:n.checked)||(null==n?void 0:n.value)),React__default.default.createElement("input",_objectSpread$5(_objectSpread$5({},n),{},{onChange:e}))};Input.defaultProps={type:"text"};var GenericInput=React__default.default.memo(Input),Input$1=withLabel(React__default.default.memo(Input));function ownKeys$4(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$4(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$4(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$4(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Textarea=function(t){var n=validFieldProps(t,["is_pro","visible","trigger","disable","parentIndex","context"]),e=React.useCallback(function(e){return n.onChange(e,{isPro:!!t.is_pro})},[null==n?void 0:n.value]);return React__default.default.createElement("textarea",_objectSpread$4(_objectSpread$4({},n),{},{onChange:e,rows:5}))},Textarea$1=withLabel(React__default.default.memo(Textarea));function ownKeys$3(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$3(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var CodeViewer=function(t){var n=validFieldProps(t,["is_pro","visible","trigger","disable","parentIndex","context","copyOnClick"]),e={onChange:React.useCallback(function(e){return n.onChange(e,{isPro:!!t.is_pro})},[null==n?void 0:n.value]),rows:5};!t.is_pro&&null!=t&&t.copyOnClick&&null!=t&&t.value&&(e.onClick=function(){var e=null!=t&&t.success_text?t.success_text:i18n.__("Copied to Clipboard.","notificationx");copy__default.default(t.value,{format:"text/plain",onCopy:function(){t.context.alerts.toast("success",e)}})});var r=null!=t&&t.button_text?t.button_text:i18n.__("Click to Copy","notificationx");return React.createElement("span",{className:"wprf-code-viewer"},React__default.default.createElement("textarea",_objectSpread$3(_objectSpread$3({},n),e)),React.createElement(components.Button,{className:"wprf-copy-button"},r))},CodeViewer$1=withLabel(React__default.default.memo(CodeViewer)),JsonUploader=function(n){validFieldProps(n,["is_pro","visible","trigger","disable","parentIndex","context","copyOnClick"]);var e=_slicedToArray(React.useState(),2),t=e[0],r=e[1];return React.useEffect(function(){null!=n&&n.value||r(null)},[null==n?void 0:n.value]),React.createElement("span",{className:"wprf-json-uploader"},!t&&React.createElement("label",{className:"wprf-json-uploaderButton"},React.createElement("span",null,i18n.__("Upload")),React.createElement("input",{type:"file",accept:"application/JSON",onChange:function(e){var t;(t=e).target.files.length&&(0!=(null==(e=t.target.files[0])?void 0:e.size)?"application/json"==(null==e?void 0:e.type)||"text/json"==(null==e?void 0:e.type)?(r(e),(t=new FileReader).onload=function(e){var t=null==e||null===(t=e.target)||void 0===t?void 0:t.result;n.onChange({target:{type:"jsonuploader",name:n.name,value:t}})},t.readAsText(e)):n.context.alerts.toast("error",i18n.__("Invalid file type.","notificationx")):n.context.alerts.toast("error",i18n.__("File can't be empty.","notificationx")))}})),t&&(null==t?void 0:t.name)&&React.createElement("span",{className:"wpfr-json-file-name-wrapper"},React.createElement("span",{className:"wpfr-json-file-name"},20<(null==t?void 0:t.name.length)?"".concat(null==t?void 0:t.name.substr(0,9),"...").concat(null==t?void 0:t.name.substr((null==t?void 0:t.name.length)-7)):null==t?void 0:t.name),React.createElement("span",{className:"wprf-json-file-delete-button",onClick:function(){r(null),n.onChange({target:{type:"jsonuploader",name:n.name,value:null}})}},"x")))},JsonUploader$1=withLabel(React__default.default.memo(JsonUploader)),_excluded$2=["name","fields"],Group=function(n){var r=n.name,e=n.fields,a=_objectWithoutProperties(n,_excluded$2);if(!e||!isArray(e)||0===e.length)throw new Error(i18n.__("You should give a #fields arguments to a group field.","notificationx"));var o=useBuilderContext(),l=React.useCallback(function(e){e.persist&&e.persist();var t=executeChange(e),e=t.field,t=t.val;o.setFieldValue([r,e],t)},[n.value]),t=sortingFields(e);React.useEffect(function(){o.setFormField([].concat(_toConsumableArray(n.parentIndex),["fields"]),t)},[]);var i=t.map(function(e,t){t=[].concat(_toConsumableArray(n.parentIndex),["fields",t]);return React.createElement(GenericField,_extends$1({},a,{key:e.name,index:n.index,onChange:l},e,{parenttype:"group",parent:r,parentIndex:t}))}),e=classNames__default.default("wprf-group-control-inner",{"wprf-display-inline":"inline"===(null==n?void 0:n.display)});return React.createElement("div",{className:"wprf-group-control"},React.createElement("div",{className:e},i))},Group$1=withLabel(Group),Select=function(a){var o=useBuilderContext(),e=a.id,t=a.name,n=a.multiple,r=a.placeholder,l=a.search,i=void 0!==l&&l,c=a.onChange,u=a.parentIndex,s=useOptions(a,"options"),d=s.options,p=s.selectedOption,f=s.setData,l=_slicedToArray(React.useState(null),2),v=l[0],m=l[1],s=_slicedToArray(React.useState(!1),2),l=s[0],b=s[1],s=_slicedToArray(React.useState(!1),2),y=s[0];s[1];function g(){var e;if(null!=a&&a.ajax&&when(null==a||null===(e=a.ajax)||void 0===e?void 0:e.rules,o.values)){b(!0);var r={};if(Object.keys(null==a?void 0:a.ajax.data).map(function(e){var t,n;-1<(null==a?void 0:a.ajax.data[e].indexOf("@"))?(n=null==a?void 0:a.ajax.data[e].substr(1),r[e]=null===(t=o.values)||void 0===t?void 0:t[n]):r[e]=null==a?void 0:a.ajax.data[e]}),!y)return wpFetch({path:null==a?void 0:a.ajax.api,data:r}).then(function(e){b(!1);var t=merge(a.options,e,"value");return o.setFormField([].concat(_toConsumableArray(u),["options"]),t),f({options:t,parentIndex:[].concat(_toConsumableArray(u),["options"])}),e})}}return React.useEffect(function(){!isArray(v)&&isObject(v)&&c({target:{type:"select",name:t,value:v.value,options:d,multiple:n}}),isArray(v)&&c({target:{type:"select",name:t,value:v.map(function(e){return e.value}),options:d,multiple:n}})},[v]),React.useEffect(function(){g()},[]),React.useEffect(function(){null!=a&&a.menuOpen&&g()},[null==a?void 0:a.menuOpen]),React.createElement("div",{className:"wprf-select-wrapper"},React.createElement(ReactSelect__default.default,{isDisabled:null==a?void 0:a.disable,classNamePrefix:"wprf-select",isSearchable:null!=i&&i,id:e,name:t,isMulti:null!=n&&n,placeholder:r,isLoading:l,options:d,value:p,onMenuOpen:g,onMenuClose:function(){b(!1)},isOptionDisabled:function(e){return null==e?void 0:e.disabled},onChange:function(e){return m(e)}}))},Select$1=withLabel(Select);const instanceMap=new WeakMap;function createId(e){var t=instanceMap.get(e)||0;return instanceMap.set(e,t+1),t}function useInstanceId(t,n){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return React.useMemo(()=>{if(r)return r;var e=createId(t);return n?n+"-"+e:e},[t])}var RepeaterField=function e(t){var n=t.fields,r=t.onChange,a=t.index,o=t.parent,l=_slicedToArray(React.useState(t.isOpen),2),i=l[0],c=l[1],u=useInstanceId(e);return React.createElement("div",{className:"wprf-repeater-field"},React.createElement("div",{className:"wprf-repeater-field-title",onClick:function(){return c(!i)}},React.createElement("h4",null,"#ID: ",t.index),React.createElement("div",{className:"wprf-repeater-field-controls"},React.createElement(components.Icon,{onClick:function(){return t.clone(t.index)},icon:"admin-page"}),React.createElement(components.Icon,{onClick:function(){return t.remove(t.index)},icon:"trash"}))),i&&React.createElement("div",{className:"wprf-repeater-inner-field"},n.map(function(e,t){return React.createElement(GenericField,_extends$1({key:"field-".concat(a,"-").concat(t)},e,{id:"field-".concat(u,"-").concat(a,"-").concat(t),index:a,parenttype:"repeater",parent:o,onChange:function(e){return r(e,a)}}))})))};function ownKeys$2(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$2(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var GenericToggle=function(t){var e,n,r=_objectSpread$2({type:"",label:{position:"right"},column:4},t.style),a=React.useMemo(function(){var e=!1;return null!=t&&t.checked&&isObject(t.checked)&&isString(null==t?void 0:t.value)?e=t.checked[t.value]:isString(t.value)||(e=t.value),e},[null==t?void 0:t.checked,t.value]),o=classNames__default.default("wprf-toggle-wrap",(_defineProperty(o={},"wprf-".concat(null==r?void 0:r.type),0<(null==r?void 0:r.type.length)),_defineProperty(o,"wprf-checked",Boolean(a)),_defineProperty(o,"wprf-label-position-".concat(null==r||null===(e=r.label)||void 0===e?void 0:e.position),null==r||null===(n=r.label)||void 0===n?void 0:n.position),o),null==t?void 0:t.classes);return React.createElement("div",{className:o},React.createElement(GenericInput,_objectSpread$2(_objectSpread$2({},t),{},{type:"checkbox",placeholder:void 0})),React.createElement(Label,{htmlFor:t.id}))},GenericToggle$1=withLabel(GenericToggle),ModalContent=function(n){var e=n.isLoading;n.closeModal;var t=_slicedToArray(React.useState([]),2),r=t[0],a=t[1];return React.useEffect(function(){var e=sortingFields(n.body.fields).map(function(e,t){t=[].concat(_toConsumableArray(n.parentIndex),["fields",t]);return React.createElement(Field$1,_extends$1({key:e.name},e,{parentIndex:t}))});a(e)},[]),React.createElement("div",{className:"wprf-modal-body"},e&&React.createElement(Loading,null),!e&&React.createElement(React.Fragment,null,React.createElement("div",{className:"wprf-modal-content"},0<r.length&&r),React.createElement("div",{className:"wprf-modal-footer clearfix"},React.createElement("div",{className:"wprf-modal-footer-left"},(null===(r=n.body)||void 0===r?void 0:r.footer)&&isString(n.body.footer)&&React.createElement("p",null,n.body.footer),React.createElement(GenericField,_extends$1({type:"button"},null==n?void 0:n.confirm_button))))))},ModalHeader=function(e){e=e.content;return React.createElement("div",{className:"wprf-modal-header"},e&&isString(e)&&React.createElement("h3",null,e))},Loading=function(e){return React.createElement("p",null,i18n.__("Loading...","notificationx"))},toolbarOptions={options:["inline","blockType","textAlign","colorPicker","link"],inline:{options:["bold","italic","underline","strikethrough","monospace"]},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"],className:void 0,component:void 0,dropdownClassName:void 0}};function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ownKeys$1(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$1(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Toggle=function(t){var e=t.options,r=t.value,n=t.multiple,a=t.style,o=sortingFields(e),l=_objectSpread$1({column:4},a);if(n){var n=_slicedToArray(React.useState({}),2),i=n[0],c=n[1],u=function(e){var t=e.target||e.currentTarget;c(function(e){return _objectSpread$1(_objectSpread$1({},e),{},_defineProperty({},t.value,t.checked))})};return React.useEffect(function(){t.onChange({target:{type:"toggle",name:t.name,value:i}})},[i]),React.useEffect(function(){if(isObject(r))c(r);else{var e,t={},n=_createForOfIteratorHelper(o);try{for(n.s();!(e=n.n()).done;)t[e.value.value]=r}catch(e){n.e(e)}finally{n.f()}c(t)}},[]),React.createElement("div",{className:"wprf-toggle-wrapper wprf-control"},React.createElement(Row,null,o.map(function(e){return React.createElement(Column,{key:e.value,column:l.column},React.createElement(GenericToggle$1,_objectSpread$1(_objectSpread$1({},e),{},{context:null==t?void 0:t.context,id:e.value,checked:null!=i&&i[e.value]?r:!(null==i||!i[e.value]),type:"checkbox",onChange:u,style:l})))})))}return React.createElement(GenericToggle$1,t)},_excluded$1=["label","value","icon","is_pro"];function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var RadioCard=function e(t){var l=useBuilderContext(),n=useOptions(t,"options"),r=n.options,i=n.option;if(!r)throw new Error(i18n.__("#options is a required arguments for RadioCard field.","notificationx"));var c=useInstanceId(e),n=classNames__default.default(["wprf-control","wprf-radio-card","wprf-input-radio-set-wrap",null==t?void 0:t.className]),u=_objectSpread({},null==t?void 0:t.style),s=validFieldProps(t,["options","placeholder","style","trigger"]);return React.useEffect(function(){i&&t.onChange({target:{type:"radio-card",name:t.name,value:i}})},[i]),React.createElement("div",{className:n},React.createElement(Row,null,r.map(function(e,t){var n=e.label,r=e.value,a=e.icon,o=e.is_pro,e=_objectWithoutProperties(e,_excluded$1);return React.createElement(Column,{column:+(null==e?void 0:e.column)||4,key:t},React.createElement("div",{className:classNames__default.default("wprf-input-radio-option",{"wprf-option-has-image":null!=a&&a,"wprf-option-selected":r==i})},React.createElement(Label,{className:classNames__default.default(_defineProperty({"wprf-label-has-image":null!=a&&a},"wprf-size-".concat(u.size),null!==(e=a&&(null==u?void 0:u.size))&&void 0!==e&&e)),htmlFor:"wprf-input-radio-".concat(c,"-").concat(t),src:a,badge:{label:o?"Pro":"Free",value:o,active:Boolean(l.is_pro_active)}},n),React.createElement(GenericInput,_extends$1({},s,{is_pro:o,type:"radio",value:r,checked:r===i,id:"wprf-input-radio-".concat(c,"-").concat(t)}))))})))},Radio=withLabel(RadioCard),Section=function(n){var t=useBuilderContext(),e=_slicedToArray(React.useState(null!==(o=n.collapsed)&&void 0!==o&&o),2),r=e[0],a=e[1],o=_slicedToArray(React.useState([]),2),e=o[0],l=o[1];React.useEffect(function(){var e=sortingFields(n.fields);t.setFormField([].concat(_toConsumableArray(n.parentIndex),["fields"]),e);e=e.map(function(e,t){t=[].concat(_toConsumableArray(n.parentIndex),["fields",t]);return React.createElement(Field$1,_extends$1({key:e.name},e,{parentIndex:t}))});l(e)},[]);o=classNames__default.default("wprf-control-section",null==n?void 0:n.classes,null==n?void 0:n.name,{"wprf-section-collapsed":(null==n?void 0:n.collapsible)&&r});return React.createElement("div",{id:null==n?void 0:n.name,className:o},n.placeholder&&React.createElement("div",{className:"wprf-section-title"},React.createElement("h4",null,n.placeholder),n.collapsible&&React.createElement("button",{onClick:function(){return a(!r)}},"Icon")),React.createElement("div",{className:"wprf-section-fields"},e))},Section$1=React__default.default.memo(Section),Repeater=function(e){var r=e.name;e.value;var t=e.button,n=e.fields,a=useBuilderContext(),e=_slicedToArray(React.useState(null===(e=a.values)||void 0===e?void 0:e[r]),2),o=e[0],l=e[1];React.useEffect(function(){var e;null!=(null===(e=a.values)||void 0===e?void 0:e[r])&&l(null===(e=a.values)||void 0===e?void 0:e[r])},[null===(e=a.values)||void 0===e?void 0:e[r]]);var i=React.useCallback(function(e){var t=_toConsumableArray(o);t.splice(e,1),a.setFieldValue(r,t)},[o]),c=React.useCallback(function(e){var t=_toConsumableArray(o);0<t.length&&(e=(null==t?void 0:t[e])||{},a.setFieldValue([r,o.length],e))},[o]);return React.useEffect(function(){null==o&&l([{}])},[]),React.createElement("div",{className:"wprf-repeater-control"},React.createElement("div",{className:"wprf-repeater-content"},o&&0<(null==o?void 0:o.length)&&o.map(function(e,t){return React.createElement(RepeaterField,{isOpen:!0,key:t,fields:n,index:t,parent:r,clone:c,remove:i,onChange:function(e){return function(e,t){e.persist&&e.persist();var n=executeChange(e),e=n.field,n=n.val;a.setFieldValue([r,t,e],n)}(e,t)}})})),React.createElement("div",{className:"wprf-repeater-label"},React.createElement("button",{className:"wprf-repeater-button",onClick:function(){return a.setFieldValue(r,[].concat(_toConsumableArray(o),[{}]))}},null==t?void 0:t.label)))},Slider=function(t){var n=t.name,e=t.id,r=t.label,a=t.units,o=t.value,l=t.min,i=t.max,c=t.unit;t.tooltip;var u=t.reset,o=_slicedToArray(React.useState(o||0),2),s=o[0],d=o[1],c=_slicedToArray(React.useState(c),2),p=c[0],f=c[1];return React.useEffect(function(){var e;s&&(isNumber(s)?e=p?"".concat(s).concat(p):"".concat(s):isString(s)&&(e=-1<s.indexOf(p)?"".concat(s):"".concat(s).concat(p)),t.onChange({target:{type:"slider",name:n,value:e}}))},[s,p]),React.createElement("div",{className:"wprf-slider-wrap"},React.createElement("div",{className:"wprf-slider-control-head"},React.createElement(Label,{htmlFor:e||n},r),isArray(a)&&0<a.length&&React.createElement("div",{className:"wprf-slider-units"},a.map(function(e,t){return React.createElement(components.Button,{key:t,isSmall:!0,isPrimary:!0,onClick:function(){return f(e)},className:e==p?"unit-active":""},e)}))),React.createElement("div",{className:"wprf-slider-control"},React.createElement(components.RangeControl,{allowReset:null==u||u,value:parseInt(s),min:l,max:i,onChange:function(e){return d(e)}})))},ColorPicker=function(e){var t=e.value,n=e.name,r=e.id,a=e.onChange,e=_slicedToArray(React.useState(!1),2),o=e[0],l=e[1],e=_slicedToArray(React.useState(t||null),2),i=e[0],c=e[1],e=_slicedToArray(React.useState(null),2),u=e[0],s=e[1],e=React.useRef(null);React.useEffect(function(){s(t)},[]);var d;return React.useEffect(function(){a({target:{type:"colorpicker",name:n,value:i}})},[i]),d=e,React.useEffect(function(){function e(e){d.current&&!d.current.contains(e.target)&&l(!1)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[d]),React.createElement(React.Fragment,null,React.createElement("div",{className:"wprf-colorpicker-wrap",ref:e},React.createElement("input",{type:"hidden",value:t,name:n,id:r}),React.createElement("span",{className:"wprf-picker-display",style:{backgroundColor:t,borderColor:t},onClick:function(){return l(!o)}}),o&&React.createElement(React.Fragment,null,React.createElement("button",{className:"wprf-colorpicker-reset",onClick:function(e){e.preventDefault(),c(u),l(!1)}},i18n.__("Reset","notificationx")),React.createElement(components.ColorPicker,{color:t,onChangeComplete:function(e){return c(e.hex)}}))))},ColorPicker$1=withLabel(ColorPicker),Action=function(e){return React.createElement(React.Fragment,null,hooks.applyFilters(e.action,"",e))},Media=function(t){var e=_slicedToArray(React.useState(null!==(e=t.value)&&void 0!==e&&e.url?t.value:null),2),n=e[0],r=e[1];return React.useEffect(function(){t.onChange({target:{type:"media",name:t.name,value:n}})},[n]),React.createElement("div",{className:"wprf-control wprf-media"},null!=n&&!(null!=t&&t.notImage)&&React.createElement("div",{className:"wprf-image-preview"},null!=n&&(null==n?void 0:n.url)&&React.createElement("img",{src:n.url,alt:n.title})),React.createElement("div",{className:"wprf-image-uploader"},React.createElement(mediaUtils.MediaUpload,{onSelect:function(e){r({id:e.id,title:e.title,url:e.url})},multiple:!1,allowedTypes:["image"],value:n,render:function(e){e=e.open;return React.createElement(React.Fragment,null,null!=n&&React.createElement("button",{className:"wprf-btn wprf-image-remove-btn",onClick:function(){return r(null)}},(null==t?void 0:t.remove)||"Remove"),React.createElement("button",{className:"wprf-btn wprf-image-upload-btn",onClick:e},null!=n?(null==t?void 0:t.reset)||"Change Image":(null==t?void 0:t.button)||"Upload"))}})))},Media$1=withLabel(Media),Editor=function(n){var e=_slicedToArray(React.useState(draftJs.EditorState.createEmpty()),2),t=e[0],r=e[1];return React.useEffect(function(){var e,t;n.value&&(e=(t=htmlToDraft__default.default(n.value)).contentBlocks,t=t.entityMap,t=draftJs.ContentState.createFromBlockArray(e,t),t=draftJs.EditorState.createWithContent(t),r(t))},[]),React.useEffect(function(){var e=draftToHtml__default.default(draftJs.convertToRaw(t.getCurrentContent()));n.onChange({target:{type:"editor",value:e,name:n.name}})},[t]),React.createElement(reactDraftWysiwyg.Editor,{placeholder:null==n?void 0:n.placeholder,toolbar:toolbarOptions,editorState:t,toolbarClassName:"wprf-editor-toolbar",wrapperClassName:"wprf-editor wprf-control",editorClassName:"wprf-editor-main",onEditorStateChange:r})},Editor$1=withLabel(Editor),Button=function(a){var e,t,n;if((null==a||!a.text)&&!0!==(null==a?void 0:a.group))throw new Error(i18n.__("Button has a required params #text.","notificationx"));var r=validFieldProps(a,["is_pro","visible","disable","parentIndex","context","onBlur","value","ajax","text"]),o=_slicedToArray(React.useState(!1),2),l=o[0],i=o[1];if(null!=a&&a.href)return React.createElement("a",{href:-1===(null==a?void 0:a.href)?null==a?void 0:a.value:null==a?void 0:a.href,target:null==a?void 0:a.target,className:classNames__default.default("wprf-control wprf-button wprf-href-btn",null==a?void 0:a.classes)},null==a?void 0:a.text);if(null!=a&&a.group){o=a.fields.map(function(e,t){t=[].concat(_toConsumableArray(a.parentIndex),["fields",t]);return React.createElement(Field$1,_extends$1({key:e.name},e,{parentIndex:t}))});return React.createElement("div",{className:"wprf-control wprf-button-group wprf-flex"},o)}return React.createElement(React.Fragment,null,React.createElement("button",_extends$1({},r,{name:a.name,disabled:l,onClick:null!==(r=null==a?void 0:a.onClick)&&void 0!==r?r:function(e){null!=a&&a.ajax&&(i(!0),hitAAJX(a.ajax,a.context).then(function(e){var t,n,r;if(i(!1),"error"==(null==e?void 0:e.status))throw new Error(null==e?void 0:e.message);a.onChange({target:{type:"button",name:a.name,value:!0}}),null!==(e=a.ajax)&&void 0!==e&&e.hideSwal||(e=(null===(e=a.ajax)||void 0===e||null===(t=e.swal)||void 0===t?void 0:t.icon)||"success",r=(null===(t=a.ajax)||void 0===t||null===(r=t.swal)||void 0===r?void 0:r.text)||"Complete",a.context.alerts.toast(e,r,{autoClose:null===(r=a.ajax)||void 0===r||null===(n=r.swal)||void 0===n?void 0:n.autoClose})),null!==(n=a.ajax)&&void 0!==n&&n.reload&&setTimeout(function(){return window.location.reload()},1e3)}).catch(function(e){var t;console.error("Error In Button Called",a.name,e),i(!1),a.onChange({target:{type:"button",name:a.name,value:!1}}),null!==(t=a.ajax)&&void 0!==t&&t.hideSwal||a.context.alerts.toast("error",(null==e?void 0:e.message)||i18n.__("Something went wrong.","notificationx"))})),useTrigger(a)},className:classNames__default.default("wprf-control wprf-button wprf-btn",null==a?void 0:a.classes)}),isObject(null==a?void 0:a.text)&&null!=a&&a.ajax?l?null==a||null===(e=a.text)||void 0===e?void 0:e.loading:a.value?null==a||null===(t=a.text)||void 0===t?void 0:t.saved:null==a||null===(n=a.text)||void 0===n?void 0:n.normal:null==a?void 0:a.text))},Button$1=withLabel(Button),eligibleMessage=function(e){if(null!=e&&e.messages)for(var t in e.messages){t=e.messages[t];if(when(t.rules,e.context.values))return t}return{message:null==e?void 0:e.message,html:null==e?void 0:e.html,type:"normal"}},Message=function(e){var t=eligibleMessage(e),n=t.html,r=t.message,t=t.type;return r?React.createElement("div",{className:classNames__default.default("wprf-control","wprf-message","wprf-".concat(void 0===t?"warning":t,"-message"),"wprf-".concat(e.name,"-message"),null==e?void 0:e.classes)},n&&React.createElement("p",{dangerouslySetInnerHTML:{__html:r}}),!n&&React.createElement("p",null,r)):React.createElement(React.Fragment,null)},Modal=function(t){var e;if(null==(null==t?void 0:t.body)||null==(null==t?void 0:t.button))throw new Error(i18n.__("Modal needs button/body with it.","notificationx"));var n=_slicedToArray(React.useState(!1),2),r=n[0],a=n[1],o=_slicedToArray(React.useState(!1),2),n=o[0];o[1];function l(){return a(!1)}o=React.useCallback(function(){},[]);return React.createElement("div",{className:"wprf-control wprf-modal",id:"wprf-modal-".concat(t.name)},React.createElement(GenericField,_extends$1({type:"button"},null==t?void 0:t.button,{onClick:function(){return a(!0)}})),r&&React.createElement(SweetAlert__default.default,{customClass:"wprf-modal-inner",style:{maxWidth:"900px",width:"100%",overflowY:"scroll",margin:"50px auto"},closeBtnStyle:{top:"5px",right:"5px",color:"#f78c8c",fontSize:"18px",border:"1px solid #f78c8c",borderRadius:"50%",width:"30px",height:"30px",display:"inline-flex",alignItems:"center",justifyContent:"center"},title:React.createElement(ModalHeader,{content:null==t||null===(e=t.body)||void 0===e?void 0:e.header}),onConfirm:o,showConfirm:!1,showCloseButton:!0,closeOnClickOutside:!0,onCancel:l,afterUpdate:function(){var e;null!=t&&t.cancel&&null!==(e=t.context.values)&&void 0!==e&&e[t.cancel]&&l()}},React.createElement(ModalContent,_extends$1({},t,{isLoading:n,closeModal:l,context:t.context,onConfirm:o}))))},InnerContent=function(e){var t=e.fields,r=e.parentIndex,n=e.context,a=_slicedToArray(React.useState([]),2),o=a[0],l=a[1],e=_slicedToArray(React.useState([]),2),a=e[0],i=e[1];return React.useEffect(function(){var e=sortingFields(t);n.setFormField([r,"fields"],e),l(e)},[]),React.useEffect(function(){var e;isArray(o)&&0<o.length&&(e=o.map(function(e,t){var n=[r,"fields",t];return"section"===e.type?React.createElement(GenericField,_extends$1({key:"input-".concat(e.name,"-").concat(t)},e,{parentIndex:n})):React.createElement(Field$1,_extends$1({key:"input-".concat(e.name,"-").concat(t)},e,{parentIndex:n}))}),i(e))},[o]),React.createElement(React.Fragment,null,a)},Submit=function(e){var t=_extends$1({},e),n=useBuilderContext(),e=(null==t?void 0:t.label)||i18n.__("Save Changes","notificationx"),t=React.useCallback(function(e){var t;null!==(t=n.submit)&&void 0!==t&&t.onSubmit&&n.submit.onSubmit(e,n)},[n]);return React.createElement("div",{className:"wprf-submit wprf-control"},React.createElement(components.Button,{className:"wprf-submit-button",onClick:t},e))},SteppedButton=function(r){var e=_slicedToArray(React.useState(void 0),2),a=e[0],n=e[1],e=_slicedToArray(React.useState(void 0),2),o=e[0],l=e[1],i=useBuilderContext();return React.useEffect(function(){var e=r.tabs.map(function(e){return e.id}),t=e.findIndex(function(e){return e===i.config.active});-1!=t&&l(e[t-1]),t<=e.length&&n(e[t+1])},[i.config.active,r.tabs]),React.createElement("div",{className:"wprf-stepped-button"},Object.keys(r.config.buttons).map(function(e,t){var n;return React.createElement(React__default.default.Fragment,{key:"button_".concat(e,"_").concat(t)},("next"===e&&void 0!==a||"prev"===e&&void 0!==o)&&React.createElement(components.Button,{className:"wprf-btn wprf-step-btn-".concat(e),onClick:function(){return i.setActiveTab("next"===e?a:o)}},r.config.buttons[e]),null==a&&(null===(t=r.config.buttons)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.type)&&React.createElement(Field$1,null===(n=r.config.buttons)||void 0===n?void 0:n[e]))}))},SteppedButton$1=React__default.default.memo(SteppedButton),_excluded=["tabs","active","submit","config"],Content=function(e){var t,n,r,a,o,l=e.tabs,i=e.active,c=e.submit,u=e.config,s=_objectWithoutProperties(e,_excluded);if(void 0===l)throw new Error(i18n.__("There are no #tabs args defined in props.","notificationx"));var d=useBuilderContext();if(!isArray(l))throw new Error(i18n.__("Not an array.","notificationx"));var p=_slicedToArray(React.useState([]),2),e=p[0],f=p[1];return React.useEffect(function(){var e=l.filter(function(e){return isVisible(null==d?void 0:d.values,e)});f(e)},[l,null==d||null===(t=d.values)||void 0===t?void 0:t.source]),React.createElement("div",{className:classNames__default.default("wprf-tab-content-wrapper",null==d||null===(n=d.values)||void 0===n?void 0:n.source,null==d||null===(r=d.values)||void 0===r?void 0:r.themes)},React.createElement("div",{className:"wprf-tab-flex"},React.createElement("div",{className:"wprf-tab-contents"},l.map(function(e,t){if(!isVisible(null==d?void 0:d.values,e))return"";var n=classNames__default.default("wprf-tab-content","wprf-tab-".concat(null==e?void 0:e.id),{"wprf-active":i===e.id});return React.createElement("div",{id:null==e?void 0:e.id,className:n,key:null==e?void 0:e.id},(null==e?void 0:e.label)&&(null===(n=null==u?void 0:u.title)||void 0===n||n)&&React.createElement("h4",null,e.label),React.createElement(InnerContent,{context:d,fields:null==e?void 0:e.fields,parentIndex:t}))})),hooks.applyFilters("wprf_tab_content","",s)),(null==u||null===(a=u.step)||void 0===a?void 0:a.show)&&React.createElement(SteppedButton$1,{tabs:e,config:null!==(o=u.step)&&void 0!==o?o:{}}),(null===(o=null==c?void 0:c.show)||void 0===o||o)&&(null==c||!c.rules||when(null==c?void 0:c.rules,{config:u}))&&React.createElement(Submit,c))},Tab=function(e){var t=useBuilderContext(),n=_slicedToArray(React.useState(e.config.active),2),r=n[0],a=n[1];return React.useEffect(function(){a(t.config.active)},[t.config.active]),React.useEffect(function(){t.setActiveTab(r)},[r]),React.createElement(React.Fragment,null,React.createElement(Menu,{active:r,setActive:function(e){return a(e)},tabs:t.tabs,config:e.config,context:t}),React.createElement(Content,_extends$1({},e,{tabs:t.tabs,active:r,submit:null==e?void 0:e.submit,config:e.config})))};data.registerStore("formbuilder",store);var FormBuilder=function(e){var t=classNames__default.default("wp-react-form wprf-tabs-wrapper",null==e?void 0:e.className,{"wprf-tab-menu-as-sidebar":null===(t=e.config)||void 0===t?void 0:t.sidebar});return React.createElement("div",{className:t},React.createElement(Tab,e))};exports.Action=Action,exports.BuilderConsumer=BuilderConsumer,exports.BuilderProvider=BuilderProvider,exports.Button=Button$1,exports.CodeViewer=CodeViewer$1,exports.ColorPicker=ColorPicker$1,exports.Column=Column,exports.Date=Date,exports.Editor=Editor$1,exports.Field=Field$1,exports.FormBuilder=FormBuilder,exports.GenericField=GenericField,exports.GenericInput=GenericInput,exports.Group=Group$1,exports.Image=Image,exports.Input=Input$1,exports.JsonUploader=JsonUploader$1,exports.Label=Label,exports.Media=Media$1,exports.Message=Message,exports.Modal=Modal,exports.ObjectFilter=ObjectFilter,exports.Radio=Radio,exports.Repeater=Repeater,exports.Row=Row,exports.Section=Section$1,exports.Select=Select$1,exports.Slider=Slider,exports.SweetAlert=SweetAlert,exports.Textarea=Textarea$1,exports.Toggle=Toggle,exports._extends=_extends,exports.builderReducer=builderReducer,exports.executeChange=executeChange,exports.getIn=getIn,exports.getSelectedValues=getSelectedValues,exports.getStoreData=getStoreData,exports.getTime=getTime,exports.hitAAJX=hitAAJX,exports.isArray=isArray,exports.isEmptyObj=isEmptyObj,exports.isExists=isExists,exports.isFunction=isFunction,exports.isNumber=isNumber,exports.isObject=isObject,exports.isString=isString,exports.isVisible=isVisible,exports.merge=merge,exports.objectWithoutPropertiesLoose=objectWithoutPropertiesLoose,exports.processAjaxData=processAjaxData,exports.setIn=setIn,exports.setStoreData=setStoreData,exports.sortingFields=sortingFields,exports.triggerDefaults=triggerDefaults,exports.useBuilder=useBuilder,exports.useBuilderContext=useBuilderContext,exports.useDefaults=useDefaults,exports.validFieldProps=validFieldProps,exports.when=when,exports.withLabel=withLabel,exports.withProps=withProps,exports.withState=withState,exports.wpFetch=wpFetch;
