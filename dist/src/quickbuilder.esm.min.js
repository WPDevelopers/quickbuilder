import React,{useState,useEffect,createElement,useContext,createContext,useRef,useReducer,useCallback,useLayoutEffect,Fragment,useMemo}from"react";import classNames from"classnames";import{select,dispatch,registerStore}from"@wordpress/data";import{toPath,clone as clone$1}from"lodash-es";import apiFetch from"@wordpress/api-fetch";import{__experimentalGetSettings,date}from"@wordpress/date";import moment from"moment";import intersect from"intersect";import{__,sprintf}from"@wordpress/i18n";import"lodash";import{applyFilters}from"@wordpress/hooks";import Swal from"sweetalert2";import{Dropdown,Button as Button$2,DateTimePicker,Icon,RangeControl,ColorPicker as ColorPicker$2}from"@wordpress/components";import copy from"copy-to-clipboard";import ReactSelect from"react-select";import{MediaUpload}from"@wordpress/media-utils";import{Editor as Editor$2}from"react-draft-wysiwyg";import{EditorState,ContentState,convertToRaw}from"draft-js";import draftToHtml from"draftjs-to-html";import htmlToDraft from"html-to-draftjs";import SweetAlert$1 from"react-bootstrap-sweetalert";function _defineProperty$1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _arrayLikeToArray$2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$2(e)}function _iterableToArray$1(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray$2(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$2(e,t):void 0}}function _nonIterableSpread$1(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$2(e)||_nonIterableSpread$1()}function ownKeys$d(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$d(Object(n),!0).forEach(function(e){_defineProperty$1(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$d(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var wpFetch=function(e){e=_objectSpread$c(_objectSpread$c({},e),{},{method:"POST"});return apiFetch(e)},isString=function(e){return null!==e&&"string"==typeof e},isNumber=function(e){return null!==e&&"number"==typeof e},isInteger=function(e){return String(Math.floor(Number(e)))===e},isFunction=function(e){return null!==e&&"function"==typeof e},isArray=function(e){return null!==e&&"object"===_typeof$2(e)&&Array.isArray(e)},isObject=function(e){return null!==e&&"object"===_typeof$2(e)&&!isArray(e)},isVisible=function(e,t){if(null==t||!t.rules||null==t.name)return!0;e=when(t.rules,e);return Boolean(e)},withState=function(e){return Boolean(["group","section"].includes(e))},isEmptyObj=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},getIn=function(e,t,n,r){void 0===r&&(r=0);for(var o=toPath(t);e&&r<o.length;)e=e[o[r++]];return void 0===e?n:e},sortingFields=function(e){return[].concat(e).sort(function(e,t){return null==e.priority||null==t.priority?0:e.priority>t.priority?1:-1})},getSelectedValues=function(e){return Array.from(e).filter(function(e){return e.selected}).map(function(e){return e.value})},executeChange=function(e,t){var n,r,o,l,a=t,i=e;return isString(e)||(e.persist&&e.persist(),r=(n=e.target||e.currentTarget).type,o=n.name,l=n.value,e=n.checked,n.multiple,a=t||o,i=/number|range/.test(r)?(o=parseFloat(l),isNaN(o)?"":o):/checkbox/.test(r)?e:l),{field:a,val:i}},objectWithoutPropertiesLoose=function(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),l=0;l<o.length;l++)n=o[l],0<=t.indexOf(n)||(r[n]=e[n]);return r},setIn=function(e,t,n){for(var r=clone$1(e),o=r,l=0,a=toPath(t);l<a.length-1;l++){var i=a[l],s=getIn(e,a.slice(0,l+1));o=s&&(isObject(s)||Array.isArray(s))?o[i]=clone$1(s):(s=a[l+1],o[i]=isInteger(s)&&0<=Number(s)?[]:{})}return(0===l?e:o)[a[l]]===n?e:(void 0===n?delete o[a[l]]:o[a[l]]=n,0===l&&void 0===n&&delete r[a[l]],r)},validFieldProps=function(e){var t=e.type,n=["validation_rules","default","rules","meta","switch"].concat(_toConsumableArray$1(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]));"select"!==t&&"radio-card"!==t&&"toggle"!==t&&e.multiple&&n.push("options"),"group"!==t&&"repeater"!==t&&"section"!==t&&"button"!==t&&n.push("fields");n=objectWithoutPropertiesLoose(e,n);return null==e||!e.label||null!=e&&e.placeholder||(n.placeholder=e.label),n},hitAAJX=function(l){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!==a&&l){var e=!0;if(e=null!=l&&l.rules?when(null==l?void 0:l.rules,a.values):e){var r={};return Object.keys(l.data).map(function(e){var t,n;-1<(null===(n=(t=l.data[e]).indexOf)||void 0===n?void 0:n.call(t,"@"))?(n=l.data[e].substr(1),r[e]=null===(t=a.values)||void 0===t?void 0:t[n]):r[e]=l.data[e]}),wpFetch({path:l.api,data:r}).then(function(e){var t;"success"==(null==e?void 0:e.status)&&null!=e&&e.redirect&&(window.location=null==e?void 0:e.redirect);var n,r,o=null!=e&&null!==(t=e.data)&&void 0!==t&&t.context?e.data.context:!(null==e||!e.context)&&e.context;return o&&isObject(o)&&Object.keys(o).map(function(e){a.setFieldValue(e,o[e])}),null!=e&&null!==(n=e.data)&&void 0!==n&&n.download&&downloadFile({data:JSON.stringify(e.data.download),fileName:(null==e||null===(r=e.data)||void 0===r?void 0:r.filename)||"export.json",fileType:"text/json"}),null!=l&&l.trigger&&isString(null==l?void 0:l.trigger)&&(n=l.trigger.indexOf("@"),r=l.trigger.indexOf(":"),0===n&&0<r&&(n=l.trigger.substr(1,r-1),"true"==(r=l.trigger.substr(r+1))?r=!0:"false"==r&&(r=!1),a.setFieldValue(n,r))),e})}}return Promise.reject(!1)},getTime=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=__experimentalGetSettings();return moment.utc(e||void 0).utcOffset(+(null==r||null===(t=r.timezone)||void 0===t?void 0:t.offset),n)},merge=function(e,t,n){var r=_toConsumableArray$1(e),t=t.filter(function(t){return r.findIndex(function(e){return e[n]===t[n]})<=-1});return[].concat(_toConsumableArray$1(r),_toConsumableArray$1(t))},downloadFile=function(e){var t=e.data,n=e.fileName,e=e.fileType,t=new Blob([t],{type:e}),e=document.createElement("a");e.download=n,e.href=window.URL.createObjectURL(t);t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});e.dispatchEvent(t),e.remove()},_typeof$1=function(e){return("function"!=typeof Symbol||"symbol"!==_typeof$2(Symbol.iterator))&&e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof$2(e)},get=function(e,t){var n=!(2<(arguments.length<=2?0:arguments.length-2)&&void 0!==(arguments.length<=4?void 0:arguments[4]))||arguments.length<=4?void 0:arguments[4];return String.prototype.split.call(t,/[,[\].]+?/).filter(Boolean).reduce(function(e,t){return e&&Object.hasOwnProperty.call(e,t)?e[t]:n},e)},rules={is:function(e,t,n){return get(n,e)==t},"!is":function(e,t,n){return!rules.is(e,t,n)},includes:function(e,t,n){if(!isEmptyObj(n)){n=get(n,e);if("function"!=_typeof$1(n)){if(isArray(t)&&isArray(n))return null===(e=intersect(n,t))||void 0===e?void 0:e.length;if(isArray(t)&&"string"==_typeof$1(n))return t.includes(n);if(isArray(n)&&"string"==_typeof$1(t))return n.includes(t)}}return!1},"!includes":function(e,t,n){return!rules.includes(e,t,n)},isOfType:function(e,t,n){return _typeof$1(get(n,e))===t},"!isOfType":function(e,t,n){return!rules.isOfType(e,t,n)},allOf:function(e,t,n){if(!Array.isArray(t))throw Error(__('"allOf" condition requires an array as #3 argument',"notificationx"));var r=get(n,e);return t.every(function(e){return r.includes(e)})},anyOf:function(e,t,n){if(!Array.isArray(t))throw Error(__('"anyOf" condition requires an array as #3 argument',"notificationx"));e=get(n,e);return t.includes(e)},gt:function(e,t,n){return get(n,e)>t},gte:function(e,t,n){return get(n,e)>=t},lt:function(e,t,n){return get(n,e)<t},lte:function(e,t,n){return get(n,e)<=t}},logicalRules={and:function(e){return!e.includes(!1)},or:function(e){return e.includes(!0)},not:function(e){if(1!==e.length)throw Error(__('"not" can have only one comparison rule, multiple rules given',"notificationx"));return!e[0]}},isValidCondition=function(e){return!!(Array.isArray(e)&&Array.isArray(e[1])&&e[0]&&logicalRules[e[0].toLowerCase()])},processRule=function(e,t){var n=e[0],r=e[1],e=e[2];if("string"!=typeof n||void 0===rules[n])throw Error(sprintf(__("Invalid comparison rule %s.","notificationx"),n));return rules[n](r,e,t)},processCondition=function(e,t){return logicalRules[e.toLowerCase()](t)},validate$1=function(e,n){if(!isValidCondition(e))return processRule(e,n);var t=e.slice(0,1)[0],e=e.slice(1).map(function(e,t){return(isValidCondition(e)?when:processRule)(e,n)});return processCondition(t,e)},when=function(e,t){return"function"==typeof e?Promise.resolve(e(t)):validate$1(e,t)};function ownKeys$c(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$c(Object(n),!0).forEach(function(e){_defineProperty$1(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$c(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var DEFAULT_STATE={savedValues:{type:"conversions",source:"edd"},values:{},touched:{},errors:{}},actions={setSavedValues:function(e){return{type:"SET_SAVED_VALUES",payload:e}},setFieldValue:function(e){return{type:"FIELD_VALUE",name:e.name,payload:e.value}},removeFieldValue:function(e){return{type:"REMOVE_FIELD_VALUE",payload:e}},resetFieldValue:function(e){return{type:"RESET_FIELD_VALUE",payload:e}},setFieldTouched:function(e){return{type:"FIELD_TOUCHED",payload:e}},setError:function(e){return{type:"FIELD_ERROR",payload:e}},removeError:function(e){return{type:"REMOVE_FIELD_ERROR",payload:e}}},store={reducer:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:DEFAULT_STATE,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case"SET_SAVED_VALUES":var n=_objectSpread$b({},e);return n=_objectSpread$b(_objectSpread$b({},n),{},{values:t.payload,savedValues:t.payload});case"FIELD_VALUE":var r=_objectSpread$b({},e),o=t.payload;return r=_objectSpread$b(_objectSpread$b({},r),{},{values:_objectSpread$b(_objectSpread$b({},null===r||void 0===r?void 0:r.values),o)});case"REMOVE_FIELD_VALUE":var l=_objectSpread$b({},e),o=t.payload;return null!==(r=l.values)&&void 0!==r&&r[o]&&delete l.values[o],l;case"RESET_FIELD_VALUE":var a=_objectSpread$b({},e);return null!==(l=a.values)&&void 0!==l&&l[t.payload]&&(delete a.values[t.payload],null!==(l=a.savedValues)&&void 0!==l&&l[t.payload]&&(a.values[t.payload]=a.savedValues[t.payload])),a;case"FIELD_ERROR":return _objectSpread$b(_objectSpread$b({},e),{},{errors:_objectSpread$b(_objectSpread$b({},e.errors),t.payload)});case"REMOVE_FIELD_ERROR":a=_objectSpread$b({},e);return delete a.errors[t.payload],a;case"FIELD_TOUCHED":return _objectSpread$b(_objectSpread$b({},e),{},{touched:_objectSpread$b(_objectSpread$b({},e.touched),t.payload)})}return e},actions:actions,selectors:{getValues:function(e){return e.values},getFieldValue:function(e,t){return null===(e=e.values)||void 0===e?void 0:e[t]},getSavedFieldValue:function(e,t,n){var r;return null!==n?(null===(r=e.savedValues)||void 0===r?void 0:r[n])===(null===(r=e.values)||void 0===r?void 0:r[n])&&(null===(n=e.savedValues)||void 0===n?void 0:n[t]):null===(e=e.savedValues)||void 0===e?void 0:e[t]},isTouched:function(e,t){return null===(e=e.touched)||void 0===e?void 0:e[t]},getError:function(e,t){return null===(e=e.errors)||void 0===e?void 0:e[t]},isVisible:function(e,t){if(!t.rules||null==t.name)return!0;e=when(t.rules,e.values);return Boolean(e)}}};function _extends$2(){return(_extends$2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,l=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return l}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray$2(e,t)||_nonIterableRest()}var Menu=function(e){var t;if(void 0===e.tabs)throw new Error(__("There are no tabs defined!","notificationx"));var a=e.active,i=e.setActive,n=e.tabs,s=e.config,c=e.context,r=_slicedToArray(useState([]),2),o=r[0],l=r[1];useEffect(function(){var e=n.filter(function(e){return isVisible(null==c?void 0:c.values,e)});l(e)},[n,null==c||null===(t=c.values)||void 0===t?void 0:t.source]);var u=classNames("wprf-tab-menu-wrapper",null==e?void 0:e.className,{"wprf-tab-menu-sidebar":null==s?void 0:s.sidebar},null==c||null===(u=c.values)||void 0===u?void 0:u.source),d=o.findIndex(function(e){return e.id===a});return createElement("div",{className:u},createElement("ul",{className:"wprf-tab-nav"},o.map(function(t,e){var n,r,o,l;return createElement("li",{className:classNames("wprf-tab-nav-item",(_defineProperty$1(n={},"".concat(t.classes),t.classes),_defineProperty$1(n,"wprf-active-nav",a===t.id),_defineProperty$1(n,"wprf-tab-complete",!(null==s||!s.completionTrack)&&e<=d),n)),"data-key":t.id,key:t.id,onClick:function(){var e;return(null===(e=null==s?void 0:s.clickable)||void 0===e||e)&&i(t.id)}},(null==t?void 0:t.icon)&&(isString(t.icon)&&!isObject(t.icon)?createElement("img",{src:t.icon,alt:null==t?void 0:t.label}):isObject(t.icon)?null==c||null===(r=c.icons)||void 0===r||null===(o=r[null==t||null===(o=t.icon)||void 0===o?void 0:o.type])||void 0===o?void 0:o[null==t||null===(l=t.icon)||void 0===l?void 0:l.name]:""),createElement("span",null,t.label))})))};function _objectWithoutPropertiesLoose$1(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),l=0;l<o.length;l++)n=o[l],0<=t.indexOf(n)||(r[n]=e[n]);return r}function _objectWithoutProperties$1(e,t){if(null==e)return{};var n,r=_objectWithoutPropertiesLoose$1(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),l=0;l<o.length;l++)n=o[l],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}var BuilderContext=createContext(void 0);BuilderContext.displayName="production"===process.env.NODE_ENV?"Anonymous":"BuilderContext";var BuilderProvider=BuilderContext.Provider,BuilderConsumer=BuilderContext.Consumer;function useBuilderContext(){return useContext(BuilderContext)}var useOptions=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"fields";if(null==t||!t[n])throw new Error("#options param need to set in order to use useOptions hook.");var r=t.value,o=t.multiple,l=useBuilderContext(),e=_slicedToArray(useState(t[n]),2),a=e[0],i=e[1],s=_slicedToArray(useState([]),2),c=s[0],u=s[1],e=_slicedToArray(useState({options:null,parentIndex:null}),2),d=e[0],s=e[1],e=_slicedToArray(useState(null),2),p=e[0],f=e[1],e=_slicedToArray(useState(null),2),g=e[0],m=e[1];return useEffect(function(){var e=t.ajax&&(null===(e=l.getTabFields(null==t?void 0:t.parentIndex))||void 0===e?void 0:e[n])||a;u(l.eligibleOptions(e)),f(l.eligibleOption(e,r,null!=o&&o))},[r,a]),useEffect(function(){i(t[n]),u(l.eligibleOptions(t[n]))},[t]),useEffect(function(){u(l.eligibleOptions(a))},[a]),useEffect(function(){null!=d.options&&i(d.options)},[d]),useEffect(function(){var e;null!=p&&(e=o?isArray(p)&&p.map(function(e){return e.value})||r:p.value||r,m(e))},[p]),useEffect(function(){var e,t;0===c.filter(function(e){return e.value===g}).length&&(t=sortingFields(c),m((null==t||null===(e=t[0])||void 0===e?void 0:e.value)||r))},[g,c]),{options:sortingFields(c),option:g,selectedOption:p,setOptions:u,setData:s}},useTrigger=function(e){var o=e.context;null!=e&&e.trigger&&isArray(null==e?void 0:e.trigger)&&null!=e&&e.trigger.map(function(e){var t=(null==e?void 0:e.type)||"setFieldValue";if(null!=e&&e.action&&isObject(null==e?void 0:e.action))for(var n in null==e?void 0:e.action){var r=n;-1<r.indexOf(".")&&(r=r.split("."));n=null==e?void 0:e.action[n];""!=r&&o[t](r,n)}})},useDefaults=function(e,t,n,r){if(null!=r&&null!=(null==r?void 0:r.defaults)&&!isEmptyObj(r.defaults)){var o=r.defaults;if(null!=o&&!isEmptyObj(o)){var l={};if(null!=o&&o[n]&&isString(null==o?void 0:o[n])){var a=o[n].indexOf("@"),i=o[n].indexOf(":");0===a&&0<i&&(r=o[n].substr(1,i-1),a=o[n].substr(i+1),i=t.getValueForDefault(r,e),""!=r&&""!=a&&(a="false"!==a&&a,l[r]=i||a,t.setValue(r,i||a)))}else if(null!=o&&o[n]&&(isArray(o[n])||isObject(o[n])))for(var s in o[n]){var c,u=o[n][s];u&&(isArray(u)||isObject(u))?(c=t.getValueForDefault(s,e),""!=s&&""!=u&&(u="false"!==u&&u,l[s]=c||u,t.setValue(s,c||u))):u&&(s=u.indexOf("@"),c=u.indexOf(":"),0===s&&0<c&&(s=u.substr(1,c-1),c=u.substr(c+1),-1<u.indexOf(".")&&(s=s.split(".")),u=t.getValueForDefault(s,e),""!=s&&""!=c&&(c="false"!==c&&c,l[s]=u||c,t.setValue(s,u||c))))}return{defaultsData:l}}}};function ownKeys$b(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$b(Object(n),!0).forEach(function(e){_defineProperty$1(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$b(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var SweetAlert=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Swal.fire(_objectSpread$a({target:null!==(e=null==t?void 0:t.target)&&void 0!==e?e:"#notificationx",type:null!==(e=null==t?void 0:t.type)&&void 0!==e?e:"success",html:null==t?void 0:t.html,title:null!==(e=null==t?void 0:t.title)&&void 0!==e?e:__("Title Goes Here: title","notificationx"),text:null!==(e=null==t?void 0:t.text)&&void 0!==e?e:__("Test Goes Here: text","notificationx"),icon:null!==(e=null==t?void 0:t.icon)&&void 0!==e?e:(null==t?void 0:t.type)||"success",timer:null!==(e=null==t?void 0:t.timer)&&void 0!==e?e:null},t))},ObjectFilter=function(t,n){var e=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(!t)return!1;var r={},o=Object.keys(t).filter(function(e){return n(e)});return e?o:(o.map(function(e){r[e]=t[e]}),r)},isExists=function(e,t){var n=_typeof$2(e);switch(!0){case"object"===n&&isArray(e):return e.includes(t);case"object"===n&&!isArray(e):return void 0!==(null==e?void 0:e[t]);default:return e===t}},triggerDefaults=function(e,t){var n,r,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!isEmptyObj(e)&&"object"===_typeof$2(e))for(var l in e)l===o&&(n=e[l].indexOf("@"),r=e[l].indexOf(":"),0===n&&0<r&&(n=e[l].substr(1,r-1),l=e[l].substr(r+1),r=getStoreData().getSavedFieldValue(n,t),""!=n&&""!=l&&setStoreData().setFieldValue({name:n,value:_defineProperty$1({},n,r||l)})))},getStoreData=function(){return select("formbuilder")},setStoreData=function(){return dispatch("formbuilder")},processAjaxData=function(n){var r={};return Object.keys(n).map(function(e){var t;0===n[e].indexOf("@")?""!=(t=n[e].substr(1))&&(t=getStoreData().getFieldValue(t),r[e]=t||"undefined"):r[e]=n[e]}),r};function _extends$1(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];return(Object.assign||function(e){for(var t=1;t<o.length;t++){var n,r=o[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,o)}function ownKeys$a(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$9(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$a(Object(n),!0).forEach(function(e){_defineProperty$1(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var builderReducer=function(e,t){switch(t.type){case"SET_CONTEXT":return _extends$1({},e,setIn(e,t.payload.field,t.payload.value));case"SET_ACTIVE_TAB":return _objectSpread$9(_objectSpread$9({},e),{},{config:_objectSpread$9(_objectSpread$9({},e.config),{},{active:t.payload})});case"SET_REDIRECT":return _objectSpread$9(_objectSpread$9({},e),{},{redirect:_objectSpread$9(_objectSpread$9({},e.redirect),t.payload)});case"SET_VALUES":return _extends$1({},e,setIn(e,"values",t.payload));case"SET_SAVED_VALUES":return _extends$1({},e,setIn(e,"savedValues",t.payload));case"SET_FIELD_VALUE":return _extends$1({},e,{values:setIn(e.values,t.payload.field,t.payload.value)});case"SET_TOUCHED":return _extends$1({},e,{touched:t.payload});case"SET_ERRORS":return _extends$1({},e,{errors:t.payload});case"SET_STATUS":return _extends$1({},e,{status:t.payload});case"SET_ISSUBMITTING":return _objectSpread$9(_objectSpread$9({},e),{},{isSubmitting:t.payload});case"SET_ISVALIDATING":return _extends$1({},e,{isValidating:t.payload});case"SET_FIELD_TOUCHED":return _objectSpread$9(_objectSpread$9({},e),{},{touched:_objectSpread$9(_objectSpread$9({},e.touched),{},_defineProperty$1({},t.payload.field,t.payload.value))});case"SET_FIELD_ERROR":case"RESET_FORM":return _extends$1({},e,t.payload);case"SUBMIT_ATTEMPT":return _extends$1({},e,{isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return _extends$1({},e,{isSubmitting:!1});case"SET_FORM_FIELD":return null===t.payload.field?_extends$1({},e,setIn(e,"tabs",t.payload.value)):_extends$1({},e,{tabs:setIn(e.tabs,t.payload.field,t.payload.value)});case"SET_ICONS":return _extends$1({},e,{icons:setIn(e.icons,t.payload.name,t.payload.icons)});case"SET_ALERTS":return _extends$1({},e,{alerts:setIn(e.alerts,t.payload.name,t.payload.value)});case"SET_COMMONS":return _extends$1({},e,{common:setIn(e.common,t.payload.name,t.payload.value)});default:return e}};function ownKeys$9(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$8(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$9(Object(n),!0).forEach(function(e){_defineProperty$1(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$9(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var useBuilder=function(e){var t=useRef(!1);useEffect(function(){return t.current=!0,function(){t.current=!1}},[]);var n=_slicedToArray(useReducer(builderReducer,_objectSpread$8(_objectSpread$8({},e),{},{savedValues:e.savedValues||{},values:e.values||{},errors:e.initialErrors||{},touched:e.initialTouched||{},icons:e.initialIcons||{},common:{},alerts:{},tabs:sortingFields(e.tabs)})),2),u=n[0],r=n[1],o=useEventCallback(function(e,t,n){r({type:"SET_CONTEXT",payload:{field:e,value:t}})}),l=useEventCallback(function(e,t){e="function"==typeof e?e(u.values):e;return r({type:"SET_VALUES",payload:e}),void 0!==t&&t?e:Promise.resolve()}),a=useEventCallback(function(e,t){e="function"==typeof e?e(u.values):e;return r({type:"SET_SAVED_VALUES",payload:e}),void 0!==t&&t?e:Promise.resolve()}),i=useEventCallback(function(e,t,n){r({type:"SET_FIELD_VALUE",payload:{field:e,value:t}})}),s=useEventCallback(function(e,t){r({type:"SET_FORM_FIELD",payload:{field:e,value:t}})}),c=useCallback(function(e){return getIn(u.values,e)},[u]),d=useEventCallback(function(e,t,n){r({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t=t||!0}})}),p=useCallback(function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e.persist&&e.persist();var n=e.target,r=n.name,o=n.id;n.outerHTML,d(t||r||o,!0)},[d]),f=useEventCallback(function(t){return"string"==typeof t?function(e){return p(e,t)}:void p(t)}),g=useCallback(function(e,t,n){null!=n&&n.isPro&&!1===Boolean(u.is_pro_active)||(t=(e=executeChange(e,t)).field,e=e.val,t&&i(t,e))},[i,u.values]),m=useEventCallback(function(t,n){var e;return null!=n&&n.isPro&&!1===Boolean(u.is_pro_active)&&(null===(e=u.alerts)||void 0===e||null!==(e=e.pro_alert(null==n?void 0:n.popup))&&void 0!==e&&e.fire()),"string"==typeof t?function(e){return g(t,e,n)}:void g(t,null,n)}),v=useCallback(function(e){var t,n,r,o=_objectSpread$8({},e),l=validFieldProps(o),a=l.name,i=l.type,s=l.parent,c=l.parenttype;null!=o&&o.is_pro&&(l.is_pro=!(null!=o&&o.is_pro&&!0===Boolean(u.is_pro_active))),r=s&&"group"===c?null!==(t=null==(t=null!==(t=getIn(u.values,s))&&void 0!==t?t:{})?void 0:t[a])&&void 0!==t?t:null==o?void 0:o.default:s&&"repeater"===c?null!==(n=null==(s=null!==(s=getIn(u.values,s))&&void 0!==s?s:[])||null===(n=s[l.index])||void 0===n?void 0:n[a])&&void 0!==n?n:null==o?void 0:o.default:null!==(r=getIn(u.values,a))&&void 0!==r?r:null==o?void 0:o.default,l.onChange=m,l.onBlur=f;o=l.value;return"checkbox"===i?(l.checked=!!r,l.value=!!r,isString(r)&&"0"===r?(l.checked=!1,l.value=!1):(l.checked=Boolean(r),l.value=Boolean(r))):"radio"===i?(l.checked=r===o,l.value=o):l.value="date"===i&&null==r?getTime():r,l.visible=isVisible(u.values,e),l},[f,m,u.values]),h=useCallback(function(e,t){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return n=null!==r?null===(r=getIn(u.values,r))||void 0===r?void 0:r[e]:getIn(u.values,e)||(null===(n=t.meta)||void 0===n?void 0:n.default),_objectSpread$8(_objectSpread$8({},t.meta),{},{value:n,error:getIn(u.errors,e),touched:!!getIn(u.touched,e),visible:isVisible(u.values,t),initialValue:"",initialTouched:"",initialError:""})},[u.errors,u.touched,u.values]),b=useCallback(function(e){if(0<e.length)return e.filter(function(e){return null!=e&&e.rules?when(e.rules,u.values):e});return e},[u.errors,u.touched,u.values]),E=useCallback(function(e,t){if(e.length){var n=[];return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]&&isArray(t)?n=e.filter(function(e){return t.includes(e.value)}):0<(n=e.filter(function(e){return e.value==t})).length?n[0]:""}return e},[u.errors,u.touched,u.values]),y=useCallback(function(){return{setValue:function(e,t){return i(e,t)},getValue:function(e){return getIn(u.values,e)},getValueForDefault:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return(null===t||getIn(u.savedValues,t)===getIn(u.values,t))&&getIn(u.savedValues,e)}}},[u.errors,u.touched,u.values,u.savedValues]),_=useCallback(function(e){return getIn(u.tabs,e)},[u]),w=useEventCallback(function(e){r({type:"SET_ISSUBMITTING",payload:e})}),S=useEventCallback(function(e){r({type:"SET_ACTIVE_TAB",payload:e})}),x=useEventCallback(function(e){r({type:"SET_REDIRECT",payload:e})}),O=useEventCallback(function(e,t){r({type:"SET_ICONS",payload:{name:e,icons:t}})}),C=useEventCallback(function(e,t){r({type:"SET_COMMONS",payload:{name:e,value:t}})}),n=useEventCallback(function(e,t){r({type:"SET_ALERTS",payload:{name:e,value:t}})});return _objectSpread$8(_objectSpread$8(_objectSpread$8({},e),u),{},{setContext:o,values:u.values,savedValues:u.savedValues,errors:u.errors,touched:u.touched,isSubmitting:!1,setActiveTab:S,setRedirect:x,setSubmitting:w,setValues:l,setSavedValues:a,setFieldValue:i,getFieldValue:c,handleBlur:f,handleChange:m,getFieldProps:v,getFieldMeta:h,getFieldHelpers:y,eligibleOptions:b,eligibleOption:E,getTabFields:_,setFormField:s,registerIcons:O,registerCommon:C,registerAlert:n})},useIsomorphicLayoutEffect="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?useLayoutEffect:useEffect,useEventCallback=function(e){var l=useRef(e);return useIsomorphicLayoutEffect(function(){l.current=e}),useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return l.current.apply(void 0,t)},[])},Row=function(e){var t=classNames("wprf-row clearfix wprf-flex",null==e?void 0:e.className);return createElement("div",{className:t},null==e?void 0:e.children)},Column=function(e){var t=classNames("wprf-column",null==e?void 0:e.className,(_defineProperty$1(t={},"wprf-column-".concat(12/(null==e?void 0:e.column)),(null==e?void 0:e.column)&&12!==e.column),_defineProperty$1(t,"wprf-column-12",12===e.column),t));return createElement("div",{className:t},null==e?void 0:e.children)},Label=function(e){var t,n,r,o=classNames("wprf-input-label",null==e?void 0:e.className);return createElement("label",{htmlFor:null==e?void 0:e.htmlFor,className:o},(null==e||null===(t=e.badge)||void 0===t?void 0:t.value)&&createElement("div",{className:"wprf-badge"},createElement("sup",{className:classNames("wprf-badge-item",{"wprf-badge-active":null==e||null===(n=e.badge)||void 0===n?void 0:n.active})},null==e||null===(r=e.badge)||void 0===r?void 0:r.label)),!(null!=e&&e.src)&&(null==e?void 0:e.children),(null==e?void 0:e.src)&&createElement(Image,{className:"wprf-label-image",src:e.src,alt:null==e?void 0:e.label}))},Image=function(e){if(null==e||!e.src)return createElement("p",null,"No Source( src ) Defined");var t=classNames(["wprf-input-image",null==e?void 0:e.className]);return createElement("img",{className:t,src:null==e?void 0:e.src,alt:null==e?void 0:e.alt})},BadgeComp=function(e){var t=e.componentClasses,e=e.label;return createElement("div",{className:"wprf-badge"},createElement("sup",{className:t},e))},Badge=function(t){var n=useBuilderContext(),e=t.label,r=t.active,o=t.position,l=void 0===o?"right":o,a=t.renderLabel,i=t.renderComponent;void 0===e&&(e="Pro");o=classNames("wprf-badge-item",{"wprf-badge-active":r}),r={};return n.is_pro_active||(r={onClick:function(e){e.preventDefault(),n.alerts.pro_alert(null==t?void 0:t.popup).fire()}}),createElement("div",_extends$2({className:classNames("wprf-badge-wrapper",{"pro-deactivated":!n.is_pro_active})},r),"left"===l&&0<e.length&&createElement(Fragment,null,a(createElement(BadgeComp,{componentClasses:o,label:e}),"left")),"right"===l&&0<e.length&&createElement(Fragment,null,a(createElement(BadgeComp,{componentClasses:o,label:e}),"right")),i())},_excluded$5=["id","label","badge","badgePosition","context"],ControlLabel=function(e){var t,n=e.id,r=e.label,o=e.badge,l=e.badgePosition,a=e.context,e=_objectWithoutProperties$1(e,_excluded$5);return r&&0<r.length?createElement("div",{className:"wprf-control-label"},"left"==l&&o,createElement("label",{htmlFor:n},r),(null==e?void 0:e.link)&&createElement("a",{rel:"nofollow",target:"_blank",href:e.link},null==a||null===(t=a.icons)||void 0===t?void 0:t.link),"right"==l&&o):null},ControlField=function(e){var t=e.position,n=e.description,r=e.renderComponent,e=e.help;return createElement("div",{className:"wprf-control-field"},"left"===t&&n&&createElement("p",{className:"wprf-description",dangerouslySetInnerHTML:{__html:n}}),r(),"right"===t&&n&&createElement("p",{className:"wprf-description",dangerouslySetInnerHTML:{__html:n}}),e&&createElement("p",{className:"wprf-help",dangerouslySetInnerHTML:{__html:e}}))},_excluded$4=["label","id","name","type","style","is_pro","badge"];function ownKeys$8(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$7(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$8(Object(n),!0).forEach(function(e){_defineProperty$1(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$8(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var withLabel=function(g){return function(t){var e,n,r,o=t.label,l=t.id,a=t.name,i=t.type,s=t.style,c=t.is_pro,u=t.badge,d=_objectWithoutProperties$1(t,_excluded$4);null==l&&(l=a);var p=_objectSpread$7({description:{position:"right"}},s),s=classNames((_defineProperty$1(s={},"wprf-style-".concat(null==p?void 0:p.type),(null==p?void 0:p.type)||!1),_defineProperty$1(s,"wprf-label-none",void 0===o||""===o||0===o.length),_defineProperty$1(s,"wprf-".concat((null==p||null===(e=p.label)||void 0===e?void 0:e.position)||"inline","-label"),(null===(n=null==p||null===(n=p.label)||void 0===n?void 0:n.position)||void 0===n||n)&&null!=o),s));if("hidden"===i)return createElement(g,_extends$2({},t,{id:l}));var f=validFieldProps(t,["description","label","help","style"]),a=classNames("wprf-control-wrapper","wprf-type-".concat(i),s,null==t?void 0:t.classes,_defineProperty$1({},"wprf-name-".concat(a),a));return createElement("div",{className:a},1==c&&createElement(Fragment,null,createElement(Badge,_extends$2({},u,d,{renderLabel:function(e,t){return createElement(ControlLabel,_extends$2({},f,{context:null==d?void 0:d.context,id:l,label:o,badge:e,badgePosition:t}))},renderComponent:function(){var e;return createElement(ControlField,{help:null,description:null==t?void 0:t.description,position:null==p||null===(e=p.description)||void 0===e?void 0:e.position,renderComponent:function(){return createElement(g,_extends$2({},f,{disable:!0,id:l}))}})}})),(null==t?void 0:t.help)&&createElement("div",{className:"wprf-badge-wrapper"},createElement("div",{className:"wprf-control-label"}),createElement("div",{className:"wprf-control-field"},createElement("p",{className:"wprf-help",dangerouslySetInnerHTML:{__html:t.help}})))),(0==c||null==c)&&createElement(Fragment,null,o&&0<o.length&&createElement(ControlLabel,_extends$2({},f,{context:null==d?void 0:d.context,label:o,id:l})),createElement(ControlField,{help:null==t?void 0:t.help,description:null==t?void 0:t.description,position:null==p||null===(r=p.description)||void 0===r?void 0:r.position,renderComponent:function(){return createElement(g,_extends$2({},f,{id:l}))}})))}},withProps=function(s){var c=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(n){var e=useBuilderContext(),t=n.trigger,r=e.getFieldProps(n),o=e.getFieldMeta(r.name,n),l=e.getFieldHelpers();null!=e&&e.quickBuilder&&null!=e&&e.show&&(e.show.includes(n.name)||(r.classes=null!=r&&r.classes?r.classes+" hidden":" hidden"));var a=null!=n&&n.parentIndex?_toConsumableArray$1(n.parentIndex):[];r.parentIndex=a,r.context=e,isFunction(n.onChange)&&(r.onChange=n.onChange),isFunction(n.onBlur)&&(r.onBlur=n.onBlur);var i=useRef({});return useEffect(function(){return i.current[n.name]=!0,function(){i.current[n.name]=!1}},[]),useEffect(function(){var e,t;o.visible&&i.current[n.name]&&(c||"group"===r.type?(e=null==n?void 0:n.parent,t=null==n?void 0:n.parenttype,e&&"group"===t&&r.value&&l.setValue([e,r.name],r.value)):l.setValue(r.name,r.value))},[o.visible]),useEffect(function(){i.current[n.name]&&isObject(t)&&!isEmptyObj(t)&&useDefaults(r.name,l,r.value,t)},[r.value,o.visible]),o.visible?createElement(s,r):createElement(Fragment,null)}},Field=function(e){if(!e.type||0===e.type.length)throw console.error(e),new Error(__("Field must have a #type. see documentation.","notificationx"));switch(e.type){case"text":case"checkbox":case"radio":case"email":case"range":case"number":case"hidden":return createElement(Input$1,e);case"textarea":return createElement(Textarea$1,e);case"codeviewer":return createElement(CodeViewer$1,e);case"message":return createElement(Message,e);case"select":return createElement(Select$1,e);case"slider":return createElement(Slider,e);case"group":return createElement(Group$1,e);case"radio-card":return createElement(Radio,e);case"section":return createElement(Section$1,e);case"date":return createElement(Date$1,e);case"toggle":return createElement(Toggle,e);case"colorpicker":return createElement(ColorPicker$1,e);case"jsonuploader":return createElement(JsonUploader$1,e);case"repeater":return createElement(Repeater,e);case"media":return createElement(Media$1,e);case"editor":return createElement(Editor$1,e);case"action":return createElement(Action,e);case"button":return createElement(Button$1,e);case"modal":return createElement(Modal,e);default:var t=applyFilters("custom_field","",e.type,e);return createElement(Fragment,null,t)}},GenericField=withProps(Field,!0),Field$1=withProps(Field),DateControl=function(e){var t=e.name,n=e.value,r=e.onChange,o=__experimentalGetSettings(),l=null!==(e=null==e?void 0:e.format)&&void 0!==e?e:o.formats.datetime,a=getTime(n),i=/a(?!\\)/i.test(o.formats.datetime.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""));return useEffect(function(){r({target:{type:"date",name:t,value:a}})},[]),createElement(Dropdown,{className:"wprf-control-datetime",renderToggle:function(e){e.isOpen;e=e.onToggle;return createElement(Button$2,{isTertiary:!0,onClick:e},date(l,a,void 0))},renderContent:function(){return createElement(DateTimePicker,{__nextRemoveHelpButton:!0,__nextRemoveResetButton:!0,currentDate:getTime(a).toString(),onChange:function(e){r({target:{type:"date",name:t,value:getTime(e,!0)}})},is12Hour:i})}})},Date$1=withLabel(DateControl);function ownKeys$7(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$6(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$7(Object(n),!0).forEach(function(e){_defineProperty$1(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$7(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Input=function(t){var n=validFieldProps(t,["is_pro","visible","trigger","disable","parentIndex","context","badge","popup"]),e=useCallback(function(e){return n.onChange(e,{popup:null==t?void 0:t.popup,isPro:!!t.is_pro})},[null==n?void 0:n.value]);return"checkbox"===n.type&&null!=n&&n.name&&(n.checked=(null==n?void 0:n.checked)||(null==n?void 0:n.value)),React.createElement("input",_objectSpread$6(_objectSpread$6({},n),{},{onChange:e}))};Input.defaultProps={type:"text"};var GenericInput=React.memo(Input),Input$1=withLabel(React.memo(Input));function ownKeys$6(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$5(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$6(Object(n),!0).forEach(function(e){_defineProperty$1(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$6(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Textarea=function(t){var n=validFieldProps(t,["is_pro","visible","trigger","disable","parentIndex","context"]),e=useCallback(function(e){return n.onChange(e,{isPro:!!t.is_pro})},[null==n?void 0:n.value]);return React.createElement("textarea",_objectSpread$5(_objectSpread$5({},n),{},{onChange:e,rows:5}))},Textarea$1=withLabel(React.memo(Textarea));function ownKeys$5(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$4(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$5(Object(n),!0).forEach(function(e){_defineProperty$1(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$5(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var CodeViewer=function(t){var n=validFieldProps(t,["is_pro","visible","trigger","disable","parentIndex","context","copyOnClick"]),e={onChange:useCallback(function(e){return n.onChange(e,{isPro:!!t.is_pro})},[null==n?void 0:n.value]),rows:5};!t.is_pro&&null!=t&&t.copyOnClick&&null!=t&&t.value&&(e.onClick=function(){var e=null!=t&&t.success_text?t.success_text:__("Copied to Clipboard.","notificationx");copy(t.value,{format:"text/plain",onCopy:function(){t.context.alerts.toast("success",e)}})});var r=null!=t&&t.button_text?t.button_text:__("Click to Copy","notificationx");return createElement("span",{className:"wprf-code-viewer"},React.createElement("textarea",_objectSpread$4(_objectSpread$4({},n),e)),createElement(Button$2,{className:"wprf-copy-button"},r))},CodeViewer$1=withLabel(React.memo(CodeViewer)),JsonUploader=function(n){validFieldProps(n,["is_pro","visible","trigger","disable","parentIndex","context","copyOnClick"]);var e=_slicedToArray(useState(),2),t=e[0],r=e[1];return useEffect(function(){null!=n&&n.value||r(null)},[null==n?void 0:n.value]),createElement("span",{className:"wprf-json-uploader"},!t&&createElement("label",{className:"wprf-json-uploaderButton"},createElement("span",null,__("Upload")),createElement("input",{type:"file",accept:"application/JSON",onChange:function(e){var t;(t=e).target.files.length&&(0!=(null==(e=t.target.files[0])?void 0:e.size)?"application/json"==(null==e?void 0:e.type)||"text/json"==(null==e?void 0:e.type)?(r(e),(t=new FileReader).onload=function(e){var t=null==e||null===(t=e.target)||void 0===t?void 0:t.result;n.onChange({target:{type:"jsonuploader",name:n.name,value:t}})},t.readAsText(e)):n.context.alerts.toast("error",__("Invalid file type.","notificationx")):n.context.alerts.toast("error",__("File can't be empty.","notificationx")))}})),t&&(null==t?void 0:t.name)&&createElement("span",{className:"wpfr-json-file-name-wrapper"},createElement("span",{className:"wpfr-json-file-name"},20<(null==t?void 0:t.name.length)?"".concat(null==t?void 0:t.name.substr(0,9),"...").concat(null==t?void 0:t.name.substr((null==t?void 0:t.name.length)-7)):null==t?void 0:t.name),createElement("span",{className:"wprf-json-file-delete-button",onClick:function(){r(null),n.onChange({target:{type:"jsonuploader",name:n.name,value:null}})}},"x")))},JsonUploader$1=withLabel(React.memo(JsonUploader)),_excluded$3=["name","fields"],Group=function(n){var r=n.name,e=n.fields,o=_objectWithoutProperties$1(n,_excluded$3);if(!e||!isArray(e)||0===e.length)throw new Error(__("You should give a #fields arguments to a group field.","notificationx"));var l=useBuilderContext(),a=useCallback(function(e){e.persist&&e.persist();var t=executeChange(e),e=t.field,t=t.val;l.setFieldValue([r,e],t)},[n.value]),t=sortingFields(e);useEffect(function(){l.setFormField([].concat(_toConsumableArray$1(n.parentIndex),["fields"]),t)},[]);var i=t.map(function(e,t){t=[].concat(_toConsumableArray$1(n.parentIndex),["fields",t]);return createElement(GenericField,_extends$2({},o,{key:e.name,index:n.index,onChange:a},e,{parenttype:"group",parent:r,parentIndex:t}))}),e=classNames("wprf-group-control-inner",{"wprf-display-inline":"inline"===(null==n?void 0:n.display)});return createElement("div",{className:"wprf-group-control"},createElement("div",{className:e},i))},Group$1=withLabel(Group),Select=function(o){var l=useBuilderContext(),e=o.id,t=o.name,n=o.multiple,r=o.placeholder,a=o.search,i=void 0!==a&&a,s=o.onChange,c=o.parentIndex,u=useOptions(o,"options"),d=u.options,p=u.selectedOption,f=u.setData,a=_slicedToArray(useState(null),2),g=a[0],m=a[1],u=_slicedToArray(useState(!1),2),a=u[0],v=u[1],u=_slicedToArray(useState(!1),2),h=u[0];u[1];function b(){var e;if(null!=o&&o.ajax&&when(null==o||null===(e=o.ajax)||void 0===e?void 0:e.rules,l.values)){v(!0);var r={};if(Object.keys(null==o?void 0:o.ajax.data).map(function(e){var t,n;-1<(null==o?void 0:o.ajax.data[e].indexOf("@"))?(n=null==o?void 0:o.ajax.data[e].substr(1),r[e]=null===(t=l.values)||void 0===t?void 0:t[n]):r[e]=null==o?void 0:o.ajax.data[e]}),!h)return wpFetch({path:null==o?void 0:o.ajax.api,data:r}).then(function(e){v(!1);var t=merge(o.options,e,"value");return l.setFormField([].concat(_toConsumableArray$1(c),["options"]),t),f({options:t,parentIndex:[].concat(_toConsumableArray$1(c),["options"])}),e})}}return useEffect(function(){!isArray(g)&&isObject(g)&&s({target:{type:"select",name:t,value:g.value,options:d,multiple:n}}),isArray(g)&&s({target:{type:"select",name:t,value:g.map(function(e){return e.value}),options:d,multiple:n}})},[g]),useEffect(function(){b()},[]),useEffect(function(){null!=o&&o.menuOpen&&b()},[null==o?void 0:o.menuOpen]),createElement("div",{className:"wprf-select-wrapper"},createElement(ReactSelect,{isDisabled:null==o?void 0:o.disable,classNamePrefix:"wprf-select",isSearchable:null!=i&&i,id:e,name:t,isMulti:null!=n&&n,placeholder:r,isLoading:a,options:d,value:p,onMenuOpen:b,onMenuClose:function(){v(!1)},isOptionDisabled:function(e){return null==e?void 0:e.disabled},onChange:function(e){return m(e)}}))},Select$1=withLabel(Select);const instanceMap=new WeakMap;function createId(e){var t=instanceMap.get(e)||0;return instanceMap.set(e,t+1),t}function useInstanceId(t,n,r){return useMemo(()=>{if(r)return r;var e=createId(t);return n?n+"-"+e:e},[t])}function getAugmentedNamespace(n){if(n.__esModule)return n;var r=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach(function(e){var t=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(r,e,t.get?t:{enumerable:!0,get:function(){return n[e]}})}),r}var RepeaterField=function e(t){var n=useBuilderContext(),r=t.fields,o=t.onChange,l=t.index,a=t.parent,i=_slicedToArray(useState(t.isCollapsed),2),s=i[0],c=i[1],u=useInstanceId(e),d=null===(i=n.values)||void 0===i||null===(d=i[a])||void 0===d?void 0:d[l],d=(null==d?void 0:d.title)||(null==d?void 0:d.post_title)||(null==d?void 0:d.username)||(null==d?void 0:d.plugin_theme_name),d=d?d.length<40?d:d.substr(0,40)+"...":"";return useEffect(function(){n.setFieldValue([a,l,"isCollapsed"],s)},[s]),createElement("div",{className:"wprf-repeater-field"},createElement("div",{className:"wprf-repeater-field-title",onClick:function(){return c(!s)}},createElement("h4",null,createElement(Icon,{icon:"move"}),t.index+1,": ",d),createElement("div",{className:"wprf-repeater-field-controls"},createElement(Icon,{onClick:function(e){null!=e&&e.stopPropagation(),t.clone(t.index)},icon:"admin-page"}),createElement(Icon,{onClick:function(e){null!=e&&e.stopPropagation(),t.remove(t.index)},icon:"trash"}))),!s&&createElement("div",{className:"wprf-repeater-inner-field"},r.map(function(e,t){return createElement(GenericField,_extends$2({key:"field-".concat(l,"-").concat(t)},e,{id:"field-".concat(u,"-").concat(l,"-").concat(t),index:l,parenttype:"repeater",parent:a,onChange:function(e){return o(e,l)}}))})))};function ownKeys$4(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$4(Object(n),!0).forEach(function(e){_defineProperty$1(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$4(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var GenericToggle=function(t){var e,n,r=_objectSpread$3({type:"",label:{position:"right"},column:4},t.style),o=useMemo(function(){var e=!1;return null!=t&&t.checked&&isObject(t.checked)&&isString(null==t?void 0:t.value)?e=t.checked[t.value]:isString(t.value)||(e=t.value),e},[null==t?void 0:t.checked,t.value]),l=classNames("wprf-toggle-wrap",(_defineProperty$1(l={},"wprf-".concat(null==r?void 0:r.type),0<(null==r?void 0:r.type.length)),_defineProperty$1(l,"wprf-checked",Boolean(o)),_defineProperty$1(l,"wprf-label-position-".concat(null==r||null===(e=r.label)||void 0===e?void 0:e.position),null==r||null===(n=r.label)||void 0===n?void 0:n.position),l),null==t?void 0:t.classes);return createElement("div",{className:l},createElement(GenericInput,_objectSpread$3(_objectSpread$3({},t),{},{type:"checkbox",placeholder:void 0})),createElement(Label,{htmlFor:t.id}))},GenericToggle$1=withLabel(GenericToggle),ModalContent=function(n){var e=n.isLoading;n.closeModal;var t=_slicedToArray(useState([]),2),r=t[0],o=t[1];return useEffect(function(){var e=sortingFields(n.body.fields).map(function(e,t){t=[].concat(_toConsumableArray$1(n.parentIndex),["fields",t]);return createElement(Field$1,_extends$2({key:e.name},e,{parentIndex:t}))});o(e)},[]),createElement("div",{className:"wprf-modal-body"},e&&createElement(Loading,null),!e&&createElement(Fragment,null,createElement("div",{className:"wprf-modal-content"},0<r.length&&r),createElement("div",{className:"wprf-modal-footer clearfix"},createElement("div",{className:"wprf-modal-footer-left"},(null===(r=n.body)||void 0===r?void 0:r.footer)&&isString(n.body.footer)&&createElement("p",null,n.body.footer),createElement(GenericField,_extends$2({type:"button"},null==n?void 0:n.confirm_button))))))},ModalHeader=function(e){e=e.content;return createElement("div",{className:"wprf-modal-header"},e&&isString(e)&&createElement("h3",null,e))},Loading=function(e){return createElement("p",null,__("Loading...","notificationx"))},toolbarOptions={options:["inline","blockType","textAlign","colorPicker","link"],inline:{options:["bold","italic","underline","strikethrough","monospace"]},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"],className:void 0,component:void 0,dropdownClassName:void 0}};function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray$1(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray$1(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$1(e,t):void 0}}function _arrayLikeToArray$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ownKeys$3(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$3(Object(n),!0).forEach(function(e){_defineProperty$1(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Toggle=function(t){var e=t.options,r=t.value,n=t.multiple,o=t.style,l=sortingFields(e),a=_objectSpread$2({column:4},o);if(n){function i(e){var t=e.target||e.currentTarget;c(function(e){return _objectSpread$2(_objectSpread$2({},e),{},_defineProperty$1({},t.value,t.checked))})}var n=_slicedToArray(useState({}),2),s=n[0],c=n[1];return useEffect(function(){t.onChange({target:{type:"toggle",name:t.name,value:s}})},[s]),useEffect(function(){if(isObject(r))c(r);else{var e,t={},n=_createForOfIteratorHelper(l);try{for(n.s();!(e=n.n()).done;)t[e.value.value]=r}catch(e){n.e(e)}finally{n.f()}c(t)}},[]),createElement("div",{className:"wprf-toggle-wrapper wprf-control"},createElement(Row,null,l.map(function(e){return createElement(Column,{key:e.value,column:a.column},createElement(GenericToggle$1,_objectSpread$2(_objectSpread$2({},e),{},{context:null==t?void 0:t.context,id:e.value,checked:void 0===s[e.value]||(null!=s&&s[e.value]?r:!(null==s||!s[e.value])),type:"checkbox",onChange:i,style:a})))})))}return createElement(GenericToggle$1,t)},_excluded$2=["label","value","icon","is_pro"];function ownKeys$2(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$2(Object(n),!0).forEach(function(e){_defineProperty$1(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var RadioCard=function e(t){var i=useBuilderContext(),n=useOptions(t,"options"),r=n.options,s=n.option;if(!r)throw new Error(__("#options is a required arguments for RadioCard field.","notificationx"));var c=useInstanceId(e),n=classNames(["wprf-control","wprf-radio-card","wprf-input-radio-set-wrap",null==t?void 0:t.className]),u=_objectSpread$1({},null==t?void 0:t.style),d=validFieldProps(t,["options","placeholder","style","trigger"]);return useEffect(function(){s&&t.onChange({target:{type:"radio-card",name:t.name,value:s}})},[s]),createElement("div",{className:n},createElement(Row,null,r.map(function(e,t){var n=e.label,r=e.value,o=e.icon,l=e.is_pro,a=_objectWithoutProperties$1(e,_excluded$2);return createElement(Column,{column:+(null==a?void 0:a.column)||4,key:t},createElement("div",{className:classNames("wprf-input-radio-option",{"wprf-option-has-image":null!=o&&o,"wprf-option-selected":r==s})},createElement(Label,{className:classNames(_defineProperty$1({"wprf-label-has-image":null!=o&&o},"wprf-size-".concat(u.size),null!==(e=o&&(null==u?void 0:u.size))&&void 0!==e&&e)),htmlFor:"wprf-input-radio-".concat(c,"-").concat(t),src:o,badge:{label:l?"Pro":"Free",value:l,active:Boolean(i.is_pro_active)}},n),createElement(GenericInput,_extends$2({},a,d,{is_pro:l,type:"radio",value:r,checked:r===s,id:"wprf-input-radio-".concat(c,"-").concat(t)}))))})))},Radio=withLabel(RadioCard),Section=function(n){var t=useBuilderContext(),e=_slicedToArray(useState(null!==(l=n.collapsed)&&void 0!==l&&l),2),r=e[0],o=e[1],l=_slicedToArray(useState([]),2),e=l[0],a=l[1];useEffect(function(){var e=sortingFields(n.fields);t.setFormField([].concat(_toConsumableArray$1(n.parentIndex),["fields"]),e);e=e.map(function(e,t){t=[].concat(_toConsumableArray$1(n.parentIndex),["fields",t]);return createElement(Field$1,_extends$2({key:e.name},e,{parentIndex:t}))});a(e)},[]);l=classNames("wprf-control-section",null==n?void 0:n.classes,null==n?void 0:n.name,{"wprf-section-collapsed":(null==n?void 0:n.collapsible)&&r});return createElement("div",{id:null==n?void 0:n.name,className:l},n.placeholder&&createElement("div",{className:"wprf-section-title"},createElement("h4",null,n.placeholder),n.collapsible&&createElement("button",{onClick:function(){return o(!r)}},"Icon")),createElement("div",{className:"wprf-section-fields"},e))},Section$1=React.memo(Section),dist={exports:{}};function ownKeys$1(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$1(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),l=0;l<o.length;l++)n=o[l],0<=t.indexOf(n)||(r[n]=e[n]);return r}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),l=0;l<o.length;l++)n=o[l],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var version="1.15.0";function userAgent(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(e,t,n){e.addEventListener(t,n,!IE11OrLess&&captureMode)}function off(e,t,n){e.removeEventListener(t,n,!IE11OrLess&&captureMode)}function matches(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function getParentOrHost(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function closest(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"!==t[0]||e.parentNode===n)&&matches(e,t)||r&&e===n)return e}while(e!==n&&(e=getParentOrHost(e)))}return null}var _throttleTimeout,R_SPACE=/\s+/g;function toggleClass(e,t,n){var r;e&&t&&(e.classList?e.classList[n?"add":"remove"](t):(r=(" "+e.className+" ").replace(R_SPACE," ").replace(" "+t+" "," "),e.className=(r+(n?" "+t:"")).replace(R_SPACE," ")))}function css(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];r[t=!(t in r||-1!==t.indexOf("webkit"))?"-webkit-"+t:t]=n+("string"==typeof n?"":"px")}}function matrix(e,t){var n="";if("string"==typeof e)n=e;else do{var r=css(e,"transform")}while(r&&"none"!==r&&(n=r+" "+n),!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function find(e,t,n){if(e){var r=e.getElementsByTagName(t),o=0,l=r.length;if(n)for(;o<l;o++)n(r[o],o);return r}return[]}function getWindowScrollingElement(){var e=document.scrollingElement;return e||document.documentElement}function getRect(e,t,n,r,o){if(e.getBoundingClientRect||e===window){var l,a,i,s,c,u,d=e!==window&&e.parentNode&&e!==getWindowScrollingElement()?(a=(l=e.getBoundingClientRect()).top,i=l.left,s=l.bottom,c=l.right,u=l.height,l.width):(i=a=0,s=window.innerHeight,c=window.innerWidth,u=window.innerHeight,window.innerWidth);if((t||n)&&e!==window&&(o=o||e.parentNode,!IE11OrLess))do{if(o&&o.getBoundingClientRect&&("none"!==css(o,"transform")||n&&"static"!==css(o,"position"))){var p=o.getBoundingClientRect();a-=p.top+parseInt(css(o,"border-top-width")),i-=p.left+parseInt(css(o,"border-left-width")),s=a+l.height,c=i+l.width;break}}while(o=o.parentNode);return r&&e!==window&&(r=(t=matrix(o||e))&&t.a,e=t&&t.d,t&&(s=(a/=e)+(u/=e),c=(i/=r)+(d/=r))),{top:a,left:i,bottom:s,right:c,width:d,height:u}}}function isScrolledPast(e,t,n){for(var r=getParentAutoScrollElement(e,!0),o=getRect(e)[t];r;){var l=getRect(r)[n];if(!("top"===n||"left"===n?l<=o:o<=l))return r;if(r===getWindowScrollingElement())break;r=getParentAutoScrollElement(r,!1)}return!1}function getChild(e,t,n,r){for(var o=0,l=0,a=e.children;l<a.length;){if("none"!==a[l].style.display&&a[l]!==Sortable.ghost&&(r||a[l]!==Sortable.dragged)&&closest(a[l],n.draggable,e,!1)){if(o===t)return a[l];o++}l++}return null}function lastChild(e,t){for(var n=e.lastElementChild;n&&(n===Sortable.ghost||"none"===css(n,"display")||t&&!matches(n,t));)n=n.previousElementSibling;return n||null}function index(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Sortable.clone||t&&!matches(e,t)||n++;return n}function getRelativeScrollOffset(e){var t=0,n=0,r=getWindowScrollingElement();if(e)do{var o=matrix(e),l=o.a,o=o.d}while(t+=e.scrollLeft*l,n+=e.scrollTop*o,e!==r&&(e=e.parentNode));return[t,n]}function indexOfObject(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}function getParentAutoScrollElement(e,t){if(!e||!e.getBoundingClientRect)return getWindowScrollingElement();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=css(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return getWindowScrollingElement();if(r||t)return n;r=!0}}}while(n=n.parentNode);return getWindowScrollingElement()}function extend(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function isRectEqual(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function throttle(t,n){return function(){var e;_throttleTimeout||(1===(e=arguments).length?t.call(this,e[0]):t.apply(this,e),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},n))}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function clone(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function setRect(e,t){css(e,"position","absolute"),css(e,"top",t.top),css(e,"left",t.left),css(e,"width",t.width),css(e,"height",t.height)}function unsetRect(e){css(e,"position",""),css(e,"top",""),css(e,"left",""),css(e,"width",""),css(e,"height","")}var expando="Sortable"+(new Date).getTime();function AnimationStateManager(){var t,r=[];return{captureAnimationState:function(){r=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(e){var t,n;"none"!==css(e,"display")&&e!==Sortable.ghost&&(r.push({target:e,rect:getRect(e)}),t=_objectSpread2({},r[r.length-1].rect),!e.thisAnimationDuration||(n=matrix(e,!0))&&(t.top-=n.f,t.left-=n.e),e.fromRect=t)})},addAnimationState:function(e){r.push(e)},removeAnimationState:function(e){r.splice(indexOfObject(r,{target:e}),1)},animateAll:function(e){var s=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof e&&e());var c=!1,u=0;r.forEach(function(e){var t=0,n=e.target,r=n.fromRect,o=getRect(n),l=n.prevFromRect,a=n.prevToRect,i=e.rect,e=matrix(n,!0);e&&(o.top-=e.f,o.left-=e.e),n.toRect=o,n.thisAnimationDuration&&isRectEqual(l,o)&&!isRectEqual(r,o)&&(i.top-o.top)/(i.left-o.left)==(r.top-o.top)/(r.left-o.left)&&(t=calculateRealTime(i,l,a,s.options)),isRectEqual(o,r)||(n.prevFromRect=r,n.prevToRect=o,t=t||s.options.animation,s.animate(n,i,o,t)),t&&(c=!0,u=Math.max(u,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},t),n.thisAnimationDuration=t)}),clearTimeout(t),c?t=setTimeout(function(){"function"==typeof e&&e()},u):"function"==typeof e&&e(),r=[]},animate:function(e,t,n,r){var o,l;r&&(css(e,"transition",""),css(e,"transform",""),o=(l=matrix(this.el))&&l.a,l=l&&l.d,o=(t.left-n.left)/(o||1),l=(t.top-n.top)/(l||1),e.animatingX=!!o,e.animatingY=!!l,css(e,"transform","translate3d("+o+"px,"+l+"px,0)"),this.forRepaintDummy=repaint(e),css(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),css(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){css(e,"transition",""),css(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},r))}}}function repaint(e){return e.offsetWidth}function calculateRealTime(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(t){for(var e in defaults)!defaults.hasOwnProperty(e)||e in t||(t[e]=defaults[e]);plugins.forEach(function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),plugins.push(t)},pluginEvent:function(t,n,r){var e=this;this.eventCanceled=!1,r.cancel=function(){e.eventCanceled=!0};var o=t+"Global";plugins.forEach(function(e){n[e.pluginName]&&(n[e.pluginName][o]&&n[e.pluginName][o](_objectSpread2({sortable:n},r)),n.options[e.pluginName]&&n[e.pluginName][t]&&n[e.pluginName][t](_objectSpread2({sortable:n},r)))})},initializePlugins:function(n,r,o,e){for(var t in plugins.forEach(function(e){var t=e.pluginName;(n.options[t]||e.initializeByDefault)&&((e=new e(n,r,n.options)).sortable=n,e.options=n.options,n[t]=e,_extends(o,e.defaults))}),n.options){var l;n.options.hasOwnProperty(t)&&(void 0!==(l=this.modifyOption(n,t,n.options[t]))&&(n.options[t]=l))}},getEventProperties:function(t,n){var r={};return plugins.forEach(function(e){"function"==typeof e.eventProperties&&_extends(r,e.eventProperties.call(n[e.pluginName],t))}),r},modifyOption:function(t,n,r){var o;return plugins.forEach(function(e){t[e.pluginName]&&e.optionListeners&&"function"==typeof e.optionListeners[n]&&(o=e.optionListeners[n].call(t[e.pluginName],r))}),o}};function dispatchEvent(e){var t=e.sortable,n=e.rootEl,r=e.name,o=e.targetEl,l=e.cloneEl,a=e.toEl,i=e.fromEl,s=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,p=e.originalEvent,f=e.putSortable,g=e.extraEventProperties;if(t=t||n&&n[expando]){var m,v=t.options,e="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||IE11OrLess||Edge?(m=document.createEvent("Event")).initEvent(r,!0,!0):m=new CustomEvent(r,{bubbles:!0,cancelable:!0}),m.to=a||n,m.from=i||n,m.item=o||n,m.clone=l,m.oldIndex=s,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=d,m.originalEvent=p,m.pullMode=f?f.lastPutMode:void 0;var h,b=_objectSpread2(_objectSpread2({},g),PluginManager.getEventProperties(r,t));for(h in b)m[h]=b[h];n&&n.dispatchEvent(m),v[e]&&v[e].call(t,m)}}var _excluded$1=["evt"],pluginEvent=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,n=_objectWithoutProperties(n,_excluded$1);PluginManager.pluginEvent.bind(Sortable)(e,t,_objectSpread2({dragEl:dragEl,parentEl:parentEl,ghostEl:ghostEl,rootEl:rootEl,nextEl:nextEl,lastDownEl:lastDownEl,cloneEl:cloneEl,cloneHidden:cloneHidden,dragStarted:moved,putSortable:putSortable,activeSortable:Sortable.active,originalEvent:r,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(e){_dispatchEvent({sortable:t,name:e,originalEvent:r})}},n))};function _dispatchEvent(e){dispatchEvent(_objectSpread2({putSortable:putSortable,cloneEl:cloneEl,targetEl:dragEl,rootEl:rootEl,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex},e))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,targetMoveDistance,ghostRelativeParent,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],pastFirstInvertThresh=!1,isCircumstantialInvert=!1,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists="undefined"!=typeof document,PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),_detectDirection=function(e,t){var n=css(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=getChild(e,0,t),l=getChild(e,1,t),a=o&&css(o),i=l&&css(l),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+getRect(o).width,e=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+getRect(l).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&"none"!==a.float){t="left"===a.float?"left":"right";return!l||"both"!==i.clear&&i.clear!==t?"horizontal":"vertical"}return o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||r<=s&&"none"===n[CSSFloatProperty]||l&&"none"===n[CSSFloatProperty]&&r<s+e)?"vertical":"horizontal"},_dragElInRowColumn=function(e,t,n){var r=n?e.left:e.top,o=n?e.right:e.bottom,l=n?e.width:e.height,a=n?t.left:t.top,e=n?t.right:t.bottom,t=n?t.width:t.height;return r===a||o===e||r+l/2===a+t/2},_detectNearestEmptySortable=function(o,l){var a;return sortables.some(function(e){var t=e[expando].options.emptyInsertThreshold;if(t&&!lastChild(e)){var n=getRect(e),r=o>=n.left-t&&o<=n.right+t,t=l>=n.top-t&&l<=n.bottom+t;return r&&t?a=e:void 0}}),a},_prepareGroup=function(e){function i(l,a){return function(e,t,n,r){var o=e.options.group.name&&t.options.group.name&&e.options.group.name===t.options.group.name;if(null==l&&(a||o))return!0;if(null==l||!1===l)return!1;if(a&&"clone"===l)return l;if("function"==typeof l)return i(l(e,t,n,r),a)(e,t,n,r);t=(a?e:t).options.group.name;return!0===l||"string"==typeof l&&l===t||l.join&&-1<l.indexOf(t)}}var t={},n=e.group;n&&"object"==_typeof(n)||(n={name:n}),t.name=n.name,t.checkPull=i(n.pull,!0),t.checkPut=i(n.put),t.revertClone=n.revertClone,e.group=t},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(e){if(ignoreNextClick)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ignoreNextClick=!1},!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var t=_detectNearestEmptySortable(e.clientX,e.clientY);if(t){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[expando]._onDragOver(r)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=_extends({},t),e[expando]=this;var n,r,o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Sortable.supportPointer&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};for(n in PluginManager.initializePlugins(this,e,o),o)n in t||(t[n]=o[n]);for(r in _prepareGroup(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?on(e,"pointerdown",this._onTapStart):(on(e,"mousedown",this._onTapStart),on(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(e,"dragover",this),on(e,"dragenter",this)),sortables.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),_extends(this,AnimationStateManager())}function _globalDragOver(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function _onMove(e,t,n,r,o,l,a,i){var s,c,u=e[expando],d=u.options.onMove;return!window.CustomEvent||IE11OrLess||Edge?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=r,s.related=o||t,s.relatedRect=l||getRect(t),s.willInsertAfter=i,s.originalEvent=a,e.dispatchEvent(s),c=d?d.call(u,s,a):c}function _disableDraggable(e){e.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(e,t,n){n=getRect(getChild(n.el,0,n.options,!0));return t?e.clientX<n.left-10||e.clientY<n.top&&e.clientX<n.right:e.clientY<n.top-10||e.clientY<n.bottom&&e.clientX<n.left}function _ghostIsLast(e,t,n){n=getRect(lastChild(n.el,n.options.draggable));return t?e.clientX>n.right+10||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+10}function _getSwapDirection(e,t,n,r,o,l,a,i){var s=r?e.clientY:e.clientX,c=r?n.height:n.width,e=r?n.top:n.left,r=r?n.bottom:n.right,n=!1;if(!a)if(i&&targetMoveDistance<c*o){if(pastFirstInvertThresh=!pastFirstInvertThresh&&(1===lastDirection?e+c*l/2<s:s<r-c*l/2)?!0:pastFirstInvertThresh)n=!0;else if(1===lastDirection?s<e+targetMoveDistance:r-targetMoveDistance<s)return-lastDirection}else if(e+c*(1-o)/2<s&&s<r-c*(1-o)/2)return _getInsertDirection(t);return(n=n||a)&&(s<e+c*l/2||r-c*l/2<s)?e+c/2<s?1:-1:0}function _getInsertDirection(e){return index(dragEl)<index(e)?1:-1}function _generateId(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function _saveInputCheckedState(e){savedInputChecked.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&savedInputChecked.push(r)}}function _nextTick(e){return setTimeout(e,0)}function _cancelNextTick(e){return clearTimeout(e)}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(lastTarget=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,dragEl):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,r=this.el,e=this.options,o=e.preventOnFilter,l=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,i=(a||t).target,s=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||i,c=e.filter;if(_saveInputCheckedState(r),!dragEl&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||e.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!Safari||!i||"SELECT"!==i.tagName.toUpperCase())&&!((i=closest(i,e.draggable,r,!1))&&i.animated||lastDownEl===i)){if(oldIndex=index(i),oldDraggableIndex=index(i,e.draggable),"function"==typeof c){if(c.call(this,t,i,this))return _dispatchEvent({sortable:n,rootEl:s,name:"filter",targetEl:i,toEl:r,fromEl:r}),pluginEvent("filter",n,{evt:t}),void(o&&t.cancelable&&t.preventDefault())}else if(c=c&&c.split(",").some(function(e){if(e=closest(s,e.trim(),r,!1))return _dispatchEvent({sortable:n,rootEl:e,name:"filter",targetEl:i,fromEl:r,toEl:r}),pluginEvent("filter",n,{evt:t}),!0}))return void(o&&t.cancelable&&t.preventDefault());e.handle&&!closest(s,e.handle,r,!1)||this._prepareDragStart(t,a,i)}}},_prepareDragStart:function(e,t,n){var r,o=this,l=o.el,a=o.options,i=l.ownerDocument;n&&!dragEl&&n.parentNode===l&&(r=getRect(n),rootEl=l,parentEl=(dragEl=n).parentNode,nextEl=dragEl.nextSibling,lastDownEl=n,activeGroup=a.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(t||e).clientX,clientY:(t||e).clientY},tapDistanceLeft=tapEvt.clientX-r.left,tapDistanceTop=tapEvt.clientY-r.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,dragEl.style["will-change"]="all",r=function(){pluginEvent("delayEnded",o,{evt:e}),Sortable.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!FireFox&&o.nativeDraggable&&(dragEl.draggable=!0),o._triggerDragStart(e,t),_dispatchEvent({sortable:o,name:"choose",originalEvent:e}),toggleClass(dragEl,a.chosenClass,!0))},a.ignore.split(",").forEach(function(e){find(dragEl,e.trim(),_disableDraggable)}),on(i,"dragover",nearestEmptyInsertDetectEvent),on(i,"mousemove",nearestEmptyInsertDetectEvent),on(i,"touchmove",nearestEmptyInsertDetectEvent),on(i,"mouseup",o._onDrop),on(i,"touchend",o._onDrop),on(i,"touchcancel",o._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(Edge||IE11OrLess)?r():Sortable.eventCanceled?this._onDrop():(on(i,"mouseup",o._disableDelayedDrag),on(i,"touchend",o._disableDelayedDrag),on(i,"touchcancel",o._disableDelayedDrag),on(i,"mousemove",o._delayedDragTouchMoveHandler),on(i,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&on(i,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(r,a.delay)))},_delayedDragTouchMoveHandler:function(e){e=e.touches?e.touches[0]:e;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):on(document,t?"touchmove":"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){var n;awaitingDragStarted=!1,rootEl&&dragEl?(pluginEvent("dragStarted",this,{evt:t}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl),n=this.options,e||toggleClass(dragEl,n.dragClass,!1),toggleClass(dragEl,n.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:t})):this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY))!==t;)t=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),t)do{if(t[expando])if(t[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}while(t=(e=t).parentNode);_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,o=e.touches?e.touches[0]:e,l=ghostEl&&matrix(ghostEl,!0),a=ghostEl&&l&&l.a,i=ghostEl&&l&&l.d,t=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),a=(o.clientX-tapEvt.clientX+r.x)/(a||1)+(t?t[0]-ghostRelativeParentInitialScroll[0]:0)/(a||1),i=(o.clientY-tapEvt.clientY+r.y)/(i||1)+(t?t[1]-ghostRelativeParentInitialScroll[1]:0)/(i||1);if(!Sortable.active&&!awaitingDragStarted){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}ghostEl&&(l?(l.e+=a-(lastDx||0),l.f+=i-(lastDy||0)):l={a:1,b:0,c:0,d:1,e:a,f:i},l="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")"),css(ghostEl,"webkitTransform",l),css(ghostEl,"mozTransform",l),css(ghostEl,"msTransform",l),css(ghostEl,"transform",l),lastDx=a,lastDy=i,touchEvt=o),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,t=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),n=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;"static"===css(ghostRelativeParent,"position")&&"none"===css(ghostRelativeParent,"transform")&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),t.top+=ghostRelativeParent.scrollTop,t.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}toggleClass(ghostEl=dragEl.cloneNode(!0),n.ghostClass,!1),toggleClass(ghostEl,n.fallbackClass,!0),toggleClass(ghostEl,n.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",t.top),css(ghostEl,"left",t.left),css(ghostEl,"width",t.width),css(ghostEl,"height",t.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,o=n.options;pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled?this._onDrop():(pluginEvent("setupClone",this),Sortable.eventCanceled||((cloneEl=clone(dragEl)).removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),n.cloneId=_nextTick(function(){pluginEvent("clone",n),Sortable.eventCanceled||(n.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),n._hideClone(),_dispatchEvent({sortable:n,name:"clone"}))}),t||toggleClass(dragEl,o.dragClass,!0),t?(ignoreNextClick=!0,n._loopId=setInterval(n._emulateDragOver,50)):(off(document,"mouseup",n._onDrop),off(document,"touchend",n._onDrop),off(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,dragEl)),on(document,"drop",n),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,n._dragStartId=_nextTick(n._dragStarted.bind(n,t,e)),on(document,"selectstart",n),moved=!0,Safari&&css(document.body,"user-select","none"))},_onDragOver:function(n){var r,o,l,a=this.el,i=n.target,t=this.options,e=t.group,s=Sortable.active,c=activeGroup===e,u=t.sort,d=putSortable||s,p=this,f=!1;if(!_silent){if(void 0!==n.preventDefault&&n.cancelable&&n.preventDefault(),i=closest(i,t.draggable,a,!0),x("dragOver"),Sortable.eventCanceled)return f;if(dragEl.contains(n.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return C(!1);if(ignoreNextClick=!1,s&&!t.disabled&&(c?u||(o=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,s,dragEl,n))&&e.checkPut(this,s,dragEl,n))){if(l="vertical"===this._getDirection(n,i),r=getRect(dragEl),x("dragOverValid"),Sortable.eventCanceled)return f;if(o)return parentEl=rootEl,O(),this._hideClone(),x("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),C(!0);var g=lastChild(a,t.draggable);if(!g||_ghostIsLast(n,l,this)&&!g.animated){if(g===dragEl)return C(!1);if((i=g&&a===n.target?g:i)&&(E=getRect(i)),!1!==_onMove(rootEl,a,dragEl,r,i,E,n,!!i))return O(),g&&g.nextSibling?a.insertBefore(dragEl,g.nextSibling):a.appendChild(dragEl),parentEl=a,D(),C(!0)}else if(g&&_ghostIsFirst(n,l,this)){var m=getChild(a,0,t,!0);if(m===dragEl)return C(!1);if(E=getRect(i=m),!1!==_onMove(rootEl,a,dragEl,r,i,E,n,!1))return O(),a.insertBefore(dragEl,m),parentEl=a,D(),C(!0)}else if(i.parentNode===a){var v,h,b,E=getRect(i),y=dragEl.parentNode!==a,_=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||r,i.animated&&i.toRect||E,l),w=l?"top":"left",e=isScrolledPast(i,"top","top")||isScrolledPast(dragEl,"top","top"),g=e?e.scrollTop:void 0;if(lastTarget!==i&&(h=E[w],pastFirstInvertThresh=!1,isCircumstantialInvert=!_&&t.invertSwap||y),0!==(v=_getSwapDirection(n,i,E,l,_?1:t.swapThreshold,null==t.invertedSwapThreshold?t.swapThreshold:t.invertedSwapThreshold,isCircumstantialInvert,lastTarget===i)))for(var S=index(dragEl);(b=parentEl.children[S-=v])&&("none"===css(b,"display")||b===ghostEl););if(0===v||b===i)return C(!1);lastDirection=v;m=(lastTarget=i).nextElementSibling,y=!1,_=_onMove(rootEl,a,dragEl,r,i,E,n,y=1===v);if(!1!==_)return 1!==_&&-1!==_||(y=1===_),_silent=!0,setTimeout(_unsilent,30),O(),y&&!m?a.appendChild(dragEl):i.parentNode.insertBefore(dragEl,y?m:i),e&&scrollBy(e,0,g-e.scrollTop),parentEl=dragEl.parentNode,void 0===h||isCircumstantialInvert||(targetMoveDistance=Math.abs(h-getRect(i)[w])),D(),C(!0)}if(a.contains(dragEl))return C(!1)}return!1}function x(e,t){pluginEvent(e,p,_objectSpread2({evt:n,isOwner:c,axis:l?"vertical":"horizontal",revert:o,dragRect:r,targetRect:E,canSort:u,fromSortable:d,target:i,completed:C,onMove:function(e,t){return _onMove(rootEl,a,dragEl,r,e,getRect(e),n,t)},changed:D},t))}function O(){x("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function C(e){return x("dragOverCompleted",{insertion:e}),e&&(c?s._hideClone():s._showClone(p),p!==d&&(toggleClass(dragEl,(putSortable||s).options.ghostClass,!1),toggleClass(dragEl,t.ghostClass,!0)),putSortable!==p&&p!==Sortable.active?putSortable=p:p===Sortable.active&&putSortable&&(putSortable=null),d===p&&(p._ignoreWhileAnimating=i),p.animateAll(function(){x("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(i===dragEl&&!dragEl.animated||i===a&&!i.animated)&&(lastTarget=null),t.dragoverBubble||n.rootEl||i===document||(dragEl.parentNode[expando]._isOutsideThisEl(n.target),e||nearestEmptyInsertDetectEvent(n)),!t.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),f=!0}function D(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,t.draggable),_dispatchEvent({sortable:p,name:"change",toEl:a,newIndex:newIndex,newDraggableIndex:newDraggableIndex,originalEvent:n})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;newIndex=index(dragEl),newDraggableIndex=index(dragEl,n.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,n.draggable),Sortable.eventCanceled||(pastFirstInvertThresh=isCircumstantialInvert=awaitingDragStarted=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),n.dropBubble||e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&"clone"!==putSortable.lastPutMode)&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,(putSortable||this).options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(0<=newIndex&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&0<=newIndex&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&(null!=newIndex&&-1!==newIndex||(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,o=n.length,l=this.options;r<o;r++)closest(e=n[r],l.draggable,this.el,!1)&&t.push(e.getAttribute(l.dataIdAttr)||_generateId(e));return t},sort:function(e,t){var n={},r=this.el;this.toArray().forEach(function(e,t){t=r.children[t];closest(t,this.options.draggable,r,!1)&&(n[e]=t)},this),t&&this.captureAnimationState(),e.forEach(function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=PluginManager.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&_prepareGroup(n)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){cloneHidden||(pluginEvent("hideClone",this),Sortable.eventCanceled||(css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0))},_showClone:function(e){"clone"===e.lastPutMode?cloneHidden&&(pluginEvent("showClone",this),Sortable.eventCanceled||(dragEl.parentNode!=rootEl||this.options.group.revertClone?nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl):rootEl.insertBefore(cloneEl,dragEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1)):this._hideClone()}},documentExists&&on(document,"touchmove",function(e){(Sortable.active||awaitingDragStarted)&&e.cancelable&&e.preventDefault()}),Sortable.utils={on:on,off:off,css:css,find:find,is:function(e,t){return!!closest(e,t,e,!1)},extend:extend,throttle:throttle,closest:closest,toggleClass:toggleClass,clone:clone,index:index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild:getChild},Sortable.get=function(e){return e[expando]},Sortable.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];(t=t[0].constructor===Array?t[0]:t).forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),e.utils)),PluginManager.mount(e)})},Sortable.create=function(e,t){return new Sortable(e,t)},Sortable.version=version;var scrollEl,scrollRootEl,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval,autoScrolls=[],scrolling=!1;function AutoScrollPlugin(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){e=e.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):e.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){e=e.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(t,n){var r,o=this,l=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,e=document.elementFromPoint(l,a);touchEvt$1=t,n||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari?(autoScroll(t,this.options,e,n),r=getParentAutoScrollElement(e,!0),!scrolling||pointerElemChangedInterval&&l===lastAutoScrollX&&a===lastAutoScrollY||(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var e=getParentAutoScrollElement(document.elementFromPoint(l,a),!0);e!==r&&(r=e,clearAutoScrolls()),autoScroll(t,o.options,e,n)},10),lastAutoScrollX=l,lastAutoScrollY=a)):this.options.bubbleScroll&&getParentAutoScrollElement(e,!0)!==getWindowScrollingElement()?autoScroll(t,this.options,getParentAutoScrollElement(e,!1),!1):clearAutoScrolls()}},_extends(e,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(e){clearInterval(e.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var lastSwapEl,autoScroll=throttle(function(n,e,t,r){if(e.scroll){var o,l=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,i=e.scrollSensitivity,s=e.scrollSpeed,c=getWindowScrollingElement(),u=!1;scrollRootEl!==t&&(scrollRootEl=t,clearAutoScrolls(),scrollEl=e.scroll,o=e.scrollFn,!0===scrollEl&&(scrollEl=getParentAutoScrollElement(t,!0)));var d=0,p=scrollEl;do{var f=p,g=getRect(f),m=g.top,v=g.bottom,h=g.left,b=g.right,E=g.width,y=g.height,_=void 0,w=void 0,S=f.scrollWidth,x=f.scrollHeight,O=css(f),C=f.scrollLeft,g=f.scrollTop,w=f===c?(_=E<S&&("auto"===O.overflowX||"scroll"===O.overflowX||"visible"===O.overflowX),y<x&&("auto"===O.overflowY||"scroll"===O.overflowY||"visible"===O.overflowY)):(_=E<S&&("auto"===O.overflowX||"scroll"===O.overflowX),y<x&&("auto"===O.overflowY||"scroll"===O.overflowY)),C=_&&(Math.abs(b-l)<=i&&C+E<S)-(Math.abs(h-l)<=i&&!!C),g=w&&(Math.abs(v-a)<=i&&g+y<x)-(Math.abs(m-a)<=i&&!!g);if(!autoScrolls[d])for(var D=0;D<=d;D++)autoScrolls[D]||(autoScrolls[D]={});autoScrolls[d].vx==C&&autoScrolls[d].vy==g&&autoScrolls[d].el===f||(autoScrolls[d].el=f,autoScrolls[d].vx=C,autoScrolls[d].vy=g,clearInterval(autoScrolls[d].pid),0==C&&0==g||(u=!0,autoScrolls[d].pid=setInterval(function(){r&&0===this.layer&&Sortable.active._onTouchMove(touchEvt$1);var e=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*s:0,t=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*s:0;"function"==typeof o&&"continue"!==o.call(Sortable.dragged.parentNode[expando],t,e,n,touchEvt$1,autoScrolls[this.layer].el)||scrollBy(autoScrolls[this.layer].el,t,e)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&p!==c&&(p=getParentAutoScrollElement(p,!1)));scrolling=u}},30),drop=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,o=e.activeSortable,l=e.dispatchSortableEvent,a=e.hideGhostForTarget,e=e.unhideGhostForTarget;t&&(o=n||o,a(),t=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,t=document.elementFromPoint(t.clientX,t.clientY),e(),o&&!o.el.contains(t)&&(l("spill"),this.onSpill({dragEl:r,putSortable:n})))};function Revert(){}function Remove(){}function SwapPlugin(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){e=e.dragEl;lastSwapEl=e},dragOverValid:function(e){var t=e.completed,n=e.target,r=e.onMove,o=e.activeSortable,l=e.changed,a=e.cancel;o.options.swap&&(e=this.sortable.el,o=this.options,n&&n!==e&&(e=lastSwapEl,lastSwapEl=!1!==r(n)?(toggleClass(n,o.swapClass,!0),n):null,e&&e!==lastSwapEl&&toggleClass(e,o.swapClass,!1)),l(),t(!0),a())},drop:function(e){var t=e.activeSortable,n=e.putSortable,r=e.dragEl,o=n||this.sortable,e=this.options;lastSwapEl&&toggleClass(lastSwapEl,e.swapClass,!1),lastSwapEl&&(e.swap||n&&n.options.swap)&&r!==lastSwapEl&&(o.captureAnimationState(),o!==t&&t.captureAnimationState(),swapNodes(r,lastSwapEl),o.animateAll(),o!==t&&t.animateAll())},nulling:function(){lastSwapEl=null}},_extends(e,{pluginName:"swap",eventProperties:function(){return{swapItem:lastSwapEl}}})}function swapNodes(e,t){var n,r,o=e.parentNode,l=t.parentNode;o&&l&&!o.isEqualNode(t)&&!l.isEqualNode(e)&&(n=index(e),r=index(t),o.isEqualNode(l)&&n<r&&r++,o.insertBefore(t,o.children[n]),l.insertBefore(e,l.children[r]))}Revert.prototype={startIndex:null,dragStart:function(e){e=e.oldDraggableIndex;this.startIndex=e},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();e=getChild(this.sortable.el,this.startIndex,this.options);e?this.sortable.el.insertBefore(t,e):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:drop},_extends(Revert,{pluginName:"revertOnSpill"}),Remove.prototype={onSpill:function(e){var t=e.dragEl,e=e.putSortable||this.sortable;e.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),e.animateAll()},drop:drop},_extends(Remove,{pluginName:"removeOnSpill"});var lastMultiDragSelect,multiDragSortable,dragEl$1,clonesFromRect,clonesHidden,multiDragElements=[],multiDragClones=[],initialFolding=!1,folding=!1,dragStarted=!1;function MultiDragPlugin(){function e(r){for(var e in this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this));r.options.avoidImplicitDeselect||(r.options.supportPointer?on(document,"pointerup",this._deselectMultiDrag):(on(document,"mouseup",this._deselectMultiDrag),on(document,"touchend",this._deselectMultiDrag))),on(document,"keydown",this._checkKeyDown),on(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(e,t){var n="";multiDragElements.length&&multiDragSortable===r?multiDragElements.forEach(function(e,t){n+=(t?", ":"")+e.textContent}):n=t.textContent,e.setData("Text",n)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){e=e.dragEl;dragEl$1=e},delayEnded:function(){this.isMultiDrag=~multiDragElements.indexOf(dragEl$1)},setupClone:function(e){var t=e.sortable,e=e.cancel;if(this.isMultiDrag){for(var n=0;n<multiDragElements.length;n++)multiDragClones.push(clone(multiDragElements[n])),multiDragClones[n].sortableIndex=multiDragElements[n].sortableIndex,multiDragClones[n].draggable=!1,multiDragClones[n].style["will-change"]="",toggleClass(multiDragClones[n],this.options.selectedClass,!1),multiDragElements[n]===dragEl$1&&toggleClass(multiDragClones[n],this.options.chosenClass,!1);t._hideClone(),e()}},clone:function(e){var t=e.sortable,n=e.rootEl,r=e.dispatchSortableEvent,e=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||multiDragElements.length&&multiDragSortable===t&&(insertMultiDragClones(!0,n),r("clone"),e()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,e=e.cancel;this.isMultiDrag&&(insertMultiDragClones(!1,n),multiDragClones.forEach(function(e){css(e,"display","")}),t(),clonesHidden=!1,e())},hideClone:function(e){var t=this;e.sortable;var n=e.cloneNowHidden,e=e.cancel;this.isMultiDrag&&(multiDragClones.forEach(function(e){css(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)}),n(),clonesHidden=!0,e())},dragStartGlobal:function(e){e.sortable,!this.isMultiDrag&&multiDragSortable&&multiDragSortable.multiDrag._deselectMultiDrag(),multiDragElements.forEach(function(e){e.sortableIndex=index(e)}),multiDragElements=multiDragElements.sort(function(e,t){return e.sortableIndex-t.sortableIndex}),dragStarted=!0},dragStarted:function(e){var t,n=this,e=e.sortable;this.isMultiDrag&&(this.options.sort&&(e.captureAnimationState(),this.options.animation&&(multiDragElements.forEach(function(e){e!==dragEl$1&&css(e,"position","absolute")}),t=getRect(dragEl$1,!1,!0,!0),multiDragElements.forEach(function(e){e!==dragEl$1&&setRect(e,t)}),initialFolding=folding=!0)),e.animateAll(function(){initialFolding=folding=!1,n.options.animation&&multiDragElements.forEach(function(e){unsetRect(e)}),n.options.sort&&removeMultiDragElements()}))},dragOver:function(e){var t=e.target,n=e.completed,e=e.cancel;folding&&~multiDragElements.indexOf(t)&&(n(!1),e())},revert:function(e){var t=e.fromSortable,n=e.rootEl,r=e.sortable,o=e.dragRect;1<multiDragElements.length&&(multiDragElements.forEach(function(e){r.addAnimationState({target:e,rect:folding?getRect(e):o}),unsetRect(e),e.fromRect=o,t.removeAnimationState(e)}),folding=!1,insertMultiDragElements(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t,n=e.sortable,r=e.isOwner,o=e.insertion,l=e.activeSortable,a=e.parentEl,i=e.putSortable,e=this.options;o&&(r&&l._hideClone(),initialFolding=!1,e.animation&&1<multiDragElements.length&&(folding||!r&&!l.options.sort&&!i)&&(t=getRect(dragEl$1,!1,!0,!0),multiDragElements.forEach(function(e){e!==dragEl$1&&(setRect(e,t),a.appendChild(e))}),folding=!0),r||(folding||removeMultiDragElements(),1<multiDragElements.length?(r=clonesHidden,l._showClone(n),l.options.animation&&!clonesHidden&&r&&multiDragClones.forEach(function(e){l.addAnimationState({target:e,rect:clonesFromRect}),e.fromRect=clonesFromRect,e.thisAnimationDuration=null})):l._showClone(n)))},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,e=e.activeSortable;multiDragElements.forEach(function(e){e.thisAnimationDuration=null}),e.options.animation&&!n&&e.multiDrag.isMultiDrag&&(clonesFromRect=_extends({},t),t=matrix(dragEl$1,!0),clonesFromRect.top-=t.f,clonesFromRect.left-=t.e)},dragOverAnimationComplete:function(){folding&&(folding=!1,removeMultiDragElements())},drop:function(e){var t=e.originalEvent,n=e.rootEl,r=e.parentEl,o=e.sortable,l=e.dispatchSortableEvent,a=e.oldIndex,i=e.putSortable,s=i||this.sortable;if(t){var c,u,d,p=this.options,f=r.children;if(!dragStarted)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),toggleClass(dragEl$1,p.selectedClass,!~multiDragElements.indexOf(dragEl$1)),~multiDragElements.indexOf(dragEl$1))multiDragElements.splice(multiDragElements.indexOf(dragEl$1),1),lastMultiDragSelect=null,dispatchEvent({sortable:o,rootEl:n,name:"deselect",targetEl:dragEl$1,originalEvent:t});else{if(multiDragElements.push(dragEl$1),dispatchEvent({sortable:o,rootEl:n,name:"select",targetEl:dragEl$1,originalEvent:t}),t.shiftKey&&lastMultiDragSelect&&o.el.contains(lastMultiDragSelect)){var g=index(lastMultiDragSelect),e=index(dragEl$1);if(~g&&~e&&g!==e)for(var m,v=g<e?(m=g,e):(m=e,g+1);m<v;m++)~multiDragElements.indexOf(f[m])||(toggleClass(f[m],p.selectedClass,!0),multiDragElements.push(f[m]),dispatchEvent({sortable:o,rootEl:n,name:"select",targetEl:f[m],originalEvent:t}))}else lastMultiDragSelect=dragEl$1;multiDragSortable=s}dragStarted&&this.isMultiDrag&&(folding=!1,(r[expando].options.sort||r!==n)&&1<multiDragElements.length&&(c=getRect(dragEl$1),u=index(dragEl$1,":not(."+this.options.selectedClass+")"),!initialFolding&&p.animation&&(dragEl$1.thisAnimationDuration=null),s.captureAnimationState(),initialFolding||(p.animation&&(dragEl$1.fromRect=c,multiDragElements.forEach(function(e){var t;e.thisAnimationDuration=null,e!==dragEl$1&&(t=folding?getRect(e):c,e.fromRect=t,s.addAnimationState({target:e,rect:t}))})),removeMultiDragElements(),multiDragElements.forEach(function(e){f[u]?r.insertBefore(e,f[u]):r.appendChild(e),u++}),a===index(dragEl$1)&&(d=!1,multiDragElements.forEach(function(e){e.sortableIndex!==index(e)&&(d=!0)}),d&&l("update"))),multiDragElements.forEach(function(e){unsetRect(e)}),s.animateAll()),multiDragSortable=s),(n===r||i&&"clone"!==i.lastPutMode)&&multiDragClones.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}},nullingGlobal:function(){this.isMultiDrag=dragStarted=!1,multiDragClones.length=0},destroyGlobal:function(){this._deselectMultiDrag(),off(document,"pointerup",this._deselectMultiDrag),off(document,"mouseup",this._deselectMultiDrag),off(document,"touchend",this._deselectMultiDrag),off(document,"keydown",this._checkKeyDown),off(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==dragStarted&&dragStarted||multiDragSortable!==this.sortable||e&&closest(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;multiDragElements.length;){var t=multiDragElements[0];toggleClass(t,this.options.selectedClass,!1),multiDragElements.shift(),dispatchEvent({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvent:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},_extends(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[expando];t&&t.options.multiDrag&&!~multiDragElements.indexOf(e)&&(multiDragSortable&&multiDragSortable!==t&&(multiDragSortable.multiDrag._deselectMultiDrag(),multiDragSortable=t),toggleClass(e,t.options.selectedClass,!0),multiDragElements.push(e))},deselect:function(e){var t=e.parentNode[expando],n=multiDragElements.indexOf(e);t&&t.options.multiDrag&&~n&&(toggleClass(e,t.options.selectedClass,!1),multiDragElements.splice(n,1))}},eventProperties:function(){var n=this,r=[],o=[];return multiDragElements.forEach(function(e){var t;r.push({multiDragElement:e,index:e.sortableIndex}),t=folding&&e!==dragEl$1?-1:folding?index(e,":not(."+n.options.selectedClass+")"):index(e),o.push({multiDragElement:e,index:t})}),{items:_toConsumableArray(multiDragElements),clones:[].concat(multiDragClones),oldIndicies:r,newIndicies:o}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":1<e.length&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function insertMultiDragElements(n,r){multiDragElements.forEach(function(e,t){t=r.children[e.sortableIndex+(n?Number(t):0)];t?r.insertBefore(e,t):r.appendChild(e)})}function insertMultiDragClones(n,r){multiDragClones.forEach(function(e,t){t=r.children[e.sortableIndex+(n?Number(t):0)];t?r.insertBefore(e,t):r.appendChild(e)})}function removeMultiDragElements(){multiDragElements.forEach(function(e){e!==dragEl$1&&e.parentNode&&e.parentNode.removeChild(e)})}Sortable.mount(new AutoScrollPlugin),Sortable.mount(Remove,Revert);var sortable_esm=Object.freeze({__proto__:null,default:Sortable,MultiDrag:MultiDragPlugin,Sortable:Sortable,Swap:SwapPlugin}),require$$0=getAugmentedNamespace(sortable_esm),isProduction="production"===process.env.NODE_ENV,prefix="Invariant failed";function invariant(e,t){if(!e){if(isProduction)throw new Error(prefix);t="function"==typeof t?t():t;throw new Error(t?prefix+": "+t:prefix)}}var getRandomValues,tinyInvariant_esm=Object.freeze({__proto__:null,default:invariant}),require$$3=getAugmentedNamespace(tinyInvariant_esm);!function(e){var t=require$$0,c=classNames,u=React,a=require$$3;function d(e){return e&&e.__esModule?e.default:e}function n(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function r(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function i(e){e.forEach(e=>r(e.element))}function s(e){e.forEach(e=>{var t,n;t=e.parentElement,n=e.element,e=e.oldIndex,e=t.children[e]||null,t.insertBefore(n,e)})}function p(n,e){var t=g(n);const r={parentElement:n.from};let o=[];switch(t){case"normal":var l={element:n.item,newIndex:n.newIndex,oldIndex:n.oldIndex,parentElement:n.from};o=[l];break;case"swap":var a={element:n.item,oldIndex:n.oldIndex,newIndex:n.newIndex,...r},l={element:n.swapItem,oldIndex:n.newIndex,newIndex:n.oldIndex,...r};o=[a,l];break;case"multidrag":o=n.oldIndicies.map((e,t)=>({element:e.multiDragElement,oldIndex:e.index,newIndex:n.newIndicies[t].index,...r}))}return function(e,t){e=e.map(e=>({...e,item:t[e.oldIndex]})).sort((e,t)=>e.oldIndex-t.oldIndex);return e}(o,e)}function f(e,t){const n=[...t];return e.concat().reverse().forEach(e=>n.splice(e.oldIndex,1)),n}function l(e,t,n,r){const o=[...t];return e.forEach(e=>{var t=r&&n&&r(e.item,n);o.splice(e.newIndex,0,t||e.item)}),o}function g(e){return e.oldIndicies&&0<e.oldIndicies.length?"multidrag":e.swapItem?"swap":"normal"}n(e.exports,"Sortable",()=>$882b6d93070905b3$re_export$Sortable),n(e.exports,"Direction",()=>$882b6d93070905b3$re_export$Direction),n(e.exports,"DOMRect",()=>$882b6d93070905b3$re_export$DOMRect),n(e.exports,"GroupOptions",()=>$882b6d93070905b3$re_export$GroupOptions),n(e.exports,"MoveEvent",()=>$882b6d93070905b3$re_export$MoveEvent),n(e.exports,"Options",()=>$882b6d93070905b3$re_export$Options),n(e.exports,"PullResult",()=>$882b6d93070905b3$re_export$PullResult),n(e.exports,"PutResult",()=>$882b6d93070905b3$re_export$PutResult),n(e.exports,"SortableEvent",()=>$882b6d93070905b3$re_export$SortableEvent),n(e.exports,"SortableOptions",()=>$882b6d93070905b3$re_export$SortableOptions),n(e.exports,"Utils",()=>$882b6d93070905b3$re_export$Utils),n(e.exports,"ReactSortable",()=>o);const m={dragging:null};class o extends u.Component{static defaultProps={clone:e=>e};constructor(e){super(e),this.ref=(0,u.createRef)();var t=[...e.list].map(e=>Object.assign(e,{chosen:!1,selected:!1}));e.setList(t,this.sortable,m),d(a)(!e.plugins,`
Plugins prop is no longer supported.
Instead, mount it with "Sortable.mount(new MultiDrag())"
Please read the updated README.md at https://github.com/SortableJS/react-sortablejs.
      `)}componentDidMount(){var e;null!==this.ref.current&&(e=this.makeOptions(),d(t).create(this.ref.current,e))}componentDidUpdate(e){e.disabled!==this.props.disabled&&this.sortable&&this.sortable.option("disabled",this.props.disabled)}render(){var{tag:e,style:t,className:n,id:r}=this.props;return(0,u.createElement)(e&&null!==e?e:"div",{ref:this.ref,...{style:t,className:n,id:r}},this.getChildren())}getChildren(){const{children:e,dataIdAttr:t,selectedClass:o="sortable-selected",chosenClass:l="sortable-chosen",filter:a="sortable-filter",list:i}=this.props;if(!e||null==e)return null;const s=t||"data-id";return u.Children.map(e,(e,t)=>{if(void 0!==e){var n=i[t]||{},r=e.props["className"],t="string"==typeof a&&{[a.replace(".","")]:!!n.filtered},t=d(c)(r,{[o]:n.selected,[l]:n.chosen,...t});return(0,u.cloneElement)(e,{[s]:e.key,className:t})}})}get sortable(){var e=this.ref.current;if(null===e)return null;var t=Object.keys(e).find(e=>e.includes("Sortable"));return t?e[t]:null}makeOptions(){const t=function(e){const{list:t,setList:n,children:r,tag:o,style:l,className:a,clone:i,onAdd:s,onChange:c,onChoose:u,onClone:d,onEnd:p,onFilter:f,onRemove:g,onSort:m,onStart:v,onUnchoose:h,onUpdate:b,onMove:E,onSpill:y,onSelect:_,onDeselect:w,...S}=e;return S}(this.props);["onAdd","onChoose","onDeselect","onEnd","onRemove","onSelect","onSpill","onStart","onUnchoose","onUpdate"].forEach(e=>t[e]=this.prepareOnHandlerPropAndDOM(e)),["onChange","onClone","onFilter","onSort"].forEach(e=>t[e]=this.prepareOnHandlerProp(e));return{...t,onMove:(e,t)=>{const n=this.props["onMove"];var r=e.willInsertAfter||-1;if(!n)return r;t=n(e,t,this.sortable,m);return void 0!==t&&t}}}prepareOnHandlerPropAndDOM(t){return e=>{this.callOnHandlerProp(e,t),this[t](e)}}prepareOnHandlerProp(t){return e=>{this.callOnHandlerProp(e,t)}}callOnHandlerProp(e,t){const n=this.props[t];n&&n(e,this.sortable,m)}onAdd(e){const{list:t,setList:n,clone:r}=this.props;var o=p(e,[...m.dragging.props.list]);i(o);e=l(o,t,e,r).map(e=>Object.assign(e,{selected:!1}));n(e,this.sortable,m)}onRemove(n){const{list:e,setList:t}=this.props;var r=g(n);const o=p(n,e);s(o);let l=[...e];if("clone"!==n.pullMode)l=f(o,l);else{let e=o;switch(r){case"multidrag":e=o.map((e,t)=>({...e,element:n.clones[t]}));break;case"normal":e=o.map(e=>({...e,element:n.clone}));break;default:d(a)(!0,`mode "${r}" cannot clone. Please remove "props.clone" from <ReactSortable/> when using the "${r}" plugin`)}i(e),o.forEach(e=>{var t=e.oldIndex,e=this.props.clone(e.item,n);l.splice(t,1,e)})}l=l.map(e=>Object.assign(e,{selected:!1})),t(l,this.sortable,m)}onUpdate(e){const{list:t,setList:n}=this.props;e=p(e,t);i(e),s(e);e=l(e,f(e,t));return n(e,this.sortable,m)}onStart(){m.dragging=this}onEnd(){m.dragging=null}onChoose(r){const{list:e,setList:t}=this.props;var n=e.map((e,t)=>{let n=e;return t===r.oldIndex&&(n=Object.assign(e,{chosen:!0})),n});t(n,this.sortable,m)}onUnchoose(r){const{list:e,setList:t}=this.props;var n=e.map((e,t)=>{let n=e;return t===r.oldIndex&&(n=Object.assign(n,{chosen:!1})),n});t(n,this.sortable,m)}onSpill(e){var{removeOnSpill:t,revertOnSpill:n}=this.props;t&&!n&&r(e.item)}onSelect(n){const{list:e,setList:t}=this.props,r=e.map(e=>Object.assign(e,{selected:!1}));n.newIndicies.forEach(e=>{var t=e.index;if(-1===t)return console.log(`"${n.type}" had indice of "${e.index}", which is probably -1 and doesn't usually happen here.`),void console.log(n);r[t].selected=!0}),t(r,this.sortable,m)}onDeselect(e){const{list:t,setList:n}=this.props,r=t.map(e=>Object.assign(e,{selected:!1}));e.newIndicies.forEach(e=>{e=e.index;-1!==e&&(r[e].selected=!0)}),n(r,this.sortable,m)}}var v,h;v=e.exports,h={},Object.keys(h).forEach(function(e){"default"===e||"__esModule"===e||v.hasOwnProperty(e)||Object.defineProperty(v,e,{enumerable:!0,get:function(){return h[e]}})})}(dist);var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(e){return"string"==typeof e&&REGEX.test(e)}for(var byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=(byteToHex[e[t+0]]+byteToHex[e[t+1]]+byteToHex[e[t+2]]+byteToHex[e[t+3]]+"-"+byteToHex[e[t+4]]+byteToHex[e[t+5]]+"-"+byteToHex[e[t+6]]+byteToHex[e[t+7]]+"-"+byteToHex[e[t+8]]+byteToHex[e[t+9]]+"-"+byteToHex[e[t+10]]+byteToHex[e[t+11]]+byteToHex[e[t+12]]+byteToHex[e[t+13]]+byteToHex[e[t+14]]+byteToHex[e[t+15]]).toLowerCase();if(!validate(t))throw TypeError("Stringified UUID is invalid");return t}function v4(e,t,n){var r=(e=e||{}).random||(e.rng||rng)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return stringify(r)}function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty$1(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Repeater=function(e){var r=e.name;e.value;var t=e.button,n=e.fields,o=useBuilderContext(),e=_slicedToArray(useState(null===(e=o.values)||void 0===e?void 0:e[r]),2),l=e[0],a=e[1];useEffect(function(){var e;null!=(null===(e=o.values)||void 0===e?void 0:e[r])&&a(null===(e=o.values)||void 0===e?void 0:e[r])},[null===(e=o.values)||void 0===e?void 0:e[r]]);var i=useCallback(function(e){var t=_toConsumableArray$1(l);t.splice(e,1),o.setFieldValue(r,t)},[l]),s=useCallback(function(e){var t=_toConsumableArray$1(l);0<t.length&&(null!==(e=null!==(e=null!==(e=null!==(e=(null==t?void 0:t[e])||{})&&void 0!==e&&e.title?_objectSpread(_objectSpread({},e),{},{title:e.title+" - Copy"}):e)&&void 0!==e&&e.post_title?_objectSpread(_objectSpread({},e),{},{post_title:e.post_title+" - Copy"}):e)&&void 0!==e&&e.username?_objectSpread(_objectSpread({},e),{},{username:e.username+" - Copy"}):e)&&void 0!==e&&e.plugin_theme_name&&(e=_objectSpread(_objectSpread({},e),{},{plugin_theme_name:e.plugin_theme_name+" - Copy"})),e=_objectSpread(_objectSpread({},e),{},{index:v4(),isCollapsed:!1}),o.setFieldValue([r,l.length],e))},[l]);return useEffect(function(){a(null==l?[{index:v4()}]:function(e){return e.map(function(e){return _objectSpread(_objectSpread({},e),{},{index:v4()})})})},[]),createElement("div",{className:"wprf-repeater-control"},l&&0<(null==l?void 0:l.length)&&createElement(dist.exports.ReactSortable,{className:"wprf-repeater-content",list:l,setList:function(e){o.setFieldValue(r,e)},handle:".wprf-repeater-field-title",filter:".wprf-repeater-field-controls",forceFallback:!0},l.map(function(e,t){return createElement(RepeaterField,{isCollapsed:null==e?void 0:e.isCollapsed,key:(null==e?void 0:e.index)||t,fields:n,index:t,parent:r,clone:s,remove:i,onChange:function(e){return function(e,t){e.persist&&e.persist();var n=executeChange(e),e=n.field,n=n.val;o.setFieldValue([r,t,e],n)}(e,t)}})})),createElement("div",{className:"wprf-repeater-label"},createElement("button",{className:"wprf-repeater-button",onClick:function(){return o.setFieldValue(r,[].concat(_toConsumableArray$1(l),[{index:v4()}]))}},null==t?void 0:t.label)))},Slider=function(t){var n=t.name,e=t.id,r=t.label,o=t.units,l=t.value,a=t.min,i=t.max,s=t.unit;t.tooltip;var c=t.reset,l=_slicedToArray(useState(l||0),2),u=l[0],d=l[1],s=_slicedToArray(useState(s),2),p=s[0],f=s[1];return useEffect(function(){var e;u&&(isNumber(u)?e=p?"".concat(u).concat(p):"".concat(u):isString(u)&&(e=-1<u.indexOf(p)?"".concat(u):"".concat(u).concat(p)),t.onChange({target:{type:"slider",name:n,value:e}}))},[u,p]),createElement("div",{className:"wprf-slider-wrap"},createElement("div",{className:"wprf-slider-control-head"},createElement(Label,{htmlFor:e||n},r),isArray(o)&&0<o.length&&createElement("div",{className:"wprf-slider-units"},o.map(function(e,t){return createElement(Button$2,{key:t,isSmall:!0,isPrimary:!0,onClick:function(){return f(e)},className:e==p?"unit-active":""},e)}))),createElement("div",{className:"wprf-slider-control"},createElement(RangeControl,{allowReset:null==c||c,value:parseInt(u),min:a,max:i,onChange:function(e){return d(e)}})))},ColorPicker=function(e){var t=e.value,n=e.name,r=e.id,o=e.onChange,e=_slicedToArray(useState(!1),2),l=e[0],a=e[1],e=_slicedToArray(useState(t||null),2),i=e[0],s=e[1],e=_slicedToArray(useState(null),2),c=e[0],u=e[1],e=useRef(null);useEffect(function(){u(t)},[]);var d;return useEffect(function(){o({target:{type:"colorpicker",name:n,value:i}})},[i]),d=e,useEffect(function(){function e(e){d.current&&!d.current.contains(e.target)&&a(!1)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[d]),createElement(Fragment,null,createElement("div",{className:"wprf-colorpicker-wrap",ref:e},createElement("input",{type:"hidden",value:t,name:n,id:r}),createElement("span",{className:"wprf-picker-display",style:{backgroundColor:t,borderColor:t},onClick:function(){return a(!l)}}),l&&createElement(Fragment,null,createElement("button",{className:"wprf-colorpicker-reset",onClick:function(e){e.preventDefault(),s(c),a(!1)}},__("Reset","notificationx")),createElement(ColorPicker$2,{color:t,onChangeComplete:function(e){return s(e.hex)}}))))},ColorPicker$1=withLabel(ColorPicker),Action=function(e){return createElement(Fragment,null,applyFilters(e.action,"",e))},Media=function(t){var e=_slicedToArray(useState(null!==(e=t.value)&&void 0!==e&&e.url?t.value:null),2),n=e[0],r=e[1];return useEffect(function(){t.onChange({target:{type:"media",name:t.name,value:n}})},[n]),createElement("div",{className:"wprf-control wprf-media"},null!=n&&!(null!=t&&t.notImage)&&createElement("div",{className:"wprf-image-preview"},null!=n&&(null==n?void 0:n.url)&&createElement("img",{src:n.url,alt:n.title})),createElement("div",{className:"wprf-image-uploader"},createElement(MediaUpload,{onSelect:function(e){r({id:e.id,title:e.title,url:e.url})},multiple:!1,allowedTypes:["image"],value:n,render:function(e){e=e.open;return createElement(Fragment,null,null!=n&&createElement("button",{className:"wprf-btn wprf-image-remove-btn",onClick:function(){return r(null)}},(null==t?void 0:t.remove)||"Remove"),createElement("button",{className:"wprf-btn wprf-image-upload-btn",onClick:e},null!=n?(null==t?void 0:t.reset)||"Change Image":(null==t?void 0:t.button)||"Upload"))}})))},Media$1=withLabel(Media),Editor=function(n){var e=_slicedToArray(useState(EditorState.createEmpty()),2),t=e[0],r=e[1];return useEffect(function(){var e,t;n.value&&(e=(t=htmlToDraft(n.value)).contentBlocks,t=t.entityMap,t=ContentState.createFromBlockArray(e,t),t=EditorState.createWithContent(t),r(t))},[]),useEffect(function(){var e=draftToHtml(convertToRaw(t.getCurrentContent()));n.onChange({target:{type:"editor",value:e,name:n.name}})},[t]),createElement(Editor$2,{placeholder:null==n?void 0:n.placeholder,toolbar:toolbarOptions,editorState:t,toolbarClassName:"wprf-editor-toolbar",wrapperClassName:"wprf-editor wprf-control",editorClassName:"wprf-editor-main",onEditorStateChange:r})},Editor$1=withLabel(Editor),Button=function(o){var e,t,n;if((null==o||!o.text)&&!0!==(null==o?void 0:o.group))throw new Error(__("Button has a required params #text.","notificationx"));var r=validFieldProps(o,["is_pro","visible","disable","parentIndex","context","onBlur","value","ajax","text"]),l=_slicedToArray(useState(!1),2),a=l[0],i=l[1];if(null!=o&&o.href)return createElement("a",{href:-1===(null==o?void 0:o.href)?null==o?void 0:o.value:null==o?void 0:o.href,target:null==o?void 0:o.target,className:classNames("wprf-control wprf-button wprf-href-btn",null==o?void 0:o.classes)},null==o?void 0:o.text);if(null!=o&&o.group){l=o.fields.map(function(e,t){t=[].concat(_toConsumableArray$1(o.parentIndex),["fields",t]);return createElement(Field$1,_extends$2({key:e.name},e,{parentIndex:t}))});return createElement("div",{className:"wprf-control wprf-button-group wprf-flex"},l)}return createElement(Fragment,null,createElement("button",_extends$2({},r,{name:o.name,disabled:a,onClick:null!==(r=null==o?void 0:o.onClick)&&void 0!==r?r:function(e){null!=o&&o.ajax&&(i(!0),hitAAJX(o.ajax,o.context).then(function(e){var t,n,r;if(i(!1),"error"==(null==e?void 0:e.status))throw new Error(null==e?void 0:e.message);o.onChange({target:{type:"button",name:o.name,value:!0}}),null!==(e=o.ajax)&&void 0!==e&&e.hideSwal||(e=(null===(e=o.ajax)||void 0===e||null===(t=e.swal)||void 0===t?void 0:t.icon)||"success",r=(null===(t=o.ajax)||void 0===t||null===(r=t.swal)||void 0===r?void 0:r.text)||"Complete",o.context.alerts.toast(e,r,{autoClose:null===(r=o.ajax)||void 0===r||null===(n=r.swal)||void 0===n?void 0:n.autoClose})),null!==(n=o.ajax)&&void 0!==n&&n.reload&&setTimeout(function(){return window.location.reload()},1e3)}).catch(function(e){var t;console.error("Error In Button Called",o.name,e),i(!1),o.onChange({target:{type:"button",name:o.name,value:!1}}),null!==(t=o.ajax)&&void 0!==t&&t.hideSwal||o.context.alerts.toast("error",(null==e?void 0:e.message)||__("Something went wrong.","notificationx"))})),useTrigger(o)},className:classNames("wprf-control wprf-button wprf-btn",null==o?void 0:o.classes)}),isObject(null==o?void 0:o.text)&&null!=o&&o.ajax?a?null==o||null===(e=o.text)||void 0===e?void 0:e.loading:o.value?null==o||null===(t=o.text)||void 0===t?void 0:t.saved:null==o||null===(n=o.text)||void 0===n?void 0:n.normal:null==o?void 0:o.text))},Button$1=withLabel(Button),eligibleMessage=function(e){if(null!=e&&e.messages)for(var t in e.messages){t=e.messages[t];if(when(t.rules,e.context.values))return t}return{message:null==e?void 0:e.message,html:null==e?void 0:e.html,type:"normal"}},Message=function(e){var t=eligibleMessage(e),n=t.html,r=t.message,t=t.type,t=void 0===t?"warning":t;return r?createElement("div",{className:classNames("wprf-control","wprf-message","wprf-".concat(t,"-message"),"wprf-".concat(e.name,"-message"),null==e?void 0:e.classes)},n&&createElement("p",{dangerouslySetInnerHTML:{__html:r}}),!n&&createElement("p",null,r)):createElement(Fragment,null)},Modal=function(t){var e;if(null==(null==t?void 0:t.body)||null==(null==t?void 0:t.button))throw new Error(__("Modal needs button/body with it.","notificationx"));var n=_slicedToArray(useState(!1),2),r=n[0],o=n[1],l=_slicedToArray(useState(!1),2),n=l[0];l[1];function a(){return o(!1)}l=useCallback(function(){},[]);return createElement("div",{className:"wprf-control wprf-modal",id:"wprf-modal-".concat(t.name)},createElement(GenericField,_extends$2({type:"button"},null==t?void 0:t.button,{onClick:function(){return o(!0)}})),r&&createElement(SweetAlert$1,{customClass:"wprf-modal-inner",style:{maxWidth:"900px",width:"100%",overflowY:"scroll",margin:"50px auto"},closeBtnStyle:{top:"5px",right:"5px",color:"#f78c8c",fontSize:"18px",border:"1px solid #f78c8c",borderRadius:"50%",width:"30px",height:"30px",display:"inline-flex",alignItems:"center",justifyContent:"center"},title:createElement(ModalHeader,{content:null==t||null===(e=t.body)||void 0===e?void 0:e.header}),onConfirm:l,showConfirm:!1,showCloseButton:!0,closeOnClickOutside:!0,onCancel:a,afterUpdate:function(){var e;null!=t&&t.cancel&&null!==(e=t.context.values)&&void 0!==e&&e[t.cancel]&&a()}},createElement(ModalContent,_extends$2({},t,{isLoading:n,closeModal:a,context:t.context,onConfirm:l}))))},InnerContent=function(e){var t=e.fields,r=e.parentIndex,n=e.context,o=_slicedToArray(useState([]),2),l=o[0],a=o[1],e=_slicedToArray(useState([]),2),o=e[0],i=e[1];return useEffect(function(){var e=sortingFields(t);n.setFormField([r,"fields"],e),a(e)},[]),useEffect(function(){var e;isArray(l)&&0<l.length&&(e=l.map(function(e,t){var n=[r,"fields",t];return"section"===e.type?createElement(GenericField,_extends$2({key:"input-".concat(e.name,"-").concat(t)},e,{parentIndex:n})):createElement(Field$1,_extends$2({key:"input-".concat(e.name,"-").concat(t)},e,{parentIndex:n}))}),i(e))},[l]),createElement(Fragment,null,o)};function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var Submit=function(e){var t=_extends$2({},(_objectDestructuringEmpty(e),e)),n=useBuilderContext(),e=(null==t?void 0:t.label)||__("Save Changes","notificationx"),t=useCallback(function(e){var t;null!==(t=n.submit)&&void 0!==t&&t.onSubmit&&n.submit.onSubmit(e,n)},[n]);return createElement("div",{className:"wprf-submit wprf-control"},createElement(Button$2,{className:"wprf-submit-button",onClick:t},e))},SteppedButton=function(r){var e=_slicedToArray(useState(void 0),2),o=e[0],n=e[1],e=_slicedToArray(useState(void 0),2),l=e[0],a=e[1],i=useBuilderContext();return useEffect(function(){var e=r.tabs.map(function(e){return e.id}),t=e.findIndex(function(e){return e===i.config.active});-1!=t&&a(e[t-1]),t<=e.length&&n(e[t+1])},[i.config.active,r.tabs]),createElement("div",{className:"wprf-stepped-button"},Object.keys(r.config.buttons).map(function(e,t){var n;return createElement(React.Fragment,{key:"button_".concat(e,"_").concat(t)},("next"===e&&void 0!==o||"prev"===e&&void 0!==l)&&createElement(Button$2,{className:"wprf-btn wprf-step-btn-".concat(e),onClick:function(){return i.setActiveTab("next"===e?o:l)}},r.config.buttons[e]),null==o&&(null===(t=r.config.buttons)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.type)&&createElement(Field$1,null===(n=r.config.buttons)||void 0===n?void 0:n[e]))}))},SteppedButton$1=React.memo(SteppedButton),_excluded=["tabs","active","submit","config"],Content=function(e){var t,n,r,o,l,a=e.tabs,i=e.active,s=e.submit,c=e.config,u=_objectWithoutProperties$1(e,_excluded);if(void 0===a)throw new Error(__("There are no #tabs args defined in props.","notificationx"));var d=useBuilderContext();if(!isArray(a))throw new Error(__("Not an array.","notificationx"));var p=_slicedToArray(useState([]),2),e=p[0],f=p[1];return useEffect(function(){var e=a.filter(function(e){return isVisible(null==d?void 0:d.values,e)});f(e)},[a,null==d||null===(t=d.values)||void 0===t?void 0:t.source]),createElement("div",{className:classNames("wprf-tab-content-wrapper",null==d||null===(n=d.values)||void 0===n?void 0:n.source,null==d||null===(r=d.values)||void 0===r?void 0:r.themes)},createElement("div",{className:"wprf-tab-flex"},createElement("div",{className:"wprf-tab-contents"},a.map(function(e,t){if(!isVisible(null==d?void 0:d.values,e))return"";var n=classNames("wprf-tab-content","wprf-tab-".concat(null==e?void 0:e.id),{"wprf-active":i===e.id});return createElement("div",{id:null==e?void 0:e.id,className:n,key:null==e?void 0:e.id},(null==e?void 0:e.label)&&(null===(n=null==c?void 0:c.title)||void 0===n||n)&&createElement("h4",null,e.label),createElement(InnerContent,{context:d,fields:null==e?void 0:e.fields,parentIndex:t}))})),applyFilters("wprf_tab_content","",u)),(null==c||null===(o=c.step)||void 0===o?void 0:o.show)&&createElement(SteppedButton$1,{tabs:e,config:null!==(l=c.step)&&void 0!==l?l:{}}),(null===(l=null==s?void 0:s.show)||void 0===l||l)&&(null==s||!s.rules||when(null==s?void 0:s.rules,{config:c}))&&createElement(Submit,s))},Tab=function(e){var t=useBuilderContext(),n=_slicedToArray(useState(e.config.active),2),r=n[0],o=n[1];return useEffect(function(){o(t.config.active)},[t.config.active]),useEffect(function(){t.setActiveTab(r)},[r]),createElement(Fragment,null,createElement(Menu,{active:r,setActive:function(e){return o(e)},tabs:t.tabs,config:e.config,context:t}),createElement(Content,_extends$2({},e,{tabs:t.tabs,active:r,submit:null==e?void 0:e.submit,config:e.config})))};registerStore("formbuilder",store);var FormBuilder=function(e){var t=classNames("wp-react-form wprf-tabs-wrapper",null==e?void 0:e.className,{"wprf-tab-menu-as-sidebar":null===(t=e.config)||void 0===t?void 0:t.sidebar});return createElement("div",{className:t},createElement(Tab,e))};export{Action,BuilderConsumer,BuilderProvider,Button$1 as Button,CodeViewer$1 as CodeViewer,ColorPicker$1 as ColorPicker,Column,Date$1 as Date,Editor$1 as Editor,Field$1 as Field,FormBuilder,GenericField,GenericInput,Group$1 as Group,Image,Input$1 as Input,JsonUploader$1 as JsonUploader,Label,Media$1 as Media,Message,Modal,ObjectFilter,Radio,Repeater,Row,Section$1 as Section,Select$1 as Select,Slider,SweetAlert,Textarea$1 as Textarea,Toggle,_extends$1 as _extends,builderReducer,executeChange,getIn,getSelectedValues,getStoreData,getTime,hitAAJX,isArray,isEmptyObj,isExists,isFunction,isNumber,isObject,isString,isVisible,merge,objectWithoutPropertiesLoose,processAjaxData,setIn,setStoreData,sortingFields,triggerDefaults,useBuilder,useBuilderContext,useDefaults,validFieldProps,when,withLabel,withProps,withState,wpFetch};
