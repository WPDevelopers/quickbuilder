"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),data=require("@wordpress/data"),i18n=require("@wordpress/i18n"),intersect=require("intersect"),apiFetch=require("@wordpress/api-fetch"),lodashEs=require("lodash-es"),date=require("@wordpress/date"),moment=require("moment"),hooks=require("@wordpress/hooks"),classNames=require("classnames"),Swal=require("sweetalert2"),ReactSelect=require("react-select"),components=require("@wordpress/components"),copy=require("copy-to-clipboard"),reactDraftWysiwyg=require("react-draft-wysiwyg"),draftJs=require("draft-js"),draftToHtml=require("draftjs-to-html"),htmlToDraft=require("html-to-draftjs"),mediaUtils=(require("react-draft-wysiwyg/dist/react-draft-wysiwyg.css"),require("@wordpress/media-utils")),SweetAlert$1=require("react-bootstrap-sweetalert"),reactSortablejs=require("react-sortablejs"),uuid=require("uuid"),parse=require("html-react-parser"),AsyncSelect=require("react-select/async");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var React__default=_interopDefaultLegacy(React),intersect__default=_interopDefaultLegacy(intersect),apiFetch__default=_interopDefaultLegacy(apiFetch),moment__default=_interopDefaultLegacy(moment),classNames__default=_interopDefaultLegacy(classNames),Swal__default=_interopDefaultLegacy(Swal),ReactSelect__default=_interopDefaultLegacy(ReactSelect),copy__default=_interopDefaultLegacy(copy),draftToHtml__default=_interopDefaultLegacy(draftToHtml),htmlToDraft__default=_interopDefaultLegacy(htmlToDraft),SweetAlert__default=_interopDefaultLegacy(SweetAlert$1),parse__default=_interopDefaultLegacy(parse),AsyncSelect__default=_interopDefaultLegacy(AsyncSelect);function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toPrimitive(e,t){if("object"!==_typeof$1(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==_typeof$1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof$1(e)?e:String(e)}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _arrayLikeToArray$2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray$2(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray$2(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray$2(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$2(e,t):void 0}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray$2(e)||_nonIterableSpread()}function ownKeys$g(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$g(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$g(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var wpFetch=function(e){e=_objectSpread$g(_objectSpread$g({},e),{},{method:"POST"});return apiFetch__default.default(e)},isString=function(e){return null!==e&&"string"==typeof e},isNumber=function(e){return null!==e&&"number"==typeof e},isInteger=function(e){return String(Math.floor(Number(e)))===e},isFunction=function(e){return null!==e&&"function"==typeof e},isArray=function(e){return null!==e&&"object"===_typeof$1(e)&&Array.isArray(e)},isObject=function(e){return null!==e&&"object"===_typeof$1(e)&&!isArray(e)},valueExists=function(e,t){return isArray(t)?e.some(function(e){return t.includes(e)}):e.includes(t)},isVisible=function(e,t){return null==t||!t.rules||null==t.name||(t=when(t.rules,e),Boolean(t))},withState=function(e){return Boolean(["group","section"].includes(e))},isEmptyObj=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},getIn=function(e,t,n,r){void 0===r&&(r=0);for(var a=lodashEs.toPath(t);e&&r<a.length;)e=e[a[r++]];return void 0===e?n:e},sortingFields=function(e){return[].concat(e).sort(function(e,t){return null==e.priority||null==t.priority?0:e.priority>t.priority?1:-1})},getSelectedValues=function(e){return Array.from(e).filter(function(e){return e.selected}).map(function(e){return e.value})},executeChange=function(e,t){var n=t,r=e;if(!isString(e)){e.persist&&e.persist();var e=e.target||e.currentTarget,a=e.type,l=e.name,o=e.value,c=e.checked,i=e.multiple,n=t||l;switch(a){case"number":case"range":r=parseFloat(o);break;case"checkbox":r=i?o:c;break;default:r=o}}return{field:n,val:r}},objectWithoutPropertiesLoose=function(e,t){if(null==e)return{};for(var n,r={},a=Object.keys(e),l=0;l<a.length;l++)n=a[l],0<=t.indexOf(n)||(r[n]=e[n]);return r},setIn=function(e,t,n){for(var r=lodashEs.clone(e),a=r,l=0,o=lodashEs.toPath(t);l<o.length-1;l++){var c=o[l],i=getIn(e,o.slice(0,l+1));a=i&&(isObject(i)||Array.isArray(i))?a[c]=lodashEs.clone(i):(i=o[l+1],a[c]=isInteger(i)&&0<=Number(i)?[]:{})}return(0===l?e:a)[o[l]]===n?e:(void 0===n?delete a[o[l]]:a[o[l]]=n,0===l&&void 0===n&&delete r[o[l]],r)},validFieldProps=function(e){var t=e.type,n=["validation_rules","default","rules","meta","switch"].concat(_toConsumableArray(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[])),t=("select"!==t&&"checkbox-select"!==t&&"select-async"!==t&&"radio-card"!==t&&"checkbox"!==t&&"toggle"!==t&&e.multiple&&n.push("options"),"tab"!==t&&"group"!==t&&"repeater"!==t&&"section"!==t&&"button"!==t&&n.push("fields"),objectWithoutPropertiesLoose(e,n));return null==e||!e.label||null!=e&&e.placeholder||(t.placeholder=e.label),t},hitAAJX=function(l){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!==o&&l){var r,e=!0;if(e=null!=l&&l.rules?when(null==l?void 0:l.rules,o.values):e)return r={},Object.keys(l.data).map(function(e){var t,n;-1<(null==(n=(t=l.data[e]).indexOf)?void 0:n.call(t,"@"))?(n=l.data[e].substr(1),r[e]=null==(t=o.values)?void 0:t[n]):r[e]=l.data[e]}),wpFetch({path:l.api,data:r}).then(function(e){"success"==(null==e?void 0:e.status)&&null!=e&&e.redirect&&(window.location=null==e?void 0:e.redirect);var t,n,r,a=null!=e&&null!=(t=e.data)&&t.context?e.data.context:!(null==e||!e.context)&&e.context;return a&&isObject(a)&&Object.keys(a).map(function(e){o.setFieldValue(e,a[e])}),null!=e&&null!=(t=e.data)&&t.download&&(t=e.data.filename||"export.json",n=e.data.filetype||"text/json",r=e.data.filetype?e.data.download:JSON.stringify(e.data.download),downloadFile({data:r,fileName:t,fileType:n})),null!=l&&l.trigger&&isString(null==l?void 0:l.trigger)&&(r=l.trigger.indexOf("@"),t=l.trigger.indexOf(":"),0===r)&&0<t&&(n=l.trigger.substr(1,t-1),"true"==(r=l.trigger.substr(t+1))?r=!0:"false"==r&&(r=!1),o.setFieldValue(n,r)),e})}return Promise.reject(!1)},getTime=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=date.__experimentalGetSettings();return moment__default.default.utc(e||void 0).utcOffset(+(null==n||null==(e=n.timezone)?void 0:e.offset),t)},merge=function(e,t,n){var r=_toConsumableArray(e),e=t.filter(function(t){return r.findIndex(function(e){return e[n]===t[n]})<=-1});return[].concat(_toConsumableArray(r),_toConsumableArray(e))},downloadFile=function(e){var t=e.data,n=e.fileName,e=e.fileType,t=new Blob([t],{type:e}),e=document.createElement("a"),n=(e.download=n,e.href=window.URL.createObjectURL(t),new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}));e.dispatchEvent(n),e.remove()},_typeof=function(e){return("function"!=typeof Symbol||"symbol"!==_typeof$1(Symbol.iterator))&&e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof$1(e)},get=function(e,t){var n=!(2<(arguments.length<=2?0:arguments.length-2)&&void 0!==(arguments.length<=4?void 0:arguments[4]))||arguments.length<=4?void 0:arguments[4];return String.prototype.split.call(t,/[,[\].]+?/).filter(Boolean).reduce(function(e,t){return e&&Object.hasOwnProperty.call(e,t)?e[t]:n},e)},rules={is:function(e,t,n){return get(n,e)==t},"!is":function(e,t,n){return!rules.is(e,t,n)},includes:function(e,t,n){if(!isEmptyObj(n)){n=get(n,e);if("function"!=_typeof(n)){if(isArray(t)&&isArray(n))return null==(e=intersect__default.default(n,t))?void 0:e.length;if(isArray(t)&&"string"==_typeof(n))return t.includes(n);if(isArray(n)&&"string"==_typeof(t))return n.includes(t)}}return!1},"!includes":function(e,t,n){return!rules.includes(e,t,n)},isOfType:function(e,t,n){return _typeof(get(n,e))===t},"!isOfType":function(e,t,n){return!rules.isOfType(e,t,n)},allOf:function(e,t,n){var r;if(Array.isArray(t))return r=get(n,e),t.every(function(e){return r.includes(e)});throw Error(i18n.__('"allOf" condition requires an array as #3 argument',"betterdocs"))},anyOf:function(e,t,n){if(Array.isArray(t))return n=get(n,e),t.includes(n);throw Error(i18n.__('"anyOf" condition requires an array as #3 argument',"betterdocs"))},gt:function(e,t,n){return get(n,e)>t},gte:function(e,t,n){return get(n,e)>=t},lt:function(e,t,n){return get(n,e)<t},lte:function(e,t,n){return get(n,e)<=t}},logicalRules={and:function(e){return!e.includes(!1)},or:function(e){return e.includes(!0)},not:function(e){if(1!==e.length)throw Error(i18n.__('"not" can have only one comparison rule, multiple rules given',"betterdocs"));return!e[0]}},isValidCondition=function(e){return!!(Array.isArray(e)&&Array.isArray(e[1])&&e[0]&&logicalRules[e[0].toLowerCase()])},processRule=function(e,t){var n=e[0],r=e[1],e=e[2];if("string"!=typeof n||void 0===rules[n])throw Error(i18n.sprintf(i18n.__("Invalid comparison rule %s.","betterdocs"),n));return rules[n](r,e,t)},processCondition=function(e,t){return logicalRules[e.toLowerCase()](t)},validate=function(e,n){var t,r;return isValidCondition(e)?(t=e.slice(0,1)[0],r=e.slice(1).map(function(e,t){return(isValidCondition(e)?when:processRule)(e,n)}),processCondition(t,r)):processRule(e,n)},when=function(e,t){return"function"==typeof e?Promise.resolve(e(t)):validate(e,t)};function ownKeys$f(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$f(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var DEFAULT_STATE={savedValues:{type:"conversions",source:"edd"},values:{},touched:{},errors:{}},actions={setSavedValues:function(e){return{type:"SET_SAVED_VALUES",payload:e}},setFieldValue:function(e){return{type:"FIELD_VALUE",name:e.name,payload:e.value}},removeFieldValue:function(e){return{type:"REMOVE_FIELD_VALUE",payload:e}},resetFieldValue:function(e){return{type:"RESET_FIELD_VALUE",payload:e}},setFieldTouched:function(e){return{type:"FIELD_TOUCHED",payload:e}},setError:function(e){return{type:"FIELD_ERROR",payload:e}},removeError:function(e){return{type:"REMOVE_FIELD_ERROR",payload:e}}},store={reducer:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:DEFAULT_STATE,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case"SET_SAVED_VALUES":var n=_objectSpread$f({},e);return _objectSpread$f(_objectSpread$f({},n),{},{values:t.payload,savedValues:t.payload});case"FIELD_VALUE":var n=_objectSpread$f({},e),r=t.payload;return _objectSpread$f(_objectSpread$f({},n),{},{values:_objectSpread$f(_objectSpread$f({},null==(n=n)?void 0:n.values),r)});case"REMOVE_FIELD_VALUE":n=_objectSpread$f({},e),r=t.payload;return null!=(a=n.values)&&a[r]&&delete n.values[r],n;case"RESET_FIELD_VALUE":var a=_objectSpread$f({},e);return null!=(r=a.values)&&r[t.payload]&&(delete a.values[t.payload],null!=(n=a.savedValues))&&n[t.payload]&&(a.values[t.payload]=a.savedValues[t.payload]),a;case"FIELD_ERROR":return _objectSpread$f(_objectSpread$f({},e),{},{errors:_objectSpread$f(_objectSpread$f({},e.errors),t.payload)});case"REMOVE_FIELD_ERROR":r=_objectSpread$f({},e);return delete r.errors[t.payload],r;case"FIELD_TOUCHED":return _objectSpread$f(_objectSpread$f({},e),{},{touched:_objectSpread$f(_objectSpread$f({},e.touched),t.payload)})}return e},actions:actions,selectors:{getValues:function(e){return e.values},getFieldValue:function(e,t){return null==(e=e.values)?void 0:e[t]},getSavedFieldValue:function(e,t,n){var r;return(null===n||(null==(r=e.savedValues)?void 0:r[n])===(null==(r=e.values)?void 0:r[n]))&&(null==(r=e.savedValues)?void 0:r[t])},isTouched:function(e,t){return null==(e=e.touched)?void 0:e[t]},getError:function(e,t){return null==(e=e.errors)?void 0:e[t]},isVisible:function(e,t){return!t.rules||null==t.name||(t=when(t.rules,e.values),Boolean(t))}}};function _extends$1(){return(_extends$1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,o,c=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray$2(e,t)||_nonIterableRest()}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};for(var n,r={},a=Object.keys(e),l=0;l<a.length;l++)n=a[l],0<=t.indexOf(n)||(r[n]=e[n]);return r}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),l=0;l<a.length;l++)n=a[l],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}var BuilderContext=React.createContext(void 0),BuilderProvider=(BuilderContext.displayName="production"===process.env.NODE_ENV?"Anonymous":"BuilderContext",BuilderContext.Provider),BuilderConsumer=BuilderContext.Consumer;function useBuilderContext(){return React.useContext(BuilderContext)}var useOptions=function(t){var n,r,a,l,e,o,c,i,u,s,d,p,f,m,v=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"fields";if(null!=t&&t[v])return n=t.value,r=t.multiple,a=useBuilderContext(),u=_slicedToArray(React.useState(t[v]),2),l=u[0],e=u[1],u=_slicedToArray(React.useState([]),2),o=u[0],c=u[1],u=_slicedToArray(React.useState({options:null,parentIndex:null}),2),i=u[0],u=u[1],p=_slicedToArray(React.useState(null),2),s=p[0],d=p[1],p=_slicedToArray(React.useState(null),2),f=p[0],m=p[1],React.useEffect(function(){var e=t.ajax&&(null==(e=a.getTabFields(null==t?void 0:t.parentIndex))?void 0:e[v])||l;c(a.eligibleOptions(e)),d(a.eligibleOption(e,n,null!=r&&r))},[n,l]),React.useEffect(function(){e(t[v]),c(a.eligibleOptions(t[v]))},[t]),React.useEffect(function(){c(a.eligibleOptions(l))},[l]),React.useEffect(function(){null!=i.options&&e(i.options)},[i]),React.useEffect(function(){var e;null!=s&&(e=r?isArray(s)&&s.map(function(e){return e.value})||n:s.value||n,m(e))},[s]),React.useEffect(function(){var e;0===o.filter(function(e){return e.value===f}).length&&(e=sortingFields(o),m((null==e||null==(e=e[0])?void 0:e.value)||n))},[f,o]),{options:sortingFields(o),option:f,selectedOption:s,setOptions:c,setData:u,setSelectedOption:d};throw new Error("#options param need to set in order to use useOptions hook.")},useTrigger=function(e){var a=e.context;null!=e&&e.trigger&&isArray(null==e?void 0:e.trigger)&&null!=e&&e.trigger.map(function(e){var t=(null==e?void 0:e.type)||"setFieldValue";if(null!=e&&e.action&&isObject(null==e?void 0:e.action))for(var n in null==e?void 0:e.action){var r=n,n=(-1<r.indexOf(".")&&(r=r.split(".")),null==e?void 0:e.action[n]);""!=r&&a[t](r,n)}})},useDefaults=function(e,t,n,r){if(null!=r&&null!=(null==r?void 0:r.defaults)&&!isEmptyObj(r.defaults)){var a=r.defaults;if(null!=a&&!isEmptyObj(a)){var l={};if(null!=a&&a[n]&&isString(null==a?void 0:a[n])){var o,r=a[n].indexOf("@"),c=a[n].indexOf(":");0===r&&0<c&&(r=a[n].substr(1,c-1),c=a[n].substr(c+1),o=t.getValueForDefault(r,e),""!=r)&&""!=c&&(c="false"!==c&&c,l[r]=o||c,t.setValue(r,o||c))}else if(null!=a&&a[n]&&(isArray(a[n])||isObject(a[n])))for(var i in a[n]){var u,s,d=a[n][i];d&&(isArray(d)||isObject(d))?(u=t.getValueForDefault(i,e),""!=i&&""!=d&&(d="false"!==d&&d,l[i]=u||d,t.setValue(i,u||d))):d&&(i=d.indexOf("@"),u=d.indexOf(":"),0===i)&&0<u&&(i=d.substr(1,u-1),s=d.substr(u+1),-1<d.indexOf(".")&&(i=i.split(".")),d=t.getValueForDefault(i,e),""!=i)&&""!=s&&(s="false"!==s&&s,l[i]=d||s,t.setValue(i,d||s))}return{defaultsData:l}}}};function ownKeys$e(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$e(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$e(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$e(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var SweetAlert=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Swal__default.default.fire(_objectSpread$e({target:null!=(e=null==t?void 0:t.target)?e:"#betterdocs",type:null!=(e=null==t?void 0:t.type)?e:"success",html:null==t?void 0:t.html,title:null!=(e=null==t?void 0:t.title)?e:i18n.__("Title Goes Here: title","betterdocs"),text:null!=(e=null==t?void 0:t.text)?e:i18n.__("Test Goes Here: text","betterdocs"),icon:null!=(e=null==t?void 0:t.icon)?e:(null==t?void 0:t.type)||"success",timer:null!=(e=null==t?void 0:t.timer)?e:null},t))},ObjectFilter=function(t,n){var r,e,a=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return!!t&&(r={},e=Object.keys(t).filter(function(e){return n(e)}),a?e:(e.map(function(e){r[e]=t[e]}),r))},isExists=function(e,t){var n=_typeof$1(e);switch(!0){case"object"===n&&isArray(e):return e.includes(t);case"object"===n&&!isArray(e):return void 0!==(null==e?void 0:e[t]);default:return e===t}},triggerDefaults=function(e,t){var n,r,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!isEmptyObj(e)&&"object"===_typeof$1(e))for(var l in e)l===a&&(n=e[l].indexOf("@"),r=e[l].indexOf(":"),0===n)&&0<r&&(n=e[l].substr(1,r-1),l=e[l].substr(r+1),r=getStoreData().getSavedFieldValue(n,t),""!=n)&&""!=l&&setStoreData().setFieldValue({name:n,value:_defineProperty({},n,r||l)})},getStoreData=function(){return data.select("formbuilder")},setStoreData=function(){return data.dispatch("formbuilder")},processAjaxData=function(n){var r={};return Object.keys(n).map(function(e){var t;0===n[e].indexOf("@")?""!=(t=n[e].substr(1))&&(t=getStoreData().getFieldValue(t),r[e]=t||"undefined"):r[e]=n[e]}),r};function _extends(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return(Object.assign||function(e){for(var t=1;t<a.length;t++){var n,r=a[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,a)}function ownKeys$d(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$d(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$d(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var builderReducer=function(e,t){switch(t.type){case"SET_CONTEXT":return _extends({},e,setIn(e,t.payload.field,t.payload.value));case"SET_ACTIVE_TAB":return _objectSpread$d(_objectSpread$d({},e),{},{config:_objectSpread$d(_objectSpread$d({},e.config),{},{active:t.payload})});case"SET_REDIRECT":return _objectSpread$d(_objectSpread$d({},e),{},{redirect:_objectSpread$d(_objectSpread$d({},e.redirect),t.payload)});case"SET_VALUES":return _extends({},e,setIn(e,"values",t.payload));case"SET_SAVED_VALUES":return _extends({},e,setIn(e,"savedValues",t.payload));case"SET_FIELD_VALUE":return _extends({},e,{values:setIn(e.values,t.payload.field,t.payload.value)});case"SET_TOUCHED":return _extends({},e,{touched:t.payload});case"SET_ERRORS":return _extends({},e,{errors:t.payload});case"SET_STATUS":return _extends({},e,{status:t.payload});case"SET_ISSUBMITTING":return _objectSpread$d(_objectSpread$d({},e),{},{isSubmitting:t.payload});case"SET_ISVALIDATING":return _extends({},e,{isValidating:t.payload});case"SET_FIELD_TOUCHED":return _objectSpread$d(_objectSpread$d({},e),{},{touched:_objectSpread$d(_objectSpread$d({},e.touched),{},_defineProperty({},t.payload.field,t.payload.value))});case"SET_FIELD_ERROR":case"RESET_FORM":return _extends({},e,t.payload);case"SUBMIT_ATTEMPT":return _extends({},e,{isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return _extends({},e,{isSubmitting:!1});case"SET_FORM_FIELD":return null===t.payload.field?_extends({},e,setIn(e,"tabs",t.payload.value)):_extends({},e,{tabs:setIn(e.tabs,t.payload.field,t.payload.value)});case"SET_ICONS":return _extends({},e,{icons:setIn(e.icons,t.payload.name,t.payload.icons)});case"SET_ALERTS":return _extends({},e,{alerts:setIn(e.alerts,t.payload.name,t.payload.value)});case"SET_COMMONS":return _extends({},e,{common:setIn(e.common,t.payload.name,t.payload.value)});default:return e}};function ownKeys$c(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$c(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$c(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var useBuilder=function(e){var t=React.useRef(!1);React.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]);var n=_slicedToArray(React.useReducer(builderReducer,_objectSpread$c(_objectSpread$c({},e),{},{savedValues:e.savedValues||{},values:e.values||{},errors:e.initialErrors||{},touched:e.initialTouched||{},icons:e.initialIcons||{},common:{},alerts:{},tabs:sortingFields(e.tabs)})),2),i=n[0],r=n[1],n=useEventCallback(function(e,t,n){r({type:"SET_CONTEXT",payload:{field:e,value:t}})}),a=useEventCallback(function(e,t){e="function"==typeof e?e(i.values):e;return r({type:"SET_VALUES",payload:e}),void 0!==t&&t?e:Promise.resolve()}),l=useEventCallback(function(e,t){e="function"==typeof e?e(i.values):e;return r({type:"SET_SAVED_VALUES",payload:e}),void 0!==t&&t?e:Promise.resolve()}),o=useEventCallback(function(e,t,n){r({type:"SET_FIELD_VALUE",payload:{field:e,value:t}})}),c=useEventCallback(function(e,t){r({type:"SET_FORM_FIELD",payload:{field:e,value:t}})}),u=React.useCallback(function(e){return getIn(i.values,e)},[i]),s=useEventCallback(function(e,t,n){r({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t=t||!0}})}),d=React.useCallback(function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=(e.persist&&e.persist(),e.target),n=e.name,r=e.id;e.outerHTML,s(t||n||r,!0)},[s]),p=useEventCallback(function(t){if("string"==typeof t)return function(e){return d(e,t)};d(t)}),f=React.useCallback(function(e,t,n){null!=n&&n.isPro&&!1===Boolean(i.is_pro_active)||(t=(e=executeChange(e,t)).field,e=e.val,t&&(o(t,e),hooks.doAction("quickBuilder_setFieldValue",t,e,n)))},[o,i.values]),m=useEventCallback(function(t,n){var e;if(null!=n&&n.isPro&&!1===Boolean(i.is_pro_active)&&null!=(e=i.alerts)&&null!=(e=e.pro_alert(null==n?void 0:n.popup))&&e.fire(),"string"==typeof t)return function(e){return f(t,e,n)};f(t,null,n)}),v=React.useCallback(function(e){var t=_objectSpread$c({},e),n=validFieldProps(t),r=n.name,a=n.type,l=n.parent,o=n.parenttype,c=(null!=t&&t.is_pro&&(n.is_pro=!(null!=t&&t.is_pro&&!0===Boolean(i.is_pro_active))),l=l&&"group"===o?null!=(c=null==(c=null!=(c=getIn(i.values,l))?c:{})?void 0:c[r])?c:null==t?void 0:t.default:l&&"repeater"===o?null!=(c=null==(o=null!=(c=getIn(i.values,l))?c:[])||null==(l=o[n.index])?void 0:l[r])?c:null==t?void 0:t.default:null!=(o=getIn(i.values,r))?o:null==t?void 0:t.default,n.onChange=m,n.onBlur=p,n.value);return"checkbox"!==a||n.multiple?"radio"===a?(n.checked=l===c,n.value=c):n.value="date"===a&&null==l?getTime():l:(n.checked=!!l,n.value=!!l,isString(l)&&"0"===l?(n.checked=!1,n.value=!1):(n.checked=Boolean(l),n.value=Boolean(l))),n.visible=isVisible(i.values,e),n},[p,m,i.values]),b=React.useCallback(function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return n=null!==n?null==(n=getIn(i.values,n))?void 0:n[e]:getIn(i.values,e)||(null==(n=t.meta)?void 0:n.default),_objectSpread$c(_objectSpread$c({},t.meta),{},{value:n,error:getIn(i.errors,e),touched:!!getIn(i.touched,e),visible:isVisible(i.values,t),initialValue:"",initialTouched:"",initialError:""})},[i.errors,i.touched,i.values]),y=React.useCallback(function(e){return 0<e.length?e.filter(function(e){return null!=e&&e.rules?when(e.rules,i.values):e}):e},[i.errors,i.touched,i.values]),g=React.useCallback(function(e,t){var n;return e.length?(n=[],2<arguments.length&&void 0!==arguments[2]&&arguments[2]&&isArray(t)?e.filter(function(e){return t.includes(e.value)}):0<(n=e.filter(function(e){return e.value==t})).length?n[0]:""):e},[i.errors,i.touched,i.values]),_=React.useCallback(function(){return{setValue:function(e,t){return o(e,t)},getValue:function(e){return getIn(i.values,e)},getValueForDefault:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return(null===t||getIn(i.savedValues,t)===getIn(i.values,t))&&getIn(i.savedValues,e)}}},[i.errors,i.touched,i.values,i.savedValues]),w=React.useCallback(function(e){return getIn(i.tabs,e)},[i]),h=useEventCallback(function(e){r({type:"SET_ISSUBMITTING",payload:e})}),E=useEventCallback(function(e){r({type:"SET_ACTIVE_TAB",payload:e})}),R=useEventCallback(function(e){r({type:"SET_REDIRECT",payload:e})}),O=useEventCallback(function(e,t){r({type:"SET_ICONS",payload:{name:e,icons:t}})}),j=useEventCallback(function(e,t){r({type:"SET_COMMONS",payload:{name:e,value:t}})}),S=useEventCallback(function(e,t){r({type:"SET_ALERTS",payload:{name:e,value:t}})});return _objectSpread$c(_objectSpread$c(_objectSpread$c({},e),i),{},{setContext:n,values:i.values,savedValues:i.savedValues,errors:i.errors,touched:i.touched,isSubmitting:null!=(e=null==i?void 0:i.isSubmitting)&&e,setActiveTab:E,setRedirect:R,setSubmitting:h,setValues:a,setSavedValues:l,setFieldValue:o,getFieldValue:u,handleBlur:p,handleChange:m,getFieldProps:v,getFieldMeta:b,getFieldHelpers:_,eligibleOptions:y,eligibleOption:g,getTabFields:w,setFormField:c,registerIcons:O,registerCommon:j,registerAlert:S})},useIsomorphicLayoutEffect="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?React.useLayoutEffect:React.useEffect,useEventCallback=function(e){var l=React.useRef(e);return useIsomorphicLayoutEffect(function(){l.current=e}),React.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return l.current.apply(void 0,t)},[])},Row=function(e){var t=classNames__default.default("wprf-row clearfix wprf-flex",null==e?void 0:e.className);return React.createElement("div",{className:t},null==e?void 0:e.children)},Column=function(e){var t=classNames__default.default("wprf-column",null==e?void 0:e.className,(_defineProperty(t={},"wprf-column-".concat(12/(null==e?void 0:e.column)),(null==e?void 0:e.column)&&12!==e.column),_defineProperty(t,"wprf-column-12",12===e.column),t));return React.createElement("div",{className:t},null==e?void 0:e.children)},Label=function(e){var t=classNames__default.default("wprf-input-label",null==e?void 0:e.className);return React.createElement("label",{htmlFor:null==e?void 0:e.htmlFor,className:t},(null==e||null==(t=e.badge)?void 0:t.value)&&React.createElement("div",{className:"wprf-badge"},React.createElement("sup",{className:classNames__default.default("wprf-badge-item",{"wprf-badge-active":null==e||null==(t=e.badge)?void 0:t.active})},null==e||null==(t=e.badge)?void 0:t.label)),!(null!=e&&e.src)&&(null==e?void 0:e.children),(null==e?void 0:e.src)&&React.createElement(Image,{className:"wprf-label-image",src:e.src,alt:null==e?void 0:e.label}))},Image=function(e){var t;return null!=e&&e.src?(t=classNames__default.default(["wprf-input-image",null==e?void 0:e.className]),React.createElement("img",{className:t,src:null==e?void 0:e.src,alt:null==e?void 0:e.alt})):React.createElement("p",null,"No Source( src ) Defined")},BadgeComp=function(e){var t=e.componentClasses,e=e.label;return React.createElement("div",{className:"wprf-badge"},React.createElement("span",{className:"wprf-badge-icon"},React.createElement("i",{className:"btd-icon btd-crown"})),React.createElement("span",{className:t},e))},Badge=function(t){var n=useBuilderContext(),e=t.label,r=t.active,a=t.position,a=void 0===a?"right":a,l=t.renderLabel,o=t.renderComponent,r=(void 0===e&&(e="Pro"),classNames__default.default("wprf-badge-item",{"wprf-badge-active":r})),c={};return n.is_pro_active||(c={onClick:function(e){e.preventDefault(),n.alerts.pro_alert(null==t?void 0:t.popup).fire()}}),React.createElement("div",_extends$1({className:classNames__default.default("wprf-badge-wrapper",{"pro-deactivated":!n.is_pro_active})},c),"left"===a&&0<e.length&&React.createElement(React.Fragment,null,l(React.createElement(BadgeComp,{componentClasses:r,label:e}),"left")),"right"===a&&0<e.length&&React.createElement(React.Fragment,null,l(React.createElement(BadgeComp,{componentClasses:r,label:e}),"right")),o())},_excluded$4=["id","label","badge","badgePosition","context"],ControlLabel=function(e){var t=e.id,n=e.label,r=e.badge,a=e.badgePosition,l=e.context,e=_objectWithoutProperties(e,_excluded$4);return n&&0<n.length?React.createElement("div",{className:"wprf-control-label"},r?React.createElement("div",{className:"wprf-label-with-badge"},"left"==a&&r,React.createElement("label",{htmlFor:t},n),"right"==a&&r):React.createElement("label",{htmlFor:t},n),(null==e?void 0:e.label_subtitle)&&React.createElement("p",{className:"wprf-label-subtitle",dangerouslySetInnerHTML:{__html:null==e?void 0:e.label_subtitle}}),(null==e?void 0:e.link)&&React.createElement("a",{rel:"nofollow",target:"_blank",href:e.link},null==l||null==(a=l.icons)?void 0:a.link)):null},ControlField=function(e){var t=e.position,n=e.description,r=e.renderComponent,a=e.help,l=e.enableDisableActive,o=void 0!==l&&l,l=e.type,c=void 0===l?void 0:l,l=e.value,i=void 0!==l&&l,e=_slicedToArray(React.useState(n),2),l=e[0],u=e[1];return React.useEffect(function(){"toggle"===c&&o&&u(i?i18n.sprintf(i18n.__("Enabled %s","betterdocs"),null!=n?n:""):i18n.sprintf(i18n.__("Disabled %s","betterdocs"),null!=n?n:""))},[i]),React.createElement("div",{className:"wprf-control-field"},"left"===t&&l&&React.createElement("p",{className:"wprf-description",dangerouslySetInnerHTML:{__html:l}}),r(),"right"===t&&l&&React.createElement("p",{className:"wprf-description",dangerouslySetInnerHTML:{__html:l}}),a&&React.createElement("p",{className:"wprf-help",dangerouslySetInnerHTML:{__html:a}}))},_excluded$3=["label","id","name","type","style","is_pro","badge","value","enable_disable_text_active"];function ownKeys$b(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$b(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$b(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var withLabel=function(m){return function(t){var n,r=t.label,a=t.id,e=t.name,l=t.type,o=t.style,c=t.is_pro,i=t.badge,u=t.value,s=t.enable_disable_text_active,d=void 0!==s&&s,p=_objectWithoutProperties(t,_excluded$3),f=(null==a&&(a=e),_objectSpread$b({description:{position:"right"}},o)),o=classNames__default.default((_defineProperty(s={},"wprf-style-".concat(null==f?void 0:f.type),(null==f?void 0:f.type)||!1),_defineProperty(s,"wprf-label-none",void 0===r||""===r||0===r.length),_defineProperty(s,"wprf-".concat((null==f||null==(o=f.label)?void 0:o.position)||"inline","-label"),(null==(o=null==f||null==(o=f.label)?void 0:o.position)||o)&&null!=r),s));return"hidden"===l?React.createElement(m,_extends$1({},t,{id:a})):(n=validFieldProps(t,["description","label","help","style"]),s=classNames__default.default("wprf-control-wrapper","wprf-type-".concat(l),o,null==t?void 0:t.classes,_defineProperty({},"wprf-name-".concat(e),e)),React.createElement("div",{className:s},1==c&&React.createElement(React.Fragment,null,React.createElement(Badge,_extends$1({},i,p,{renderLabel:function(e,t){return React.createElement(ControlLabel,_extends$1({},n,{context:null==p?void 0:p.context,id:a,label:r,badge:e,badgePosition:t}))},renderComponent:function(){var e;return React.createElement(ControlField,{help:null,description:null==t?void 0:t.description,position:null==f||null==(e=f.description)?void 0:e.position,type:l,value:u,enableDisableActive:d,renderComponent:function(){return React.createElement(m,_extends$1({},n,{disable:!0,id:a}))}})}})),(null==t?void 0:t.help)&&React.createElement("div",{className:"wprf-badge-wrapper"},React.createElement("div",{className:"wprf-control-label"}),React.createElement("div",{className:"wprf-control-field"},React.createElement("p",{className:"wprf-help",dangerouslySetInnerHTML:{__html:t.help}})))),(0==c||null==c)&&React.createElement(React.Fragment,null,r&&0<r.length&&React.createElement(ControlLabel,_extends$1({},n,{context:null==p?void 0:p.context,label:r,id:a})),React.createElement(ControlField,{help:null==t?void 0:t.help,description:null==t?void 0:t.description,position:null==f||null==(o=f.description)?void 0:o.position,type:l,value:u,enableDisableActive:d,renderComponent:function(){return React.createElement(m,_extends$1({},n,{id:a}))}}))))}},withProps=function(i){var u=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(n){var e=useBuilderContext(),t=n.trigger,r=e.getFieldProps(n),a=e.getFieldMeta(r.name,n),l=e.getFieldHelpers(),o=(null!=e&&e.quickBuilder&&null!=e&&e.show&&(e.show.includes(n.name)||(r.classes=null!=r&&r.classes?r.classes+" hidden":" hidden")),null!=n&&n.parentIndex?_toConsumableArray(n.parentIndex):[]),c=(r.parentIndex=o,r.context=e,isFunction(n.onChange)&&(r.onChange=n.onChange),isFunction(n.onBlur)&&(r.onBlur=n.onBlur),React.useRef({}));return React.useEffect(function(){return c.current[n.name]=!0,function(){c.current[n.name]=!1}},[]),React.useEffect(function(){var e,t;a.visible&&c.current[n.name]&&(u||"group"===r.type?(e=null==n?void 0:n.parent,t=null==n?void 0:n.parenttype,e&&"group"===t&&r.value&&l.setValue([e,r.name],r.value)):l.setValue(r.name,r.value))},[a.visible]),React.useEffect(function(){c.current[n.name]&&isObject(t)&&!isEmptyObj(t)&&useDefaults(r.name,l,r.value,t)},[r.value,a.visible]),a.visible?React.createElement(i,r):React.createElement(React.Fragment,null)}},Action=function(e){return React.createElement(React.Fragment,null,hooks.applyFilters(e.action,"",e))},Button=function(n){var e,t,r,a;if(null!=n&&n.text||!0===(null==n?void 0:n.group))return e=validFieldProps(n,["is_pro","visible","disable","parentIndex","context","onBlur","value","ajax","text"]),t=(a=_slicedToArray(React.useState(!1),2))[0],r=a[1],null!=n&&n.href?React.createElement("a",{href:-1===(null==n?void 0:n.href)?null==n?void 0:n.value:null==n?void 0:n.href,target:null==n?void 0:n.target,className:classNames__default.default("wprf-control wprf-button wprf-href-btn",null==n?void 0:n.classes)},null==n?void 0:n.text):null!=n&&n.group?(a=n.fields.map(function(e,t){t=[].concat(_toConsumableArray(n.parentIndex),["fields",t]);return React.createElement(Field$1,_extends$1({key:e.name},e,{parentIndex:t}))}),React.createElement("div",{className:"wprf-control wprf-button-group wprf-flex"},a)):React.createElement(React.Fragment,null,React.createElement("button",_extends$1({},e,{name:n.name,disabled:t,onClick:function(e){null!=n&&n.ajax&&(r(!0),hitAAJX(n.ajax,n.context).then(function(e){var t;if(r(!1),"error"==(null==e?void 0:e.status))throw new Error(null==e?void 0:e.message);n.onChange({target:{type:"button",name:n.name,value:!0}}),null!=(e=n.ajax)&&e.hideSwal||(e=(null==(e=n.ajax)||null==(e=e.swal)?void 0:e.icon)||"success",t=(null==(t=n.ajax)||null==(t=t.swal)?void 0:t.text)||"Complete",n.context.alerts.toast(e,t,{autoClose:null==(e=n.ajax)||null==(e=e.swal)?void 0:e.autoClose})),null!=(t=n.ajax)&&t.reload&&("boolean"==typeof n.ajax.reload&&n.ajax.reload?setTimeout(function(){return window.location.reload()},1e3):"string"==typeof n.ajax.reload&&(window.location.href=n.ajax.reload))}).catch(function(e){var t;console.error("Error In Button Called",n.name,e),r(!1),n.onChange({target:{type:"button",name:n.name,value:!1}}),null!=(t=n.ajax)&&t.hideSwal||n.context.alerts.toast("error",(null==e?void 0:e.message)||i18n.__("Something went wrong.","betterdocs"))})),null!=n&&n.onClick?null!=n&&n.onClick(e):useTrigger(n)},className:classNames__default.default("wprf-control wprf-button wprf-btn",null==n?void 0:n.classes)}),isObject(null==n?void 0:n.text)&&null!=n&&n.ajax?t?null==n||null==(a=n.text)?void 0:a.loading:n.value?null==n||null==(e=n.text)?void 0:e.saved:null==n||null==(t=n.text)?void 0:t.normal:null==n?void 0:n.text));throw new Error(i18n.__("Button has a required params #text.","betterdocs"))},Button$1=withLabel(Button),CheckboxSelect=function(l){function e(){if(l.ajax&&(!l.ajax.rules||when(l.ajax.rules,a.values))){g(!0);var r={};if(Object.keys(null==l?void 0:l.ajax.data).map(function(e){var t,n;-1<(null==l?void 0:l.ajax.data[e].indexOf("@"))?(n=null==l?void 0:l.ajax.data[e].substr(1),r[e]=null==(t=a.values)?void 0:t[n]):r[e]=null==l?void 0:l.ajax.data[e]}),!_)return wpFetch({path:null==l?void 0:l.ajax.api,data:r}).then(function(e){g(!1);var t=merge(l.options,e,"value");return a.setFormField([].concat(_toConsumableArray(u),["options"]),t),f({options:t,parentIndex:[].concat(_toConsumableArray(u),["options"])}),e})}}var a=useBuilderContext(),t=l.id,n=l.name,r=l.multiple,o=l.placeholder,c=l.search,c=void 0!==c&&c,i=l.onChange,u=l.parentIndex,s=useOptions(l,"options"),d=s.options,p=s.selectedOption,f=s.setData,m=s.setSelectedOption,s=_slicedToArray(React.useState(null),2),v=s[0],b=s[1],s=_slicedToArray(React.useState(!1),2),y=s[0],g=s[1],s=_slicedToArray(React.useState(!1),2),_=s[0],s=(s[1],React.useEffect(function(){!isArray(v)&&isObject(v)&&i({target:{type:"select",name:n,value:v.value,options:d,multiple:r}}),isArray(v)&&i({target:{type:"select",name:n,value:v.map(function(e){return e.value}),options:d,multiple:r}})},[v]),React.useEffect(function(){e()},[]),React.useEffect(function(){null!=l&&l.menuOpen&&e()},[null==l?void 0:l.menuOpen]),React.useCallback(function(e){var t,n,r,a;isArray(e)&&0<(null==l||null==(n=l.filterValue)?void 0:n.length)&&(r=n=e,a=null!=(t=null==l?void 0:l.filterValue)?t:["all"],isArray(a)||(a=[a]),e=r=1<(null==n?void 0:n.length)&&valueExists(n.map(function(e){return e.value}),a)?n.filter(function(e){return!a.includes(null==e?void 0:e.value)}):r),b(e),m(e)},[n,t,u]));return React.createElement("div",{className:"wprf-checkbox-select-wrapper"},React.createElement(ReactSelect__default.default,{isDisabled:null==l?void 0:l.disable,className:"wprf-checkbox-select",classNamePrefix:"wprf-checkbox-select",isSearchable:null!=c&&c,id:t,isClearable:!1,name:n,isMulti:null!=r&&r,placeholder:o,isLoading:y,options:d,value:p,onMenuOpen:e,onMenuClose:function(){g(!1)},isOptionDisabled:function(e){return null==e?void 0:e.disabled},onChange:s,closeMenuOnSelect:!1,hideSelectedOptions:!1,autoFocus:!1,controlShouldRenderValue:!1}),null!=p&&p.length?React.createElement("ul",{className:"wprf-selected-options"},null==p?void 0:p.map(function(n,e){return React.createElement("li",{key:null==n?void 0:n.label,className:"wprf-selected-option wprf-selected-option-".concat(e%6+1)},null==n?void 0:n.label,React.createElement("button",{type:"button",className:"wprf-remove-button",onClick:function(){return t=n,e=p.filter(function(e){return(null==e?void 0:e.value)!=(null==t?void 0:t.value)}),b(e),void m(e);var t,e}},React.createElement("i",{className:"btd-icon btd-close-fill"})))})):"")},CheckboxSelect$1=withLabel(CheckboxSelect);function ownKeys$a(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$a(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var CodeViewer=function(t){var e=validFieldProps(t,["is_pro","visible","trigger","disable","parentIndex","context","copyOnClick"]),n=_slicedToArray(React.useState(!1),2),r=n[0],a=n[1];React.useEffect(function(){var e;return r&&(e=setTimeout(function(){a(!1)},1e3)),function(){return e&&clearTimeout(e)}},[r]);return React.createElement("span",{className:"wprf-code-viewer"},React.createElement("span",{className:"wprf-code-viewer-header"},null==t?void 0:t.label),React.createElement("span",{className:"wprf-code-viewer-body"},React__default.default.createElement("pre",_objectSpread$a({},e),null!=(n=null==t?void 0:t.code)?n:(null==t?void 0:t.default)||(null==t?void 0:t.value)),React.createElement("span",{className:"wprf-clipboard-tooltip ".concat(r?"active":"")},React.createElement("span",{className:"wprf-clipboard-tooltip-text"},React.createElement("span",null,"Copied")),React.createElement(components.Button,{className:"wprf-copy-icon",onClick:function(){var e;copy__default.default(null!=(e=null==t?void 0:t.code)?e:(null==t?void 0:t.default)||(null==t?void 0:t.value),{format:"text/plain",onCopy:function(){a(!0)}})}},React.createElement("i",{className:"btd-icon btd-duplicate"})))))},CodeViewer$1=React__default.default.memo(CodeViewer),ColorPicker=function(e){var t,n=e.value,r=e.name,a=e.id,l=e.onChange,o=_slicedToArray(React.useState(!1),2),c=o[0],i=o[1],o=_slicedToArray(React.useState(n||null),2),u=o[0],s=o[1],o=_slicedToArray(React.useState(n||null),2),d=o[0],p=o[1],o=React.useRef(null);React.useEffect(function(){p(n||"#ffffff00")},[]);return React.useEffect(function(){l({target:{type:"colorpicker",name:r,value:u}})},[u]),t=o,React.useEffect(function(){function e(e){t.current&&!t.current.contains(e.target)&&i(!1)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"wprf-colorpicker-wrap",ref:o},React.createElement("div",{className:"wprf-colorpicker-screen",onClick:function(){return i(!c)}},React.createElement("input",{type:"hidden",value:n,name:r,id:a}),React.createElement("span",{className:"wprf-picker-code"},n||d),React.createElement("span",{className:"wprf-picker-display",style:{backgroundColor:n}})),c&&React.createElement("div",{className:"wprf-colorpicker"},React.createElement(components.ColorPicker,{color:n||d,onChangeComplete:function(e){return s(e.hex)}}),React.createElement("div",{className:"wprf-colorpicker-reset-wrap"},React.createElement("button",{className:"wprf-colorpicker-reset",onClick:function(e){e.preventDefault(),s(d),i(!1)}},null!=(o=null==e?void 0:e.reset_text)?o:i18n.__("Reset","betterdocs"))))))},ColorPicker$1=withLabel(ColorPicker);function ownKeys$9(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$9(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$9(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$9(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var CopyToClipboard=function(t){var n=validFieldProps(t,["is_pro","visible","trigger","descriptionCopyable","disable","parentIndex","context","badge","popup","type","descriptionLabel"]),e=React.useCallback(function(e){return n.onChange(e,{popup:null==t?void 0:t.popup,isPro:!!t.is_pro,originProps:t})},[null==n?void 0:n.value]),r=_slicedToArray(React.useState(!1),2),a=r[0],l=r[1],r=_slicedToArray(React.useState(!1),2),o=r[0],c=r[1];React.useEffect(function(){var e;return a&&(e=setTimeout(function(){l(!1)},300)),function(){return e&&clearTimeout(e)}},[a]),React.useEffect(function(){var e;return o&&(e=setTimeout(function(){c(!1)},300)),function(){return e&&clearTimeout(e)}},[o]);return React.createElement("span",{className:"wprf-copy-to-clipboard-wrapper"},React.createElement("div",{className:"wprf-copy-to-clipboard-header"},React.createElement(ControlLabel,t),React.createElement("span",{className:"wprf-clipboard-tooltip ".concat(a?"active":"")},React.createElement("span",{className:"wprf-clipboard-tooltip-text"},React.createElement("span",null,"Copied")),React.createElement(components.Button,{className:"wprf-copy-icon",onClick:function(){copy__default.default(t.value,{format:"text/plain",onCopy:function(){l(!0)}})}},React.createElement("i",{className:"btd-icon btd-copy"})))),React.createElement("div",{className:"wprf-copy-to-clipboard-body"},React__default.default.createElement("input",_objectSpread$9(_objectSpread$9({},n),{},{type:"text",onChange:e,disabled:!0}))),React.createElement("div",{className:"wprf-copy-to-clipboard-footer"},(null==t?void 0:t.description)&&(null==t?void 0:t.descriptionLabel)&&React.createElement("i",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.descriptionLabel}}),null!=t&&t.description?null!=t&&t.descriptionCopyable?React.createElement("div",{className:"wprf-clipboard-tooltip ".concat(o?"active":"")},React.createElement("span",{className:"wprf-clipboard-tooltip-text"},React.createElement("span",null,"Copied")),React.createElement("p",{className:"wprf-description",onClick:function(){copy__default.default(t.description,{format:"text/plain",onCopy:function(){c(!0)}})},dangerouslySetInnerHTML:{__html:null==t?void 0:t.description}})):React.createElement("p",{className:"wprf-description",dangerouslySetInnerHTML:{__html:null==t?void 0:t.description}}):""))},CopyToClipboard$1=React__default.default.memo(CopyToClipboard),DateControl=function(e){var t=e.name,n=e.value,r=e.onChange,a=e.position,l=date.__experimentalGetSettings(),o=null!=(e=null==e?void 0:e.format)?e:l.formats.datetime,c=getTime(n),i=/a(?!\\)/i.test(l.formats.datetime.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""));return React.useEffect(function(){r({target:{type:"date",name:t,value:c}})},[]),React.createElement(components.Dropdown,{className:"wprf-control-datetime",contentClassName:"wprf-control-datetime-content",position:a||"bottom right",renderToggle:function(e){e.isOpen;e=e.onToggle;return React.createElement(components.Button,{isTertiary:!0,onClick:e},date.date(o,c,-(new Date).getTimezoneOffset()))},renderContent:function(){return React.createElement(components.DateTimePicker,{__nextRemoveHelpButton:!0,__nextRemoveResetButton:!0,currentDate:getTime(c).toDate().toString(),onChange:function(e){r({target:{type:"date",name:t,value:moment__default.default(e).utc().format()}})},is12Hour:i})}})},Date$1=withLabel(DateControl);const instanceMap=new WeakMap;function createId(e){var t=instanceMap.get(e)||0;return instanceMap.set(e,t+1),t}function useInstanceId(t,n,r){return React.useMemo(()=>{var e;return r||(e=createId(t),n?n+"-"+e:e)},[t])}var RepeaterField=function e(t){var n=useBuilderContext(),r=t.fields,a=t.onChange,l=t.index,o=t.parent,c=_slicedToArray(React.useState(t.isCollapsed),2),i=c[0],u=c[1],s=useInstanceId(e),c=null==(c=n.values)||null==(c=c[o])?void 0:c[l],c=(null==c?void 0:c.title)||(null==c?void 0:c.post_title)||(null==c?void 0:c.username)||(null==c?void 0:c.plugin_theme_name),c=c?c.length<40?c:c.substr(0,40)+"...":"";return React.useEffect(function(){n.setFieldValue([o,l,"isCollapsed"],i)},[i]),React.createElement("div",{className:"wprf-repeater-field"},React.createElement("div",{className:"wprf-repeater-field-title",onClick:function(){return u(!i)}},React.createElement("h4",null,React.createElement(components.Icon,{icon:"move"}),t.index+1,": ",c),React.createElement("div",{className:"wprf-repeater-field-controls"},React.createElement(components.Icon,{onClick:function(e){null!=e&&e.stopPropagation(),t.clone(t.index)},icon:"admin-page"}),React.createElement(components.Icon,{onClick:function(e){null!=e&&e.stopPropagation(),t.remove(t.index)},icon:"trash"}))),!i&&React.createElement("div",{className:"wprf-repeater-inner-field"},r.map(function(e,t){return React.createElement(GenericField,_extends$1({key:"field-".concat(l,"-").concat(t)},e,{id:"field-".concat(s,"-").concat(l,"-").concat(t),index:l,parenttype:"repeater",parent:o,onChange:function(e){return a(e,l)}}))})))};function ownKeys$8(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$8(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$8(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$8(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var GenericToggle=function(t){var e,n=_objectSpread$8({type:"",label:{position:"right"},column:4},t.style),r=React.useMemo(function(){var e=!1;return null!=t&&t.checked&&isObject(t.checked)&&isString(null==t?void 0:t.value)?e=t.checked[t.value]:isString(t.value)||(e=t.value),e},[null==t?void 0:t.checked,t.value]),n=classNames__default.default("wprf-toggle-wrap",(_defineProperty(e={},"wprf-".concat(null==n?void 0:n.type),0<(null==n?void 0:n.type.length)),_defineProperty(e,"wprf-checked",Boolean(r)),_defineProperty(e,"wprf-label-position-".concat(null==n||null==(r=n.label)?void 0:r.position),null==n||null==(r=n.label)?void 0:r.position),e),null==t?void 0:t.classes);return React.createElement("div",{className:n},React.createElement(GenericInput,_objectSpread$8(_objectSpread$8({},t),{},{type:"checkbox",placeholder:void 0})),React.createElement(Label,{htmlFor:t.id}))},GenericToggle$1=withLabel(GenericToggle),ModalContent=function(n){var e=n.isLoading;n.closeModal;var t=_slicedToArray(React.useState([]),2),r=t[0],a=t[1];return React.useEffect(function(){var e=sortingFields(n.body.fields).map(function(e,t){t=[].concat(_toConsumableArray(n.parentIndex),["fields",t]);return React.createElement(Field$1,_extends$1({key:e.name},e,{parentIndex:t}))});a(e)},[]),React.createElement("div",{className:"wprf-modal-body"},e&&React.createElement(Loading,null),!e&&React.createElement(React.Fragment,null,React.createElement("div",{className:"wprf-modal-content"},0<r.length&&r),React.createElement("div",{className:"wprf-modal-footer clearfix"},React.createElement("div",{className:"wprf-modal-footer-left"},(null==(t=n.body)?void 0:t.footer)&&isString(n.body.footer)&&React.createElement("p",null,n.body.footer),React.createElement(GenericField,_extends$1({type:"button"},null==n?void 0:n.confirm_button))))))},ModalHeader=function(e){e=e.content;return React.createElement("div",{className:"wprf-modal-header"},e&&isString(e)&&React.createElement("h3",null,e))},Loading=function(e){return React.createElement("p",null,i18n.__("Loading...","betterdocs"))},toolbarOptions={options:["inline","blockType","textAlign","colorPicker","link"],inline:{options:["bold","italic","underline","strikethrough","monospace"]},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"],className:void 0,component:void 0,dropdownClassName:void 0}},Editor=function(n){var e=_slicedToArray(React.useState(draftJs.EditorState.createEmpty()),2),t=e[0],r=e[1];return React.useEffect(function(){var e,t;n.value&&(e=(t=htmlToDraft__default.default(n.value)).contentBlocks,t=t.entityMap,e=draftJs.ContentState.createFromBlockArray(e,t),t=draftJs.EditorState.createWithContent(e),r(t))},[]),React.useEffect(function(){var e=draftToHtml__default.default(draftJs.convertToRaw(t.getCurrentContent()));n.onChange({target:{type:"editor",value:e,name:n.name}})},[t]),React.createElement(reactDraftWysiwyg.Editor,{placeholder:null==n?void 0:n.placeholder,toolbar:toolbarOptions,editorState:t,toolbarClassName:"wprf-editor-toolbar",wrapperClassName:"wprf-editor wprf-control",editorClassName:"wprf-editor-main",onEditorStateChange:r})},Editor$1=withLabel(Editor);function _createForOfIteratorHelper$1(e,t){var n,r,a,l,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return r=!(n=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return n=e.done,e},e:function(e){r=!0,a=e},f:function(){try{n||null==o.return||o.return()}finally{if(r)throw a}}};if(Array.isArray(e)||(o=_unsupportedIterableToArray$1(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),l=0,{s:t=function(){},n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$1(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray$1(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$1(e,t):void 0}function _arrayLikeToArray$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ownKeys$7(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$7(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$7(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$7(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function GenericCheckbox(t){var e,n=_objectSpread$7({type:"",label:{position:"right"},column:4},t.style),r=React.useMemo(function(){var e=!1;return null!=t&&t.checked&&isObject(t.checked)&&isString(null==t?void 0:t.value)?e=t.checked[t.value]:isString(t.value)||(e=t.value),e},[null==t?void 0:t.checked,t.value]),n=classNames__default.default("wprf-checkbox-wrap",(_defineProperty(e={},"wprf-".concat(null==n?void 0:n.type),0<(null==n?void 0:n.type.length)),_defineProperty(e,"wprf-checked",Boolean(r)),_defineProperty(e,"wprf-label-position-".concat(null==n||null==(r=n.label)?void 0:r.position),null==n||null==(r=n.label)?void 0:r.position),e),null==t?void 0:t.classes);return React.createElement("div",{className:n},React.createElement(GenericInput,_objectSpread$7(_objectSpread$7({},t),{},{type:"checkbox"})),React.createElement("label",{htmlFor:t.id},t.label))}function Checkbox(t){var n,r,a,e=t.options,l=t.value,o=t.multiple,c=t.style,i=sortingFields(e),u=_objectSpread$7({column:4},c);return o?(e=_slicedToArray(React.useState({}),2),n=e[0],r=e[1],a=function(e){var t=e.target||e.currentTarget;r(function(e){return _objectSpread$7(_objectSpread$7({},e),{},_defineProperty({},t.value,t.checked))})},React.useEffect(function(){t.onChange({target:{type:"checkbox",name:t.name,value:n,multiple:!0}})},[n]),React.useEffect(function(){if(isObject(l))r(l);else{var e,t={},n=_createForOfIteratorHelper$1(i);try{for(n.s();!(e=n.n()).done;)t[e.value.value]=l}catch(e){n.e(e)}finally{n.f()}r(t)}},[]),React.createElement("div",{className:"wprf-checkbox-wrapper wprf-control"},React.createElement(Row,null,i.map(function(e){return React.createElement(Column,{key:e.value,column:u.column},React.createElement(GenericCheckbox,_objectSpread$7(_objectSpread$7({},e),{},{context:null==t?void 0:t.context,id:e.value,checked:void 0===n[e.value]||(null!=n&&n[e.value]?l:!(null==n||!n[e.value])),type:"checkbox",onChange:a,style:u})))})))):React.createElement(GenericInput,_objectSpread$7(_objectSpread$7({},t),{},{type:"checkbox"}))}var Checkbox$1=withLabel(Checkbox),Field=function(e){if(!e.type||0===e.type.length)throw console.error(e),new Error(i18n.__("Field must have a #type. see documentation.","betterdocs"));switch(e.type){case"text":case"radio":case"email":case"range":case"number":case"hidden":return React.createElement(Input$1,e);case"checkbox":return React.createElement(Checkbox$1,e);case"textarea":return React.createElement(Textarea$1,e);case"codeviewer":return React.createElement(CodeViewer$1,e);case"copy-to-clipboard":return React.createElement(CopyToClipboard$1,e);case"message":return React.createElement(Message,e);case"select":return React.createElement(Select$1,e);case"checkbox-select":return React.createElement(CheckboxSelect$1,e);case"select-async":return React.createElement(SelectAsync$1,e);case"slider":return React.createElement(Slider,e);case"group":return React.createElement(Group$1,e);case"radio-card":return React.createElement(Radio,e);case"section":return React.createElement(Section$1,e);case"date":return React.createElement(Date$1,e);case"toggle":return React.createElement(Toggle,e);case"colorpicker":return React.createElement(ColorPicker$1,e);case"jsonuploader":return React.createElement(JsonUploader$1,e);case"repeater":return React.createElement(Repeater,e);case"media":return React.createElement(Media$1,e);case"editor":return React.createElement(Editor$1,e);case"action":return React.createElement(Action,e);case"button":return React.createElement(Button$1,e);case"modal":return React.createElement(Modal,e);case"tab":return React.createElement(Tab,e);case"responsive-number":return React.createElement(ResponsiveNumber$1,e);default:var t=hooks.applyFilters("custom_field","",e.type,e);return React.createElement(React.Fragment,null,t)}},GenericField=withProps(Field,!0),Field$1=withProps(Field),_excluded$2=["name","fields"],Group=function(n){var r,a,e,t,l=n.name,o=n.fields,c=_objectWithoutProperties(n,_excluded$2);if(o&&isArray(o)&&0!==o.length)return r=useBuilderContext(),a=React.useCallback(function(e){e.persist&&e.persist();var e=executeChange(e),t=e.field,e=e.val;r.setFieldValue([l,t],e)},[n.value]),e=sortingFields(o),React.useEffect(function(){r.setFormField([].concat(_toConsumableArray(n.parentIndex),["fields"]),e)},[]),o=e.map(function(e,t){t=[].concat(_toConsumableArray(n.parentIndex),["fields",t]);return React.createElement(GenericField,_extends$1({},c,{key:e.name,index:n.index,onChange:a},e,{parenttype:"group",parent:l,parentIndex:t}))}),t=classNames__default.default("wprf-group-control-inner",{"wprf-display-inline":"inline"===(null==n?void 0:n.display)}),React.createElement("div",{className:"wprf-group-control"},React.createElement("div",{className:t},o));throw new Error(i18n.__("You should give a #fields arguments to a group field.","betterdocs"))},Group$1=withLabel(Group);function ownKeys$6(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$6(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$6(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$6(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Input=function(t){var n=validFieldProps(t,["is_pro","visible","trigger","copyOnClick","disable","parentIndex","context","badge","popup","enable_disable_text_active"]),e=React.useCallback(function(e){return n.onChange(e,{popup:null==t?void 0:t.popup,isPro:!!t.is_pro,originProps:t})},[null==n?void 0:n.value]);"checkbox"===n.type&&null!=n&&n.name&&(n.checked=(null==n?void 0:n.checked)||(null==n?void 0:n.value));var r,a=_slicedToArray(React.useState(!1),2),l=a[0],o=a[1];return React.useEffect(function(){var e;return l&&(e=setTimeout(function(){o(!1)},2e3)),function(){return e&&clearTimeout(e)}},[l]),!t.is_pro&&null!=t&&t.copyOnClick&&null!=t&&t.value?(a=(null==t?void 0:t.copyMessage)||"Click To Copy!",r=(null==t?void 0:t.copiedMessage)||"Copied!",React.createElement("span",{className:"wprf-clipboard-wrapper"},React__default.default.createElement("input",_objectSpread$6(_objectSpread$6({},n),{},{onChange:e})),React.createElement("span",{className:"wprf-clipboard-tooltip"},React.createElement("span",{className:"wprf-clipboard-tooltip-text"},l?r:a),React.createElement(components.Button,{className:"wprf-copy-icon",onClick:function(){copy__default.default(t.value,{format:"text/plain",onCopy:function(){o(!0)}})}},"Copy")))):React__default.default.createElement("input",_objectSpread$6(_objectSpread$6({},n),{},{onChange:e,disabled:(null==t?void 0:t.is_pro)||!1}))},GenericInput=(Input.defaultProps={type:"text"},React__default.default.memo(Input)),Input$1=withLabel(React__default.default.memo(Input)),JsonUploader=function(n){validFieldProps(n,["is_pro","visible","trigger","disable","parentIndex","context","copyOnClick"]);var e=_slicedToArray(React.useState(),2),t=e[0],r=e[1];return React.useEffect(function(){null!=n&&n.value||r(null)},[null==n?void 0:n.value]),React.createElement("span",{className:"wprf-json-uploader"},!t&&React.createElement("label",{className:"wprf-json-uploaderButton"},React.createElement("span",null,i18n.__("Upload")),React.createElement("input",{type:"file",accept:"application/JSON",onChange:function(e){var t;(e=e).target.files.length&&(0==(null==(e=e.target.files[0])?void 0:e.size)?n.context.alerts.toast("error",i18n.__("File can't be empty.","betterdocs")):"application/json"!=(null==e?void 0:e.type)&&"text/json"!=(null==e?void 0:e.type)?n.context.alerts.toast("error",i18n.__("Invalid file type.","betterdocs")):(r(e),(t=new FileReader).onload=function(e){e=null==e||null==(e=e.target)?void 0:e.result;n.onChange({target:{type:"jsonuploader",name:n.name,value:e}})},t.readAsText(e)))}})),t&&(null==t?void 0:t.name)&&React.createElement("span",{className:"wpfr-json-file-name-wrapper"},React.createElement("span",{className:"wpfr-json-file-name"},20<(null==t?void 0:t.name.length)?"".concat(null==t?void 0:t.name.substr(0,9),"...").concat(null==t?void 0:t.name.substr((null==t?void 0:t.name.length)-7)):null==t?void 0:t.name),React.createElement("span",{className:"wprf-json-file-delete-button",onClick:function(){r(null),n.onChange({target:{type:"jsonuploader",name:n.name,value:null}})}},"x")))},JsonUploader$1=withLabel(React__default.default.memo(JsonUploader)),Media=function(t){var e=_slicedToArray(React.useState(null!=(e=t.value)&&e.url?t.value:null),2),n=e[0],r=e[1];return React.useEffect(function(){t.onChange({target:{type:"media",name:t.name,value:n}})},[n]),React.createElement("div",{className:"wprf-control wprf-media"},null!=n&&!(null!=t&&t.notImage)&&React.createElement("div",{className:"wprf-image-preview"},null!=n&&(null==n?void 0:n.url)&&React.createElement("img",{src:n.url,alt:n.title})),React.createElement("div",{className:"wprf-image-uploader ".concat(null==n||null!=t&&t.notImage?"":"uploaded")},React.createElement(mediaUtils.MediaUpload,{onSelect:function(e){r({id:e.id,title:e.title,url:e.url})},multiple:!1,allowedTypes:["image"],value:n,render:function(e){e=e.open;return React.createElement(React.Fragment,null,null!=n?React.createElement("div",{className:"wprf_image_overlay"},React.createElement("button",{className:"wprf-btn wprf-image-change-btn",onClick:e},React.createElement("i",{className:"btd-icon btd-upload"})),React.createElement("button",{className:"wprf-btn wprf-image-remove-btn",onClick:function(){return r(null)}},(null==t?void 0:t.remove)||React.createElement("i",{className:"btd-icon btd-delete"}))):React.createElement("button",{className:"wprf-btn wprf-image-upload-btn",onClick:e},React.createElement("span",{className:"icon"},React.createElement("i",{className:"btd-icon btd-upload"})),React.createElement("span",{className:"title"},"Click to upload"),React.createElement("span",{className:"info"},"SVG, PNG, JPG or GIF (max. 800x400px)")))}})))},Media$1=withLabel(Media),eligibleMessage=function(e){if(null!=e&&e.messages)for(var t in e.messages){t=e.messages[t];if(when(t.rules,e.context.values))return t}return{message:null==e?void 0:e.message,html:null==e?void 0:e.html,type:"normal"}},Message=function(e){var t=eligibleMessage(e),n=t.html,r=t.message,t=t.type;return r?React.createElement("div",{className:classNames__default.default("wprf-control","wprf-message","wprf-".concat(void 0===t?"warning":t,"-message"),"wprf-".concat(e.name,"-message"),null==e?void 0:e.classes)},n&&React.createElement("p",{dangerouslySetInnerHTML:{__html:r}}),!n&&React.createElement("p",null,r)):React.createElement(React.Fragment,null)},Modal=function(t){if(null==(null==t?void 0:t.body)||null==(null==t?void 0:t.button))throw new Error(i18n.__("Modal needs button/body with it.","betterdocs"));function n(){return a(!1)}var e=_slicedToArray(React.useState(!1),2),r=e[0],a=e[1],e=_slicedToArray(React.useState(!1),2),l=e[0],e=(e[1],React.useCallback(function(){},[]));return React.createElement("div",{className:"wprf-control wprf-modal",id:"wprf-modal-".concat(t.name)},React.createElement(GenericField,_extends$1({type:"button"},null==t?void 0:t.button,{onClick:function(){return a(!0)}})),r&&React.createElement(SweetAlert__default.default,{customClass:"wprf-modal-inner",style:{maxWidth:"900px",width:"100%",overflowY:"scroll",margin:"50px auto"},closeBtnStyle:{top:"5px",right:"5px",color:"#f78c8c",fontSize:"18px",border:"1px solid #f78c8c",borderRadius:"50%",width:"30px",height:"30px",display:"inline-flex",alignItems:"center",justifyContent:"center"},title:React.createElement(ModalHeader,{content:null==t||null==(r=t.body)?void 0:r.header}),onConfirm:e,showConfirm:!1,showCloseButton:!0,closeOnClickOutside:!0,onCancel:n,afterUpdate:function(){var e;null!=t&&t.cancel&&null!=(e=t.context.values)&&e[t.cancel]&&n()}},React.createElement(ModalContent,_extends$1({},t,{isLoading:l,closeModal:n,context:t.context,onConfirm:e}))))},_excluded$1=["label","value","icon","is_pro"];function ownKeys$5(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$5(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$5(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$5(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var RadioCard=function e(t){var c,i,u,s=useBuilderContext(),n=useOptions(t,"options"),r=n.options,d=n.option;if(r)return c=useInstanceId(e),n=classNames__default.default(["wprf-control","wprf-radio-card","wprf-input-radio-set-wrap",null==t?void 0:t.className]),i=_objectSpread$5({},null==t?void 0:t.style),u=validFieldProps(t,["options","placeholder","style","trigger"]),React.useEffect(function(){d&&t.onChange({target:{type:"radio-card",name:t.name,value:d}})},[d]),React.createElement("div",{className:n},React.createElement(Row,null,r.map(function(e,t){var n,r=e.label,a=e.value,l=e.icon,o=e.is_pro,e=_objectWithoutProperties(e,_excluded$1);return React.createElement(Column,{column:+(null==e?void 0:e.column)||4,key:t},React.createElement("div",{className:classNames__default.default("wprf-input-radio-option",{"wprf-option-has-image":null!=l&&l,"wprf-option-selected":a==d})},React.createElement(Label,{className:classNames__default.default(_defineProperty({"wprf-label-has-image":null!=l&&l},"wprf-size-".concat(i.size),null!=(n=l&&(null==i?void 0:i.size))&&n)),htmlFor:"wprf-input-radio-".concat(c,"-").concat(t),src:l,badge:{label:o?"Pro":"Free",value:o,active:Boolean(s.is_pro_active)}},r),React.createElement(GenericInput,_extends$1({},e,u,{is_pro:o,type:"radio",value:a,checked:a===d,id:"wprf-input-radio-".concat(c,"-").concat(t)}))))})));throw new Error(i18n.__("#options is a required arguments for RadioCard field.","betterdocs"))},Radio=withLabel(RadioCard);function ownKeys$4(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$4(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$4(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$4(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Repeater=function(e){var a=e.name,t=(e.value,e.button),n=e.fields,l=useBuilderContext(),e=_slicedToArray(React.useState(null==(e=l.values)?void 0:e[a]),2),r=e[0],o=e[1],c=(React.useEffect(function(){var e;null!=(null==(e=l.values)?void 0:e[a])&&o(null==(e=l.values)?void 0:e[a])},[null==(e=l.values)?void 0:e[a]]),React.useCallback(function(e){var t=_toConsumableArray(r);t.splice(e,1),l.setFieldValue(a,t)},[r])),i=React.useCallback(function(e){var t=_toConsumableArray(r);0<t.length&&(null!=(e=t=null!=(e=t=null!=(e=t=null!=(e=t=(null==t?void 0:t[e])||{})&&e.title?_objectSpread$4(_objectSpread$4({},t),{},{title:t.title+" - Copy"}):t)&&e.post_title?_objectSpread$4(_objectSpread$4({},t),{},{post_title:t.post_title+" - Copy"}):t)&&e.username?_objectSpread$4(_objectSpread$4({},t),{},{username:t.username+" - Copy"}):t)&&e.plugin_theme_name&&(t=_objectSpread$4(_objectSpread$4({},t),{},{plugin_theme_name:t.plugin_theme_name+" - Copy"})),t=_objectSpread$4(_objectSpread$4({},t),{},{index:uuid.v4(),isCollapsed:!1}),l.setFieldValue([a,r.length],t))},[r]);return React.useEffect(function(){o(null==r||""==r?[{index:uuid.v4()}]:function(e){return e.map(function(e){return _objectSpread$4(_objectSpread$4({},e),{},{index:uuid.v4()})})})},[]),React.createElement("div",{className:"wprf-repeater-control"},r&&0<(null==r?void 0:r.length)&&React.createElement(reactSortablejs.ReactSortable,{className:"wprf-repeater-content",list:r,setList:function(e){l.setFieldValue(a,e)},handle:".wprf-repeater-field-title",filter:".wprf-repeater-field-controls",forceFallback:!0},r.map(function(e,r){return React.createElement(RepeaterField,{isCollapsed:null==e?void 0:e.isCollapsed,key:(null==e?void 0:e.index)||r,fields:n,index:r,parent:a,clone:i,remove:c,onChange:function(e){var t,n;t=r,(e=e).persist&&e.persist(),e=executeChange(e),n=e.field,e=e.val,l.setFieldValue([a,t,n],e)}})})),React.createElement("div",{className:"wprf-repeater-label"},React.createElement("button",{className:"wprf-repeater-button",onClick:function(){return l.setFieldValue(a,[].concat(_toConsumableArray(r),[{index:uuid.v4()}]))}},null==t?void 0:t.label)))};function ownKeys$3(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$3(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var ResponsiveNumber=function(t){var n=validFieldProps(t,["is_pro","visible","trigger","disable","parentIndex","context","badge","popup"]),e=_slicedToArray(React.useState(Object.keys(t.controls)[0]),2),r=e[0],a=e[1],e=n.value;isObject(n.value)||Object.keys(t.controls).reduce(function(e,t){return _objectSpread$3(_objectSpread$3({},e),{},_defineProperty({},t,n.value))},{});var e=_slicedToArray(React.useState(e),2),l=e[0],o=e[1];return React.useEffect(function(){n.onChange({target:{type:"input",name:n.name,value:l,checked:null,multiple:null}})},[l]),React.createElement("div",{style:{display:"flex",alignItems:"center",rowGap:5,columnGap:10,flexWrap:"wrap"}},React__default.default.createElement("input",_objectSpread$3(_objectSpread$3({},n),{},{type:"number",value:null==l?void 0:l[r],onChange:function(e){o(_objectSpread$3(_objectSpread$3({},l),{},_defineProperty({},r,e.target.value)))}})),React.createElement("div",{style:{display:"flex",alignItems:"center"}},null==(e=Object.keys(t.controls))?void 0:e.map(function(e){return React.createElement("button",{type:"button",key:e,className:"responsive-button ".concat(r===e?"active":""),onClick:function(){return a(e)}},React.createElement("img",{src:t.controls[e].icon,alt:"desktop",style:{width:t.controls[e].size}}))})))},ResponsiveNumber$1=(ResponsiveNumber.defaultProps={type:"number"},withLabel(React__default.default.memo(ResponsiveNumber))),SteppedButton=function(n){var e=_slicedToArray(React.useState(void 0),2),r=e[0],a=e[1],e=_slicedToArray(React.useState(void 0),2),l=e[0],o=e[1],t=useBuilderContext();return React.useEffect(function(){var e=n.fields.map(function(e){return e.id}),t=e.findIndex(function(e){return e===n.active});-1!=t&&o(e[t-1]),t<=e.length&&a(e[t+1])},[n.active,n.fields]),React.useEffect(function(){var e;t.setFieldValue("active_tab",null==t||null==(e=t.config)?void 0:e.active)},[n.active]),React.createElement("div",{className:"wprf-stepped-button"},n.config.buttons&&Object.keys(n.config.buttons).map(function(e,t){return React.createElement(React__default.default.Fragment,{key:"button_".concat(e,"_").concat(t)},"skip"===e&&void 0!==r&&React.createElement(components.Button,{className:"wprf-btn wprf-step-btn-".concat(e),onClick:function(){return n.setActive(r)}},null==(t=n.config.buttons)?void 0:t[e]),("next"===e&&void 0!==r||"prev"===e&&void 0!==l)&&React.createElement("div",{className:"wprf-btn wprf-step-btn-".concat(e)},React.createElement(Field$1,{type:"button",ajax:null==(t=n.config.buttons)||null==(t=t[e])?void 0:t.ajax,name:"step-button",onClick:function(){return n.setActive("next"===e?r:l)},text:"object"===_typeof$1(null==(t=n.config.buttons)?void 0:t[e])?(null==n?void 0:n.active)===(null==(t=n.config.buttons)||null==(t=t[e])?void 0:t.condition)?null==(t=n.config.buttons)||null==(t=t[e])?void 0:t.customName:null==(t=n.config.buttons)||null==(t=t[e])?void 0:t.name:null==(t=n.config.buttons)?void 0:t[e]})),null==r&&(null==(t=n.config.buttons)||null==(t=t[e])?void 0:t.type)&&React.createElement(Field$1,null==(t=n.config.buttons)?void 0:t[e]))}))},SteppedButton$1=React__default.default.memo(SteppedButton);function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure "+e)}var Submit=function(e){var e=_extends$1({},(_objectDestructuringEmpty(e),e)),n=useBuilderContext(),t=(null==e?void 0:e.label)||i18n.__("Save Changes","betterdocs"),e=(n.isSubmitting&&(t=null!=(e=null==e?void 0:e.loadingLabel)?e:"Saving..."),React.useCallback(function(e){var t;null!=(t=n.submit)&&t.onSubmit&&n.submit.onSubmit(e,n)},[n]));return React.createElement("div",{className:"wprf-submit wprf-control"},React.createElement(components.Button,{disabled:null==n?void 0:n.isSubmitting,className:"wprf-submit-button",onClick:e},t))},Section=function(n){var e=n.searchable,e=void 0!==e&&e,t=n.searchNotFoundMessage,r=n.searchPlaceholder,r=void 0===r?"Search...":r,a=useBuilderContext(),l=_slicedToArray(React.useState(null!=(l=n.collapsed)&&l),2),o=l[0],c=l[1],l=_slicedToArray(React.useState([]),2),i=l[0],u=l[1],l=_slicedToArray(React.useState([]),2),s=l[0],d=l[1],l=_slicedToArray(React.useState(""),2),p=l[0],f=l[1],l=(React.useEffect(function(){var e=sortingFields(n.fields),e=(a.setFormField([].concat(_toConsumableArray(n.parentIndex),["fields"]),e),e.map(function(e,t){t=[].concat(_toConsumableArray(n.parentIndex),["fields",t]);return React.createElement(Field$1,_extends$1({key:e.name},e,{parentIndex:t}))}));u(e),d(e)},[]),React.useEffect(function(){var e;p?(e=i.filter(function(e){return null==e||null==(e=e.props)||null==(e=e.label)||null==(e=e.toLowerCase())?void 0:e.includes(p.toLowerCase())}),d(e)):d(i)},[p,i]),classNames__default.default("wprf-control-section",null==n?void 0:n.classes,null==n?void 0:n.name,{"wprf-section-collapsed":(null==n?void 0:n.collapsible)&&o}));return React.createElement("div",{id:null==n?void 0:n.name,className:l},n.placeholder&&React.createElement("div",{className:"wprf-section-title"},React.createElement("h4",null,n.placeholder),n.collapsible&&React.createElement("button",{onClick:function(){return c(!o)}},"Icon")),e?React.createElement("div",{className:"wprf-section-fields"},React.createElement("div",{className:"wprf-section-search-form"},React.createElement("span",{className:"wprf-section-search"},React.createElement("input",{type:"text",name:"",id:"",placeholder:r,onChange:function(e){f(null==(e=e)||null==(e=e.target)?void 0:e.value)},value:p}))),React.createElement("div",{className:"wprf-section-search-results"},null!=s&&s.length?s:React.createElement("div",{className:"wprf-result-not-found",dangerouslySetInnerHTML:{__html:null!=t?t:"Not found!"}}))):React.createElement("div",{className:"wprf-section-fields"},s),n.showSubmit&&React.createElement(Submit,a.submit),n.showSteps&&React.createElement(SteppedButton$1,{fields:a.tabs,active:a.config.active,setActive:a.setActiveTab,config:null!=(l=a.config.step)?l:{show:!1}}))},Section$1=React__default.default.memo(Section),Select=function(l){function e(){if(l.ajax&&(!l.ajax.rules||when(l.ajax.rules,a.values))){y(!0);var r={};if(Object.keys(null==l?void 0:l.ajax.data).map(function(e){var t,n;-1<(null==l?void 0:l.ajax.data[e].indexOf("@"))?(n=null==l?void 0:l.ajax.data[e].substr(1),r[e]=null==(t=a.values)?void 0:t[n]):r[e]=null==l?void 0:l.ajax.data[e]}),!g)return wpFetch({path:null==l?void 0:l.ajax.api,data:r}).then(function(e){y(!1);var t=merge(l.options,e,"value");return a.setFormField([].concat(_toConsumableArray(u),["options"]),t),f({options:t,parentIndex:[].concat(_toConsumableArray(u),["options"])}),e})}}var a=useBuilderContext(),t=l.id,n=l.name,r=l.multiple,o=l.placeholder,c=l.search,c=void 0!==c&&c,i=l.onChange,u=l.parentIndex,s=useOptions(l,"options"),d=s.options,p=s.selectedOption,f=s.setData,s=_slicedToArray(React.useState(null),2),m=s[0],v=s[1],s=_slicedToArray(React.useState(!1),2),b=s[0],y=s[1],s=_slicedToArray(React.useState(!1),2),g=s[0],s=(s[1],React.useEffect(function(){!isArray(m)&&isObject(m)&&i({target:{type:"select",name:n,value:m.value,options:d,multiple:r}}),isArray(m)&&i({target:{type:"select",name:n,value:m.map(function(e){return e.value}),options:d,multiple:r}})},[m]),React.useEffect(function(){e()},[]),React.useEffect(function(){null!=l&&l.menuOpen&&e()},[null==l?void 0:l.menuOpen]),React.useCallback(function(e){var t,n,r,a;isArray(e)&&0<(null==l||null==(n=l.filterValue)?void 0:n.length)&&(r=n=e,a=null!=(t=null==l?void 0:l.filterValue)?t:["all"],isArray(a)||(a=[a]),e=r=1<(null==n?void 0:n.length)&&valueExists(n.map(function(e){return e.value}),a)?n.filter(function(e){return!a.includes(null==e?void 0:e.value)}):r),v(e)},[n,t,u]));return React.createElement("div",{className:"wprf-select-wrapper"},React.createElement(ReactSelect__default.default,{isDisabled:null==l?void 0:l.disable,className:"wprf-select",classNamePrefix:"wprf-select",isSearchable:null!=c&&c,id:t,name:n,isMulti:null!=r&&r,placeholder:o,isLoading:b,options:d,value:p,onMenuOpen:e,onMenuClose:function(){y(!1)},isOptionDisabled:function(e){return null==e?void 0:e.disabled},onChange:s}))},Select$1=withLabel(Select),SelectAsync=function(a){var l=useBuilderContext(),e=a.id,t=a.name,n=a.multiple,r=a.placeholder,o=a.onChange;a.parentIndex;function c(t,n){var e;if(a.ajax&&(!a.ajax.rules||when(a.ajax.rules,l.values)))if(t)if(t.length<3)n([{label:i18n.__("Please input a minimum of 3 characters."),value:null,disabled:!0}]);else{var r={inputValue:t};if(null!=(e=Object.keys(a.ajax.data))&&e.map(function(e){var t,n;-1<a.ajax.data[e].indexOf("@")?(n=a.ajax.data[e].substr(1),r[e]=null==(t=l.values)?void 0:t[n]):r[e]=a.ajax.data[e]}),!f&&t)return m(!0),window.lastRequest=null,wpFetch({path:a.ajax.api,data:r}).then(function(e){return n(e),e}).finally(function(){var e;m(!1),window.lastRequest&&(e=window.lastRequest,window.lastRequest=null,c.apply(void 0,_toConsumableArray(e))),window.lastCompleteRequest=t});window.lastRequest=[t,n]}else n(u)}var i=_slicedToArray(React.useState(l.eligibleOptions(a.options)),2),u=i[0],s=i[1],i=_slicedToArray(React.useState(null==a?void 0:a.value),2),d=i[0],p=i[1],i=_slicedToArray(React.useState(!1),2),f=i[0],m=i[1];return React.useEffect(function(){s(l.eligibleOptions(a.options))},[l.values.source]),React.useEffect(function(){o({target:{type:"select",name:t,value:d,multiple:n}})},[d]),React.createElement("div",{className:"wprf-async-select-wrapper"},React.createElement(AsyncSelect__default.default,{cacheOptions:!0,loadOptions:c,defaultOptions:u,isDisabled:null==a?void 0:a.disable,isMulti:null!=n&&n,classNamePrefix:"wprf-async-select",id:e,name:t,placeholder:r,formatOptionLabel:function(e,t){var n,r;if(null!=t&&null!=(n=t.inputValue)&&n.length&&e.name&&e.name.toLowerCase().includes(null==t||null==(n=t.inputValue)?void 0:n.toLowerCase()))return null!=e&&e.name,n=new RegExp("(".concat(null==t?void 0:t.inputValue,")"),"gi"),t=null==(t=e.name)?void 0:t.replace(n,"<strong style={font-weight: 900}>$1</strong>"),r=null==(r=e.address)?void 0:r.replace(n,"<strong style={font-weight: 900}>$1</strong>"),React.createElement(React.Fragment,null,parse__default.default(t||"")," ",React.createElement("small",null,parse__default.default(r||"")));return React.createElement(React.Fragment,null,e.name?React.createElement(React.Fragment,null,React.createElement("b",null,e.name)," "):React.createElement(React.Fragment,null,e.label," "),e.address&&React.createElement("small",null,e.address))},value:d,isClearable:!0,isOptionDisabled:function(e){return null==e?void 0:e.disabled},onChange:function(e){return p(e)}}))},SelectAsync$1=withLabel(SelectAsync),Slider=function(t){var n=t.name,e=t.id,r=t.label,a=t.units,l=t.value,o=t.min,c=t.max,i=t.unit,u=(t.tooltip,t.reset),l=_slicedToArray(React.useState(l||0),2),s=l[0],d=l[1],l=_slicedToArray(React.useState(i),2),p=l[0],f=l[1];return React.useEffect(function(){var e;s&&(isNumber(s)?e=p?"".concat(s).concat(p):"".concat(s):isString(s)&&(e=-1<s.indexOf(p)?"".concat(s):"".concat(s).concat(p)),t.onChange({target:{type:"slider",name:n,value:e}}))},[s,p]),React.createElement("div",{className:"wprf-slider-wrap"},React.createElement("div",{className:"wprf-slider-control-head"},React.createElement(Label,{htmlFor:e||n},r),isArray(a)&&0<a.length&&React.createElement("div",{className:"wprf-slider-units"},a.map(function(e,t){return React.createElement(components.Button,{key:t,isSmall:!0,isPrimary:!0,onClick:function(){return f(e)},className:e==p?"unit-active":""},e)}))),React.createElement("div",{className:"wprf-slider-control"},React.createElement(components.RangeControl,{allowReset:null==u||u,value:parseInt(s),min:o,max:c,onChange:function(e){return d(e)}})))};function ownKeys$2(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$2(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Textarea=function(t){var n=validFieldProps(t,["is_pro","visible","trigger","disable","parentIndex","context"]),e=React.useCallback(function(e){return n.onChange(e,{isPro:!!t.is_pro})},[null==n?void 0:n.value]);return React__default.default.createElement("textarea",_objectSpread$2(_objectSpread$2({},n),{},{onChange:e,rows:2}))},Textarea$1=withLabel(React__default.default.memo(Textarea));function _createForOfIteratorHelper(e,t){var n,r,a,l,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return r=!(n=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return n=e.done,e},e:function(e){r=!0,a=e},f:function(){try{n||null==o.return||o.return()}finally{if(r)throw a}}};if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),l=0,{s:t=function(){},n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ownKeys$1(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$1(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Toggle=function(t){var n,r,a,e=t.options,l=t.value,o=t.multiple,c=t.style,i=sortingFields(e),u=_objectSpread$1({column:4},c);return o?(e=_slicedToArray(React.useState({}),2),n=e[0],r=e[1],a=function(e){var t=e.target||e.currentTarget;r(function(e){return _objectSpread$1(_objectSpread$1({},e),{},_defineProperty({},t.value,t.checked))})},React.useEffect(function(){t.onChange({target:{type:"toggle",name:t.name,value:n}})},[n]),React.useEffect(function(){if(isObject(l))r(l);else{var e,t={},n=_createForOfIteratorHelper(i);try{for(n.s();!(e=n.n()).done;)t[e.value.value]=l}catch(e){n.e(e)}finally{n.f()}r(t)}},[]),React.createElement("div",{className:"wprf-toggle-wrapper wprf-control"},React.createElement(Row,null,i.map(function(e){return React.createElement(Column,{key:e.value,column:u.column},React.createElement(GenericToggle$1,_objectSpread$1(_objectSpread$1({},e),{},{context:null==t?void 0:t.context,id:e.value,checked:void 0===n[e.value]||(null!=n&&n[e.value]?l:!(null==n||!n[e.value])),type:"checkbox",onChange:a,style:u})))})))):React.createElement(GenericToggle$1,t)},InnerContent=function(e){var t=e.fields,r=e.parentIndex,n=e.context,e=_slicedToArray(React.useState([]),2),a=e[0],l=e[1],e=_slicedToArray(React.useState([]),2),o=e[0],c=e[1];return React.useEffect(function(){var e=sortingFields(t);n.setFormField([r,"fields"],e),l(e)},[]),React.useEffect(function(){var e;isArray(a)&&0<a.length&&(e=a.map(function(e,t){var n=[].concat(_toConsumableArray(r),["fields",t]);return"section"===(null==e?void 0:e.type)?React.createElement(GenericField,_extends$1({key:"input-".concat(e.name,"-").concat(t)},e,{parentIndex:n})):e?React.createElement(Field$1,_extends$1({key:"input-".concat(e.name,"-").concat(t)},e,{parentIndex:n})):React.createElement(React.Fragment,null)}),c(e))},[a]),React.createElement(React.Fragment,null,o)},_excluded=["fields","active","setActive","submit"],Content=function(e){var t=e.fields,r=e.active,n=e.setActive,a=e.submit,l=_objectWithoutProperties(e,_excluded);if(void 0===t)throw new Error(i18n.__("There are no #tabs args defined in props.","betterdocs"));var o,c,i=useBuilderContext(),u=l.parentIndex||[];if(isArray(t))return o=(e=_slicedToArray(React.useState([]),2))[0],c=e[1],React.useEffect(function(){var e=t.filter(function(e){return isVisible(null==i?void 0:i.values,e)});c(e)},[t,null==i||null==(e=i.values)?void 0:e.source]),React.createElement("div",{className:classNames__default.default("wprf-tab-content-wrapper",null==i||null==(e=i.values)?void 0:e.source,null==i||null==(e=i.values)?void 0:e.themes)},React.createElement("div",{className:"wprf-tab-flex"},React.createElement("div",{className:"wprf-tab-contents"},t.map(function(e,t){var n;return isVisible(null==i?void 0:i.values,e)?(n=classNames__default.default("wprf-tab-content","wprf-tab-".concat(null==e?void 0:e.id),{"wprf-active":r===e.id}),React.createElement("div",{id:null==e?void 0:e.id,className:n,key:null==e?void 0:e.id},React.createElement("div",{className:"wprf-tab-heading-wrapper"},(null==e?void 0:e.label)&&(null==(n=null==l?void 0:l.title)||n)&&React.createElement("h4",null,e.label),React.createElement("div",null,(null==l?void 0:l.content_heading)&&Object.keys(l.content_heading).map(function(e,t){return React.createElement(React__default.default.Fragment,{key:"button_".concat(e,"_").concat(t)},React.createElement(Field$1,l.content_heading[e]))}))),React.createElement(InnerContent,{context:i,fields:null==e?void 0:e.fields,parentIndex:[].concat(_toConsumableArray(u),[t])}))):""})),hooks.applyFilters("wprf_tab_content","",l)),(null==l||null==(e=l.step)?void 0:e.show)&&(null==l||null==(e=l.step)||!e.rules||when(null==l||null==(e=l.step)?void 0:e.rules,{rest:l,config:{active:r}}))&&React.createElement(SteppedButton$1,_extends$1({fields:o,active:r,setActive:n,config:null!=(e=l.step)?e:{show:!1}},l)),(null==(o=null==a?void 0:a.show)||o)&&(null==a||!a.rules||when(null==a?void 0:a.rules,{rest:l,config:{active:r}}))&&React.createElement(Submit,a));throw new Error(i18n.__("Not an array.","betterdocs"))},Menu=function(r){if(void 0===r.fields)throw new Error(i18n.__("There are no tabs defined!","betterdocs"));var a=r.active,l=r.setActive,t=r.fields,o=r.context,e=_slicedToArray(React.useState([]),2),n=e[0],c=e[1],e=(React.useEffect(function(){var e=t.filter(function(e){return isVisible(null==o?void 0:o.values,e)});c(e)},[t,null==o||null==(e=o.values)?void 0:e.source]),classNames__default.default("wprf-tab-menu-wrapper",null==r?void 0:r.className,{"wprf-tab-menu-sidebar":null==r?void 0:r.sidebar},null==o||null==(e=o.values)?void 0:e.source)),i=n.findIndex(function(e){return e.id===a});return React.createElement("div",{className:e},React.createElement("ul",{className:"wprf-tab-nav"},n.map(function(t,e){var n;return React.createElement("li",{className:classNames__default.default("wprf-tab-nav-item",(_defineProperty(n={},"".concat(t.classes),t.classes),_defineProperty(n,"wprf-active-nav",a===t.id),_defineProperty(n,"wprf-tab-complete",!(null==r||!r.completionTrack)&&e<=i),n)),"data-key":t.id,key:t.id,onClick:function(){var e;return(null==(e=null==r?void 0:r.clickable)||e)&&l(t.id)}},null!=r&&r.tab_number?React.createElement("span",{className:"icon"},React.createElement("span",{className:"count"},e+1)):"",(null==t?void 0:t.icon)&&(isString(t.icon)&&!isObject(t.icon)?React.createElement("img",{src:t.icon,alt:null==t?void 0:t.label}):isObject(t.icon)?null==o||null==(n=o.icons)||null==(n=n[null==t||null==(e=t.icon)?void 0:e.type])?void 0:n[null==t||null==(e=t.icon)?void 0:e.name]:""),React.createElement("span",null,t.label),null!=t&&t.is_pro?React.createElement(BadgeComp,{componentClasses:"wprf-badge-item",label:"Pro"}):React.createElement(React.Fragment,null))})))},Tab=function(t){var e=useBuilderContext(),n=_slicedToArray(React.useState((null==t?void 0:t.value)||(null==t?void 0:t.active)),2),r=n[0],a=n[1],l=(React.useEffect(function(){var e;null!=t&&t.save_locally&&(e=null!=(e=localStorage.getItem("quickbuilder_active_tab"))?e:null)&&a(JSON.parse(e))},[]),null==(n=null==t?void 0:t.save)||n),n=classNames__default.default("wp-react-form wprf-tabs-wrapper",null==t?void 0:t.className,{"wprf-tab-menu-as-sidebar":null==t?void 0:t.sidebar});return React.useEffect(function(){var e=null!=(e=t.value)?e:t.active;e!=r&&a(e)},[null==t?void 0:t.value]),React.useEffect(function(){null!=t&&t.save_locally&&localStorage.setItem("quickbuilder_active_tab",JSON.stringify(r))},[r]),React.useEffect(function(){t.value!==r&&l&&t.onChange({target:{type:"button",name:t.name,value:r}})},[r]),React.createElement("div",{className:n},React.createElement(Menu,_extends$1({},t,{active:r,setActive:function(e){return a(e)},fields:t.fields,context:e})),React.createElement(Content,_extends$1({},t,{fields:t.fields,active:r,setActive:function(e){return a(e)},submit:null==t?void 0:t.submit})))};function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}data.registerStore("formbuilder",store);var FormBuilder=function(e){var t,n=useBuilderContext(),r=e.tabs;return null!=(t=r)&&t.type||(r=_objectSpread(_objectSpread({},e.config),{},{value:null==e||null==(t=e.config)?void 0:t.active,fields:e.tabs,tabs:void 0,submit:null==e?void 0:e.submit,onChange:function(e){n.setActiveTab(null==e||null==(e=e.target)?void 0:e.value)}})),React.createElement(React.Fragment,null,React.createElement(Tab,r))};exports.Action=Action,exports.BuilderConsumer=BuilderConsumer,exports.BuilderProvider=BuilderProvider,exports.Button=Button$1,exports.CheckboxSelect=CheckboxSelect$1,exports.CodeViewer=CodeViewer$1,exports.ColorPicker=ColorPicker$1,exports.Column=Column,exports.CopyToClipboard=CopyToClipboard$1,exports.Date=Date$1,exports.Editor=Editor$1,exports.Field=Field$1,exports.FormBuilder=FormBuilder,exports.GenericField=GenericField,exports.GenericInput=GenericInput,exports.Group=Group$1,exports.Image=Image,exports.Input=Input$1,exports.JsonUploader=JsonUploader$1,exports.Label=Label,exports.Media=Media$1,exports.Message=Message,exports.Modal=Modal,exports.ObjectFilter=ObjectFilter,exports.Radio=Radio,exports.Repeater=Repeater,exports.ResponsiveNumber=ResponsiveNumber$1,exports.Row=Row,exports.Section=Section$1,exports.Select=Select$1,exports.SelectAsync=SelectAsync$1,exports.Slider=Slider,exports.SweetAlert=SweetAlert,exports.Textarea=Textarea$1,exports.Toggle=Toggle,exports._extends=_extends,exports.builderReducer=builderReducer,exports.executeChange=executeChange,exports.getIn=getIn,exports.getSelectedValues=getSelectedValues,exports.getStoreData=getStoreData,exports.getTime=getTime,exports.hitAAJX=hitAAJX,exports.isArray=isArray,exports.isEmptyObj=isEmptyObj,exports.isExists=isExists,exports.isFunction=isFunction,exports.isNumber=isNumber,exports.isObject=isObject,exports.isString=isString,exports.isVisible=isVisible,exports.merge=merge,exports.objectWithoutPropertiesLoose=objectWithoutPropertiesLoose,exports.processAjaxData=processAjaxData,exports.setIn=setIn,exports.setStoreData=setStoreData,exports.sortingFields=sortingFields,exports.triggerDefaults=triggerDefaults,exports.useBuilder=useBuilder,exports.useBuilderContext=useBuilderContext,exports.useDefaults=useDefaults,exports.validFieldProps=validFieldProps,exports.valueExists=valueExists,exports.when=when,exports.withLabel=withLabel,exports.withProps=withProps,exports.withState=withState,exports.wpFetch=wpFetch;
